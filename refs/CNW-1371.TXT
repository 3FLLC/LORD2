;                                            MAR-28-2001
;
;  Auction House v0.1-beta
;
;                   by Joel Gathercole
;                      GreenMachineBBS.com
;
;
;
;    --Will be adding in NPC support soon.
;
;
; lines for auction data files
@writefile `p20.auc     <-- `p20 is AUCTION#
&time    <-- start date
`p21     <--how many days for auction
`p22     <--Owner of AUCTION
`p23     <--0=ITEM# 100=GEM 101+DEEDS
`s01     <--item# or deed data file name or "GEM"
`p24     <--quantity of items
`p25     <--Starting BID
`p26     <--Current BID
`p27     <--HIGHEST BIDDER Playernum or NPC# (201-399)
`p30     <-- bid increment
;
;
;
@#START
@busy
@offmap
@do moveback
@do move 1 1
@clear screen
@show
                `r1  `$-  `4AUCTION HOUSE  `$-  `r0
  `2Welcome to the Auction House. Here you can put your items up for
 auction for other people to bid on to buy. Everytime a bid is made, that
 person will have to put down the cash immediately. If they loose the
 auction, they will of course be given back all their cash put into their
 account with us. 
                      `%Ú`7ÄÄ`8ÄÄÄÄÄÄÄÄÄÄÄÄÄÄ`7¿
                      `7³                `7³
                      `7³                `%³
                      `8³                `%³
                      `7³                `7³
                      `7ÀÄÄÄÄÄ`%ÄÄÄÄÄÄÄÄ`7ÄÄÄ`8Ù
@do move 25 12
@do `v01 is 1
@choice
`%View Auctions `%
`%Add an Auction`%
`%My account    `%
`%Leave         `%
@if responce is 1 then goto VIEWLIST
@if responce is 2 then goto ADD
@if responce is 3 then goto ACCOUNT
@drawmap
@update
@closescript
@#ACCOUNT
@dataload auction.idf &playernum `p21
@do move 1 1
@clear screen
@show
                `r1  `$-  `4AUCTION HOUSE  `$-  `r0
   `2What can be in your account here:
   `$- `%If you previously placed bids and have lost on the auctions,
   `$- `%The gold from on an item you put up for auction.
   `$- `%The item in which you won an auction with.
@if `p21 > 0 then do
        @begin
        @show
`%You take your `$`p21 `%gold from your account.
        @datasave auction.idf &playernum 0
        @do money + `p21
        @end
@if `p21 < 1 then do
        @begin
        @show
`\         `4You have no more gold in your account here.
        @end
@key bottom
@do goto START
@#ADD
@do move 1 1
@clear screen
@show
                `r1  `$-  `4AUCTION HOUSE  `$-  `r0
  `2Please tell us what kind of item you're putting up for auction.
                      `%Ú`7ÄÄ`8ÄÄÄÄÄÄÄÄÄÄÄÄÄÄ`7¿
                      `7³                `7³
                      `7³                `%³
                      `8³                `%³
                      `7³                `7³
                      `7ÀÄÄÄÄÄ`%ÄÄÄÄÄÄÄÄ`7ÄÄÄ`8Ù
@do move 25 7
@do `v01 is 1
@CHOICE
`%    ITEMS     `%
`%    DEED      `%
`%    GEMS      `%
`%    Nothing   `%
@if responce is 1 then goto ADDITEM
@if responce is 2 then goto ADDDEED
@if responce is 3 then goto ADDGEMS
@if responce is 4 then goto START
@#ADDGEMS
@do write
`\`4How many GEMS?`x:`x
@DO READNUM 3
@if `v40 > `p19 then goto BADMOVE
@if `v40 < 1 then goto BADMOVE
@do `p24 is `v40
@do `s10 is GEM
@do `p23 is 100
@do goto NEWAUCTION
@#ADDITEM
@do `s10 is `x
@do write
`\`\`4Which ITEM?`x:`x
@DO READSTRING 20 `x `s09
@routine ITEMNAME in ITEMNAME.REF
@if `s10 is NIL then goto START
@if `s10 is `x then goto START
@do `s01 is `p20
`\`\`4How many `s10?`x:`x
@DO READNUM 3
@if `v40 > `p21 then goto BADMOVE
@if `v40 < 1 then goto BADMOVE
@do `p24 is `v40
@do `p23 is `p20
@do goto NEWAUCTION
@#ADDDEED
@do write
`\`4Feature not available yet.
@key bottom
@do goto START
@#NEWAUCTION
@do write
`\`4How many days to keep auction open?`x:`x
@DO READNUM 2
@if `v40 > 90 then do
        @begin
        @do write
`\That is too long for an AUCTION, please select less than 90 days.
        @key bottom
        @do goto NEWAUCTION
        @end
@do `p21 is `v40
@do write
`\`4What is the starting bid?`x:`x
@DO READNUM 6
@do `p25 is `v40
@do `p26 is `v40
@do write
`\`4What is the lowest increment bid?`x:`x
@DO READNUM 6
@do `p30 is `v40
@if `p30 < 1 then goto BADMOVE
@do `p20 is 0
@label FINDNEXT
@if `p20 > 50 then do
        @begin
        @do move 1 1
        @clear screen
        @show
                `r1  `$-  `4AUCTION HOUSE  `$-  `r0
 `%One slight problem, s&sir. We do not have enough
 space at this moment to hold anymore auctions. Please
 wait for one of the current auctions to complete.
                   Thanks You.
        @key bottom
        @do goto START
        @end
@do `p20 + 1
@do `s08 is `p20.auc
@if `s08 exists true then goto FINDNEXT
@if `p23 is 100 then do
        @begin
        @do `p19 - `p24
        @do goto MAKEAUC
        @end
@if `p23 is 1 then `i01 - `p24
@if `p23 is 2 then `i02 - `p24
@if `p23 is 3 then `i03 - `p24
@if `p23 is 4 then `i04 - `p24
@if `p23 is 5 then `i05 - `p24
@if `p23 is 6 then `i06 - `p24
@if `p23 is 7 then `i07 - `p24
@if `p23 is 8 then `i08 - `p24
@if `p23 is 9 then `i09 - `p24
@if `p23 is 10 then `i10 - `p24
@if `p23 is 11 then `i11 - `p24
@if `p23 is 12 then `i12 - `p24
@if `p23 is 13 then `i13 - `p24
@if `p23 is 14 then `i14 - `p24
@if `p23 is 15 then `i15 - `p24
@if `p23 is 16 then `i16 - `p24
@if `p23 is 17 then `i17 - `p24
@if `p23 is 18 then `i18 - `p24
@if `p23 is 19 then `i19 - `p24
@if `p23 is 20 then `i20 - `p24
@if `p23 is 21 then `i21 - `p24
@if `p23 is 22 then `i22 - `p24
@if `p23 is 23 then `i23 - `p24
@if `p23 is 24 then `i24 - `p24
@if `p23 is 25 then `i25 - `p24
@if `p23 is 26 then `i26 - `p24
@if `p23 is 27 then `i27 - `p24
@if `p23 is 28 then `i28 - `p24
@if `p23 is 29 then `i29 - `p24
@if `p23 is 30 then `i30 - `p24
@if `p23 is 31 then `i31 - `p24
@if `p23 is 32 then `i32 - `p24
@if `p23 is 33 then `i33 - `p24
@if `p23 is 34 then `i34 - `p24
@if `p23 is 35 then `i35 - `p24
@if `p23 is 36 then `i36 - `p24
@if `p23 is 37 then `i37 - `p24
@if `p23 is 38 then `i38 - `p24
@if `p23 is 39 then `i39 - `p24
@if `p23 is 40 then `i40 - `p24
@if `p23 is 41 then `i41 - `p24
@if `p23 is 42 then `i42 - `p24
@if `p23 is 43 then `i43 - `p24
@if `p23 is 44 then `i44 - `p24
@if `p23 is 45 then `i45 - `p24
@if `p23 is 46 then `i46 - `p24
@if `p23 is 47 then `i47 - `p24
@if `p23 is 48 then `i48 - `p24
@if `p23 is 49 then `i49 - `p24
@if `p23 is 50 then `i50 - `p24
@if `p23 is 51 then `i51 - `p24
@if `p23 is 52 then `i52 - `p24
@if `p23 is 53 then `i53 - `p24
@if `p23 is 54 then `i54 - `p24
@if `p23 is 55 then `i55 - `p24
@if `p23 is 56 then `i56 - `p24
@if `p23 is 57 then `i57 - `p24
@if `p23 is 58 then `i58 - `p24
@if `p23 is 59 then `i59 - `p24
@if `p23 is 60 then `i60 - `p24
@if `p23 is 61 then `i61 - `p24
@if `p23 is 62 then `i62 - `p24
@if `p23 is 63 then `i63 - `p24
@if `p23 is 64 then `i64 - `p24
@if `p23 is 65 then `i65 - `p24
@if `p23 is 66 then `i66 - `p24
@if `p23 is 67 then `i67 - `p24
@if `p23 is 68 then `i68 - `p24
@if `p23 is 69 then `i69 - `p24
@if `p23 is 70 then `i70 - `p24
@if `p23 is 71 then `i71 - `p24
@if `p23 is 72 then `i72 - `p24
@if `p23 is 73 then `i73 - `p24
@if `p23 is 74 then `i74 - `p24
@if `p23 is 75 then `i75 - `p24
@if `p23 is 76 then `i76 - `p24
@if `p23 is 77 then `i77 - `p24
@if `p23 is 78 then `i78 - `p24
@if `p23 is 79 then `i79 - `p24
@if `p23 is 80 then `i80 - `p24
@if `p23 is 81 then `i81 - `p24
@if `p23 is 82 then `i82 - `p24
@if `p23 is 83 then `i83 - `p24
@if `p23 is 84 then `i84 - `p24
@if `p23 is 85 then `i85 - `p24
@if `p23 is 86 then `i86 - `p24
@if `p23 is 87 then `i87 - `p24
@if `p23 is 88 then `i88 - `p24
@if `p23 is 89 then `i89 - `p24
@if `p23 is 90 then `i90 - `p24
@if `p23 is 91 then `i91 - `p24
@if `p23 is 92 then `i92 - `p24
@if `p23 is 93 then `i93 - `p24
@if `p23 is 94 then `i94 - `p24
@if `p23 is 95 then `i95 - `p24
@if `p23 is 96 then `i96 - `p24
@if `p23 is 97 then `i97 - `p24
@if `p23 is 98 then `i98 - `p24
@if `p23 is 99 then `i99 - `p24
@label MAKEAUC
@writefile `p20.auc
&time
`p21
&playernum
`p23
`s10
`p24
`p25
`p26
0
`p30
@do move 1 1
@clear screen
@show
                `r1  `$-  `4AUCTION HOUSE  `$-  `r0
                `r1  `$-  `4YOUR AUCTION   `$-  `r0
`%Starting Date: `$&time
`%Length: `$`p21 days
`%Item: `$`s10
`%Quantity: `$`p24
`%Starting Bid: `$$`p25
@key bottom
@do goto START
@#BADMOVE
@do write
`\`4You made a BAD move, returning you to Main Menu.
@key bottom
@do goto START
@#VIEWLIST
@do `p20 is 0
@label FINDNEXT2
@do `p20 + 1
@do `s08 is `p20.auc
@if `s08 exists true then do
        @begin
        @do move 1 1
        @clear screen
        @readfile `s08
`p28
`p21 
`p22 
`p23 
`s04 
`p24 
`p25 
`p26 
`p27 
        @do `s06 is `p28
        @do `p29 is &time
        @do `s06 is `$`p28
        @if `p28 is `p29 then `s06 is `5Today`%
        @do `p30 is `p28
        @do `p30 + `p21
        @do `p30 - `p29
        @if `p30 < 0 then do
                @begin
                @routine DONEAUC
                @end
        @do `s07 is `5`p30`%`xdays
        @if `p30 is 0 then `s07 is `5today   `%
        @if `p30 is 1 then `s07 is `5tommorow`%
        @if `p21 is 9999 then `s07 is `5COMPLETE`%
        @do `s03 is getname `p22
        @do `s05 is getname `p27
        @if `p27 is 0 then `s05 is `@NOBODY
        @if `p23 > 100 then do
                @begin
;ADD THIS IN WHEN DEEDS ROUTINES ARE COMPLETED
                @end
        @do `s02 is `p20
        @do pad `s02 3
        @do pad `s06 5
        @do pad `s07 10
        @do pad `s04 24
        @do pad `s03 18
        @do pad `s05 18
        @show
                `r1  `$-  `4AUCTION HOUSE  `$-  `r0
           `%ÚÄÄÄÄÄÄÄÄ`7ÄÄÄÄÄÄÄÄÄÄÄÄÄÄ`8ÄÄÄÄÄÄÄÄÄÄ`7ÄÄÄÄ¿
           `%³   `r7  `$-      `4ITEM# `s02     `$-      `r0   `7³
           `7³ `%Start day: `$`s06   `%Ends: `s07`7³
           `7³ `%Item:     `$`s04 `7³
           `7³ `%BID: `$$           `%Start BID: `$$      `7³
           `7³ `%Highest Bidder: `5`s05 `7³
           `7³ `%Owner: `$`s03          `7³
           `7ÀÄÄÄÄÄ`%ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ`7ÄÄÄÄÄÄÄ`8ÄÄÙ
                      `%Ú`7ÄÄ`8ÄÄÄÄÄÄÄÄÄÄ`7¿
                      `7³            `7³
                      `8³            `%³
                      `7³            `7³
                      `7ÀÄÄÄÄÄ`%ÄÄÄÄ`7ÄÄÄ`8Ù
        @do move 20 6
        @do write
`@`p24
        @do move 20 7
        @do write
`$`p26
        @do move 43 7
        @do write
`$`p25
        @do move 25 12
        @choice
`%`xNext     `%
!`p21 9999 `%`xBid      `%
=`p21 9999 =`p27 &playernum `%`xCollect   `%
`%`xLeave    `%
        @if responce is 3 then goto COLLECTIT
        @if responce is 4 then goto START
        @if responce is 2 then do
                @begin
                @readfile `s08
`p28
`p21
`p22
`p23
`s04
`p24
`p25
`p26
`p27
`p30
                @if `p22 is &playernum then goto BADMOVE
                @if `p27 is &playernum then goto BADMOVE
                @do `p40 is `p30
                @do `p40 + `p26
                @do write
`\`\`%Bid amount `8(`7min. `p40`8):`x
                @do readnum 8
                @if `v40 < `p40 then goto BADMOVE
                @if `v40 < `p26 then goto BADMOVE
                @do `p26 is `v40
                @dataload auct`p20.idf &playernum `p29
                @if `p29 is 0 then do
                        @begin
                        @if `p26 > money then goto BADMOVE
                        @end
                @if `p29 > 0 then do
                        @begin
                        @do `p26 - `p29
                        @if `p26 > money then goto BADMOVE
                        @do `p26 + `p29
                        @end
                @do delete `s08
                @writefile `s08
`p28
`p21
`p22
`p23
`s04
`p24
`p25
`p26
&playernum
`p30
                @dataload auct`p20.idf &playernum `p29
                @if `p29 is 0 then do
                        @begin
                        @datasave auct`p20.idf &playernum `p26
                        @end
                @if `p29 > 0 then do
                        @begin
                        @do `p26 - `p29
                        @datasave auct`p20.idf &playernum `p26
                        @end
                @do money - `p26
                @do `p20 - 1
                @end
        @end
@if `p20 > 50 then `p20 is 0
@do goto FINDNEXT2
@#DONEAUC
; read the file again!
@readfile `s08
`p28
`p21 
`p22 
`p23 
`s04 
`p24 
`p25 
`p26 
`p27
`p30
@if `p21 is 9999 then do
        @begin
        @closescript
        @end
@if `p27 is 0 then `p27 is `p22
@do delete `s08
@writefile `s08
`p28
9999
`p22
`p23
`s04
`p24
`p25
`p26
`p27
`p30
@
@DO `s02 IS GETNAME `p27
@if `p22 is `p27 then do
        @begin
        @writefile mail\mail`p22.dat
  `0AUCTION HOUSE
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`%Your auction #`p20 has ended. There was NO winner of this
`%AUCTION. You need to come to the AUCTION HOUSE to collect
`%your `$`s04`%.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
        @closescript
        @end
@if `p22 < 201 then do
        @begin
        @dataload auction.idf `p22 `p28
        @do `p28 + `p26
        @datasave auction.idf `p22 `p28
        @writefile mail\mail`p22.dat
  `0AUCTION HOUSE
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`%Your auction #`p20 has ended. The winner of the AUCTION was
`%`s02`%. You need to come to the AUCTION HOUSE to
`%collect your `$`p26 `%gold from the winning bid.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
        @end
@if `p27 < 201 then do
        @begin
        @datasave auct`p20.idf `p27 0
        @writefile mail\mail`p27.dat
  `0AUCTION HOUSE
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`%You WON the auction #`p20 with the `s04`%
`%at the price of `$`p26 `%gold. Please come to the
`%AUCTION HOUSE to pick up your winning item.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
        @end
@do `p22 is 0
@label DONEAUC2
@do `p22 + 1
@dataload auct`p20.idf `p22 `p29
@if `p29 > 0 then do
        @begin
        @dataload auction.idf `p22 `p28
        @do `p28 + `p29
        @datasave auction.idf `p22 `p28
        @end
@if `p22 > &totalaccounts then do
        @begin
        @do delete auct`p20.idf
        @closescript
        @end
@do goto DONEAUC2
@#COLLECTIT
@readfile `s08
`p28
`p21 
`p22 
`p23 
`s04 
`p24 
`p25 
`p26 
`p27 
@if `p27 is &playernum then do
        @begin
        @if `p23 < 100 then do
                @begin
@if `p23 is 1 then `i01 + `p24
@if `p23 is 2 then `i02 + `p24
@if `p23 is 3 then `i03 + `p24
@if `p23 is 4 then `i04 + `p24
@if `p23 is 5 then `i05 + `p24
@if `p23 is 6 then `i06 + `p24
@if `p23 is 7 then `i07 + `p24
@if `p23 is 8 then `i08 + `p24
@if `p23 is 9 then `i09 + `p24
@if `p23 is 10 then `i10 + `p24
@if `p23 is 11 then `i11 + `p24
@if `p23 is 12 then `i12 + `p24
@if `p23 is 13 then `i13 + `p24
@if `p23 is 14 then `i14 + `p24
@if `p23 is 15 then `i15 + `p24
@if `p23 is 16 then `i16 + `p24
@if `p23 is 17 then `i17 + `p24
@if `p23 is 18 then `i18 + `p24
@if `p23 is 19 then `i19 + `p24
@if `p23 is 20 then `i20 + `p24
@if `p23 is 21 then `i21 + `p24
@if `p23 is 22 then `i22 + `p24
@if `p23 is 23 then `i23 + `p24
@if `p23 is 24 then `i24 + `p24
@if `p23 is 25 then `i25 + `p24
@if `p23 is 26 then `i26 + `p24
@if `p23 is 27 then `i27 + `p24
@if `p23 is 28 then `i28 + `p24
@if `p23 is 29 then `i29 + `p24
@if `p23 is 30 then `i30 + `p24
@if `p23 is 31 then `i31 + `p24
@if `p23 is 32 then `i32 + `p24
@if `p23 is 33 then `i33 + `p24
@if `p23 is 34 then `i34 + `p24
@if `p23 is 35 then `i35 + `p24
@if `p23 is 36 then `i36 + `p24
@if `p23 is 37 then `i37 + `p24
@if `p23 is 38 then `i38 + `p24
@if `p23 is 39 then `i39 + `p24
@if `p23 is 40 then `i40 + `p24
@if `p23 is 41 then `i41 + `p24
@if `p23 is 42 then `i42 + `p24
@if `p23 is 43 then `i43 + `p24
@if `p23 is 44 then `i44 + `p24
@if `p23 is 45 then `i45 + `p24
@if `p23 is 46 then `i46 + `p24
@if `p23 is 47 then `i47 + `p24
@if `p23 is 48 then `i48 + `p24
@if `p23 is 49 then `i49 + `p24
@if `p23 is 50 then `i50 + `p24
@if `p23 is 51 then `i51 + `p24
@if `p23 is 52 then `i52 + `p24
@if `p23 is 53 then `i53 + `p24
@if `p23 is 54 then `i54 + `p24
@if `p23 is 55 then `i55 + `p24
@if `p23 is 56 then `i56 + `p24
@if `p23 is 57 then `i57 + `p24
@if `p23 is 58 then `i58 + `p24
@if `p23 is 59 then `i59 + `p24
@if `p23 is 60 then `i60 + `p24
@if `p23 is 61 then `i61 + `p24
@if `p23 is 62 then `i62 + `p24
@if `p23 is 63 then `i63 + `p24
@if `p23 is 64 then `i64 + `p24
@if `p23 is 65 then `i65 + `p24
@if `p23 is 66 then `i66 + `p24
@if `p23 is 67 then `i67 + `p24
@if `p23 is 68 then `i68 + `p24
@if `p23 is 69 then `i69 + `p24
@if `p23 is 70 then `i70 + `p24
@if `p23 is 71 then `i71 + `p24
@if `p23 is 72 then `i72 + `p24
@if `p23 is 73 then `i73 + `p24
@if `p23 is 74 then `i74 + `p24
@if `p23 is 75 then `i75 + `p24
@if `p23 is 76 then `i76 + `p24
@if `p23 is 77 then `i77 + `p24
@if `p23 is 78 then `i78 + `p24
@if `p23 is 79 then `i79 + `p24
@if `p23 is 80 then `i80 + `p24
@if `p23 is 81 then `i81 + `p24
@if `p23 is 82 then `i82 + `p24
@if `p23 is 83 then `i83 + `p24
@if `p23 is 84 then `i84 + `p24
@if `p23 is 85 then `i85 + `p24
@if `p23 is 86 then `i86 + `p24
@if `p23 is 87 then `i87 + `p24
@if `p23 is 88 then `i88 + `p24
@if `p23 is 89 then `i89 + `p24
@if `p23 is 90 then `i90 + `p24
@if `p23 is 91 then `i91 + `p24
@if `p23 is 92 then `i92 + `p24
@if `p23 is 93 then `i93 + `p24
@if `p23 is 94 then `i94 + `p24
@if `p23 is 95 then `i95 + `p24
@if `p23 is 96 then `i96 + `p24
@if `p23 is 97 then `i97 + `p24
@if `p23 is 98 then `i98 + `p24
@if `p23 is 99 then `i99 + `p24
                @do write
`\`\   `%You collect your `4`p24 `$`s04`%.
                @end
        @if `p23 is 100 then do
                @begin
                @do `p19 + `p24
                @do write
`\`\   `%You collect your `$`p24 GEMS`%.
                @end
        @if `p23 > 100 then do
                @begin
;ADD THIS IN WHEN DEEDS ROUTINES ARE COMPLETED
                @end
        @end
@do delete `s08
@key bottom
@do goto START
@#NOMORE
@#getvars
@do `p30 is 5
@do `v40 is 10000
@routine widthdraw in vaults.ref
@writefile coliseum.dat
0
`v40
1
10
10
1000
@#sign
@do moveback
@do move 42 10
@do write
`r1`%ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿`r0
@do move 42 11
@do write
`r1³ Northlands Coliseum  ³`r0
@do move 42 12
@if coliseum.dat exist false then do
        @begin
@do write
`r1³     - FOR SALE      ³ ³`r0
        @end
@if coliseum.dat exist true then do
        @begin
@do write
`r1³                     ³ ³`r0
        @end
@do move 42 13
@do write
`r1³        3 Miles      ³ ³`r0
@do move 42 14
@do write
`r1ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ`r0`l`l`l`l`l`l`l
@do move 42 10
@do write
`r2`0                         `r0
@do move 42 11
@do write
`r2                         `r0
@do move 42 12
@do write
`r2                         `r0
@do move 42 13
@do write
`r2                         `r0
@do move 42 14
@do write
`r2                         `r0
@update
@closescript
@#top
@do moveback
@busy
@offmap
@do `p20 is 0
@datanewday colfite.idf
@dataload colfite.idf &playernum `p20
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
@if `p20 > `p40 then goto nogame
@do `p44 is 1
@readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
@do `p21 is deleted `p45
@if `p21 is 1 then do
        @begin
        @do delete coliseum.dat
        @do addlog
  `%NorthLand Coliseum`2 is put on the market today.
        @routine seperate in gametxt.ref
        @end
@if `p45 is 0 then `p44 is 0
@if `p45 is &playernum then `p44 is 2
@do `v01 is 1
@show
`r0`c   `r1 `%The Coliseum `r0
  `2A hugely muscled man greets you at the door.
  `0Hi! Welcome to the Coliseum! Would you like to bet on a fight?
@do write
`x`x
@choice
You betcha!
No way jos
What are the rules?
=`p44 0 I want to buy this place
Who runs this operation?
=`p44 2 Go to the office
@if responce is 2 then do
  @begin
  @drawmap
  @update
  @closescript
  @end
@if responce is 3 then do
  @begin
  @run rulz
  @end
@if responce is 1 then do
  @begin
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat        ;name/vault/combo/bets/min bet$/max bet$
`p45
`p46
`p47
`p40
`p41
`p42
        @end
  @do `p20 is 0
  @do `p20 is money
  @if `p20 < `p41 then do
    @begin
    @run nodough
    @closescript
    @end
  @run pickmon
  @closescript
  @end
@if responce is 4 then goto forsale
@if responce is 5 then do
        @begin
        @do `s05 is King`xSysOp
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @if `p45 > 0 then do
                @begin
                @do `s05 is getname `p45
                @end
        @show
`r0`c   `r1 `%The Coliseum `r0
  `2The hugely muscled man answers you.
   `%"`$Why of course, `s05 owns this great place.`%"
        @key
        @do goto top
        @end
@if responce is 6 then do
        @begin
@label office
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @do `v01 is 1
        @show
`r0`c                    `r1 In Your Office `r0
   You sit down in front of your desk on your nice hardwood block chair.
        @do write
`x`x
        @do `p45 is 1
       @label deskloop
        @if coldesk`p45.txt exist false then do
                @begin
                @writefile coldesk`p45.txt
`r6                                                                               `r0
                @do `p45 + 1
                @if `p45 < 10 then goto deskloop
                @end
        @choice
Change Vault Combination
Ownership options
Open the Vault
Change limits
Look at the desk
Home Sweet Home
Leave the office
        @if responce is 5 then do
                @begin
                @show
`c`\
`r6`8- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -`r0
`r6                                              `%',Made in China,'                `r0
                @displayfile coldesk1.txt
                @displayfile coldesk2.txt
                @displayfile coldesk3.txt
                @displayfile coldesk4.txt
                @displayfile coldesk5.txt
                @displayfile coldesk6.txt
                @displayfile coldesk7.txt
                @displayfile coldesk8.txt
                @displayfile coldesk9.txt
                @show
`r6                                                                               `r0
`r6`8- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -`r0
                @key bottom
                @end
        @if responce is 4 then do
                @begin
@label limits
                @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                @clear screen
                @do move 25 2
                @do write
`r1`$   NorthLands Coliseum Limits   `r0
                @do move 15 4
                @do write
`2-Players can BET `%`p40 `2times.
                @do move 15 5
                @do write
`2-Players can BET a MAX of `%`p42`2.
                @do move 15 6
                @do write
`2-Players can BET as LOW as `%`p41`2.
                @do move 30 9
                @do write
`r0`5Ú/ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ\¿
                @do move 30 10
                @do write
`r0`5³                         ³
                @do move 30 11
                @do write
`r0`5³                         ³
                @do move 30 12
                @do write
`r0`5³                         ³
                @do move 30 13
                @do write
`r0`5³                         ³
                @do move 30 14
                @do write
`r0`5À\ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ/Ù
                @do move 31 10
                @do `v01 is 1
                @choice
`$Change MAX Amount of bets
`$Change MAX Bet
`$Change MIN Bet
`$Change Nothing
                @if responce is 4 then goto office
                @if responce is 1 then do
                        @begin
                        @do move 20 17
                        @do write
`$Change AMOUNT OF BETS to what? :
                        @do readnum 8
                        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                        @do `p40 is `v40
                        @do delete coliseum.dat
                        @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                        @do goto limits
                        @end
                 @if responce is 2 then do
                        @begin
                        @do move 20 17
                        @do write
`$Change MAX BETS to what? :
                        @do readnum 8
                        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                        @do `p42 is `v40
                        @do delete coliseum.dat
                        @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                        @do goto limits
                        @end
                 @if responce is 3 then do
                        @begin
                        @do move 20 17
                        @do write
`$Change MIN BETS to what? :
                        @do readnum 8
                        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                        @do `p41 is `v40
                        @do delete coliseum.dat
                        @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                        @do goto limits
                        @end
                @end
        @if responce is 3 then do
                @begin
                @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                @clear screen
                @do move 20 6
                @do write
`$You need to know the combonation to open the Vault.
                @do move 35 10
                @do write        
Ú\ÄÄÄÄÄÄÄÄ/¿
                @do move 35 11
                @do write
³          ³
                @do move 35 12
                @do write
À\ÄÄÄÄÄÄÄÄ/Ù
                @do move 36 11
                @do readnum 8 000
                @do `p49 is 0
                @if `v40 is `p47 then goto openvault
                @if `v40 not `p47 then do
                        @begin
                        @do move 20 15
                        @do write
`@Lock doesn't budge. Must be wrong combination.`\`\
                        @key
                        @do goto office
                        @end
                @do goto office
                @end
        @if responce is 7 then goto top
        @if responce is 6 then do
                @begin
                @do `p69 is 20
                @show
`\`\  This is your HOME now. Living at work is great!`\
                @key
                @end
        @if responce is 2 then do
                 @begin
                 @show
`r0`c  `r1 Ownership Options `r0
  `2You retrieve your deed and carefully look it over.
   
                 @do `v01 is 1
                 @do write
`x`x
                 @choice
Transfer deed to someone else
Sell property back to the bank for `$100,000`%.
Do nothing of the sort
                 @if response is 1 then do
                         @begin
                         @show
`\`\  `2Transfer to whom?
                         @chooseplayer `p20
                         @if `p20 is 0 then do
                                 @begin
                                 @show
  `2You decide to keep your domain - for now.`\`\`k
                                 @do goto office
                                 @end
                         @do `s02 is getname `p20
                         @show
`2  Are you sure you wish to give your keep to `0`s02`2?
                         @do write
`x`x
                         @choice
Yes
Not on your life.
                         @if responce is 2 then do
                                @begin
                                        @show
`\`\  `2You decide to keep your domain - for now.`\`\`k
                                        @do goto office
                                        @end
                                @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                                @do delete coliseum.dat
                                @writefile coliseum.dat
`p20
`p46
`p47
`p40
`p41
`p42
                                @writefile mail\mail`p20.dat
  `0Business note:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 has transferred ownership of NorthLand Coliseum to you. 
  Vault Combination to open the safe will remain `0"`p47"`2 unless
  `2you come by and change it.
                                @do addlog
  `0`n`2 has given `%NorthLand Coliseum`2 to `0`s02`2!
                                @routine seperate in gametxt.ref
                                @show
`\`\  `2Deed transfered.  Oh well - it was fun while it lasted.`\`\`k
                                @do goto office
                                @end
                        @if response is 2 then do
                                @begin
                                @show
`\`\`2  Are you sure you wish to sell your keep back to the bank?`\
                                @do `v01 is 1
                                @do write
`x`x
                                @choice
Yes
Not on your life.
                                @if responce is 2 then do
                                        @begin
                                        @show
`\`\  `2You decide to keep your domain - for now.`\`\`k
                                        @do goto office
                                        @end
                                @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
                                @do `p30 is 5
                                @do `v40 is 100000
                                @routine widthdraw in vaults.ref
                                @do delete coliseum.dat
                                @do money + 100000
                                @show
`\`\  `%KEEP SOLD!`2`\`\`k
                                @do addlog
  `0`n`2 has sold `%NorthLand Coliseum`2 back to the bank!
                                @routine seperate in gametxt.ref
                                @drawmap
                                @do goto top
                                @end
                        @do goto top
                        @end
                @if responce is 1 then do
                        @begin
                       @label combo
                        @do write
`\`\  `0The new Combination? (Digits ONLY): `x
                        @DO READNUM 8 `p47
                        @if `v40 < 100 then do
                                @begin
                                @show
`\`\  `2Damn, it didn't work like that, the combo is too short.`l  `2MIN 3 Digits.`\`\`k
                                @do goto combo
                                @end
                        @readfile coliseum.dat
`p45
`p46
`p43
`p40
`p41
`p42
                        @do `p47 is `v40
                        @do delete coliseum.dat
                        @writefile coliseum.dat
&playernum
`p46
`p47
`p40
`p41
`p42
                        @show
`\`\  `0Don't forget it.`\Do you want to engrave the combo in the desk? [Y/n]`\
                        @do readspecial `s05 YN
                        @if `s05 is Y then do
                                @begin
                                @do `s06 is `x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x
                                @do `s07 is `x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x`x
                                @do `p49 random 68 1
                                @do pad `s06 `p49
                                @do `p48 is 67
                                @do `p48 - `p49
                                @do pad `s07 `p48
                                @do `p45 random 11 1
                                @if `p45 is 1 then `s05 is ,
                                @if `p45 is 2 then `s05 is /
                                @if `p45 is 3 then `s05 is ;
                                @if `p45 is 4 then `s05 is "
                                @if `p45 is 5 then `s05 is '
                                @if `p45 is 6 then `s05 is ~
                                @if `p45 is 7 then `s05 is !
                                @if `p45 is 8 then `s05 is *
                                @if `p45 is 9 then `s05 is )
                                @if `p45 is 10 then `s05 is (
                                @if `p45 is 11 then `s05 is -
                                @do `s05 add `p47
                                @do `p45 random 11 1
                                @if `p45 is 1 then `s05 add ,
                                @if `p45 is 2 then `s05 add /
                                @if `p45 is 3 then `s05 add ;
                                @if `p45 is 4 then `s05 add "
                                @if `p45 is 5 then `s05 add '
                                @if `p45 is 6 then `s05 add ~
                                @if `p45 is 7 then `s05 add !
                                @if `p45 is 8 then `s05 add *
                                @if `p45 is 9 then `s05 add )
                                @if `p45 is 10 then `s05 add (
                                @if `p45 is 11 then `s05 add -
                                @do pad `s05 12
                                @do `p45 random 9 1
                                @do delete coldesk`p45.txt
                                @writefile coldesk`p45.txt
`r6`s06`s05`s07
                                @do goto office
                                @end
                        @do goto office
                        @end
                @do goto office
                @end
        @do goto office
        @end
@#forsale
@do moveback
@offmap
  @show
`r0`c  `r1 `%For Sale `r0
  `$- `2NorthLands Coliseum `$-
      `%"`$A classic sporting gambling establishment.`%"
        `2Features:
              `%-`$You get a secured vault.
              `%-`$You must leave money in the vault to pay
                `$out winning bets (if any).
              `%-`$You collect all player lossing bets.
              `%-`$When & if the vault is empty the Coliseum is closed.
              `%-`$You set the min and max wagers.
              `2The asking price is, just `$$100,000`2.
@do `v01 is 1
@do write
`x`x
@choice
>&money 99999 Purchase it.
<&money 100000 Sigh wistfully and leave since you don't have enough.
>&money 99999 Leave.
@
@if responce is 1 then do
  @begin
  @readfile coliseum.dat
`p45
  @if `p45 > 0 then do
    @begin
    @show
`\`\  `2Oh crap!  Someone bought it while you were thinking about it.  You
  will regret your snail like thinking for the rest of your days.`\`\`k
    @do goto top
    @end
  @readfile coliseum.dat
`p45
`p44
`p45
`p40
`p41
`p42
  @do delete coliseum.dat
  @writefile coliseum.dat
&playernum
`p44
`p45
`p40
`p41
`p42
    @do money - 100000
    @do `p30 is 5
    @do `v40 is 100000
    @routine deposit in vaults.ref
    @do addlog
  `0`n `2buys `%NorthLand Coliseum`2!
     @routine seperate in gametxt.ref
  @show      
`r0`c  `r1 `%Why hello there, landowner! `r0
`\`2  Nice job!  You now own this business now!
`2Enjoy your new business.`\`\`k
  @do goto top
  @end
@do goto top
@label done
@drawmap
@update
@closescript
  @end
@#pickmon
@dataload colfite.idf &playernum `p20
@if `p20 is 0 then do
  @begin
  @datasave colfite.idf &playernum 1
  @end
@do `p20 + 1
@datasave colfite.idf &playernum `p20
@do `p26 is 0
@do `p23 is 0
@do `p20 is 0
@show
`\`\`%Calculating Monster 1. Please Hold...
@do `p20 random 10 1
@do goto mon`p20
@#mon1
;Monster Name
@do `s01 is Nibbet
;Monster's Color
@do `s02 is !
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon2
;Monster Name
@do `s01 is Branch`xDividian
;Monster's Color
@do `s02 is 4
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon3
;Monster Name
@do `s01 is Evil`xTreant
;Monster's Color
@do `s02 is 6
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon4
;Monster Name
@do `s01 is Slime`xBeast
;Monster's Color
@do `s02 is 0
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon5
;Monster Name
@do `s01 is Alligator
;Monster's Color
@do `s02 is 2
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon6
;Monster Name
@do `s01 is Behemoth
;Monster's Color
@do `s02 is 9
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon7
;Monster Name
@do `s01 is Commando
;Monster's Color
@do `s02 is 0
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon8
;Monster Name
@do `s01 is Goblin
;Monster's Color
@do `s02 is 2
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon9
;Monster Name
@do `s01 is Bear
;Monster's Color
@do `s02 is 6
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#mon10
;Monster Name
@do `s01 is Chimera
;Monster's Color
@do `s02 is 0
;Current HP
@do `p24 random 50 50
;Total HP
@do `p27 is `p24
;Attack Strength
@do `p26 random 50 50
;Weapon Strength
@do `p23 random `p26 1
@show
`\`%Calculating Monster 2. Please Hold...
@run rand
@#rand
@do `p41 is 0
@do `p42 is 0
@do `p20 is 0
@do `p20 random 10 1
@do goto mons`p20
@#mons1
;Monster Name
@do `s03 is Nibbet
;Monster's Color
@do `s04 is !
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons2
;Monster Name
@do `s03 is Branch`xDividian
;Monster's Color
@do `s04 is 4
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons3
;Monster Name
@do `s03 is Evil`xTreant
;Monster's Color
@do `s04 is 6
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons4
;Monster Name
@do `s03 is Slime`xBeast
;Monster's Color
@do `s04 is 0
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons5
;Monster Name
@do `s03 is Alligator
;Monster's Color
@do `s04 is 2
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons6
;Monster Name
@do `s03 is Behemoth
;Monster's Color
@do `s04 is 9
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons7
;Monster Name
@do `s03 is Commando
;Monster's Color
@do `s04 is 0
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons8
;Monster Name
@do `s03 is Goblin
;Monster's Color
@do `s04 is 2
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons9
;Monster Name
@do `s03 is Bear
;Monster's Color
@do `s04 is 6
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#mons10
;Monster Name
@do `s03 is Chimera
;Monster's Color
@do `s04 is 0
;Current HP
@do `p28 random 50 50
;Total HP
@do `p29 is `p28
;Attack Strength
@do `p42 random 50 50
;Weapon Strength
@do `p41 random `p42 1
@if `s03 = `s01 then do
  @begin
  @run rand
  @end
@run bet
@#bet
@do `p30 is 0
@do `v01 is 1
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
@show
`r0`c   `r1 `%Picking A Winner `r0
   `0The next battle is about to begin! Here are the challengers:
   `0Challenger #1: `l`l`l``s02`s01`2`%!
   `0Challenger #2: `l`l`l``s04`s03`2`%!
   `0Who would you like to bet on?
@do write
`x`x
@choice
`s01
`s03
@if responce is 1 then do
  @begin
  @do `p30 is 1
  @do `s09 is ``s02`s01
  @run bet2
  @closescript
  @end
@if responce is 2 then do
  @begin
  @do `p30 is 2
  @do `s09 is ``s04`s03
  @run bet2
  @closescript
  @end
@#bet2
@do `p22 is 0
@do `v01 is 1
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
@if `p46 < `p42 then `p42 is `p46
@if `p46 < `p41 then goto broke
        @end
@show
`r0`c   `r1 `%Place Your Bets `r0
   `0How much would you like to bet?
   `0Minimum is `$`p41`0 gold, Maximum `$`p42`0 gold
   `#(`0You have `$&money gold`#)
@label pik
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
@do move 3 11
@do readnum 8 NIL `% `1
@if `v40 is 0 then goto NOBET
@if `v40 less `p41 then do
  @begin
  @do goto pik
  @end
@if `v40 more `p42 then do
  @begin
  @do goto pik
  @end
@do `p22 is `v40
@do goto fitescr
@#fitescr
@do map is 54
@loadmap 54
@drawmap
@do `p40 is 1
@do move 5 2
@do write
`r0``s02`s01
@do move 5 6
@do write
`r0``s04`s03
@do move 12 9
@do write
`%1
@do move 46 2
@do write
`s09
@do move 43 4
@do write
`$`p22
@do `p22 + `p22
@do move 70 4
@do write
`$`p22
@do move 3 14
@do write
`r0``s02  
@do move 3 15
@do write
 -Å-
@do move 3 16
@do write
 / \
@do move 3 18
@do write
``s02`s01
@do move 3 19
@do write
`2HP: `%`p24 `2of `%`p27
@do move 74 14
@do write
`r0``s04  
@do move 74 15
@do write
 -Å-
@do move 74 16
@do write
 / \
@do move 55 18
@do write
``s04`s03
@do move 55 19
@do write
`2HP: `%`p28 `2of `%`p29
@run battle
@closescript
@#battle
@do `p20 is 0
@do `p25 is 0
@do `p21 is 0
@do `p21 random 10 1
@if `p21 < 4 then do
  @begin
  @do move 35 6
  @do write
``s04`s03 `!misses`%!
  @do move 35 7
  @do write
`k
  @run battle2
  @closescript
  @end
@do `p25 is `p26
@do `p25 + `p23
@do `p20 random `p25 1
@do move 35 6
@do write
``s04`s03 `4hits `%for `@`p20 `%damage!
@do move 35 7
@do write
`k
@do `p24 - `p20
@if `p24 < 1 then `p24 is 0
@do move 3 19
@show
`2HP: `%`p24 `2of `%`p27`x`x`x`x`x`x
@if `p24 is 0 then do
  @begin
  @run deadguy
  @closescript
  @end
@run battle2
@closescript
@end
@#battle2
@do `p20 is 0
@do `p25 is 0
@do `p21 is 0
@do `p21 random 10 1
@if `p21 < 4 then do
  @begin
  @do move 35 8
  @do write
``s02`s01 `!misses`%!
  @do move 35 9
  @do write
`k
  @routine cleartext
  @run battle
  @closescript
  @end
@do `p25 is `p26
@do `p25 + `p23
@do `p20 random `p25 1
@do move 35 8
@do write
``s02`s01 `4hits `%for `@`p20 `%damage!
@do move 35 9
@do write
`k
@do `p28 - `p20
@if `p28 < 1 then `p28 is 0
@do move 55 19
@do write
`2HP: `%`p28 `2of `%`p29`x`x`x 
@if `p28 is 0 then do
  @begin
  @run youdead
  @closescript
  @end
@routine cleartext
@run battle
@closescript
@end
@#deadguy
@do move 3 12
@do write
`r0                             `%
@do move 3 13
@do write
                             `%
@do move 3 14
@do write
                             `%
@do move 3 15
@do write
                             `%
@do move 3 16
@do write
                             `%
@do move 3 17
@do write
                             `%
@do move 3 18
@do write
                             `%
@do move 3 19
@do write
                             `%
@if `p30 is 2 then do
  @begin
  @do move 3 14
  @do write
`0Your monster has won!
  @do move 3 15
  @do write
`0You win `$$`p22!
  @do `p22 / 2
  @do money + `p22
  @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
@do `p46 - `p22
@do delete coliseum.dat
@writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @run endbattle1
  @closescript
  @end
@if `p30 is 1 then do
  @begin
  @do move 3 14
  @do write
`0Your monster has lost!
  @do `p22 / 2
  @do money - `p22
  @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @do `p46 + `p22
  @do delete coliseum.dat
  @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @run endbattle1
  @closescript
  @end
@closescript
@end
@#youdead
@do move 42 12
@do write
                                     `%
@do move 42 13
@do write
                                     `%
@do move 42 14
@do write
                                     `%
@do move 42 15
@do write
                                     `%
@do move 42 16
@do write
                                     `%
@do move 42 17
@do write
                                     `%
@do move 42 18
@do write
                                     `%
@do move 42 19
@do write
                                     `%
@if `p30 is 1 then do
  @begin
  @do move 42 14
  @do write
`0Your monster has won!
  @do move 42 15
  @do write
`0You win `$$`p22!
  @do `p22 / 2
  @do money + `p22
  @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @do `p46 - `p22
  @do delete coliseum.dat
  @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @run endbattle2
  @closescript
  @end
@if `p30 is 2 then do
  @begin
  @do move 42 14
  @do write
`0Your monster has lost!
  @do `p22 / 2
  @do money - `p22
  @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @do `p46 + `p22
  @do delete coliseum.dat
  @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
  @run endbattle2
  @closescript
  @end
@closescript
@end
@#cleartext
@do move 27 5
@do write
                                                   `%
@do move 27 6
@do write
                                                   `%
@do move 27 7
@do write
                                                   `%
@do move 27 8
@do write
                                                   `%
@do move 27 9
@do write
                                                   `%
@do `p40 + 1
@do move 12 9
@do write
`%`p40
@closescript
@#endbattle1
@do `s01 is NIL
@do move 3 17
@do write
`0Do you want to bet again? (Y/N) `%
@do readspecial `s01 YN
@if `s01 is Y then do
  @begin
  @do `p20 is 0
  @dataload colfite.idf &playernum `p20
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
  @if `p20 > `p40 then goto nogame2
  @clear screen
  @run pickmon
  @closescript
  @end
@if `s01 is N then do
  @begin
  @do map is 57
  @loadmap 57
  @drawmap
  @update
  @closescript
  @end
@#endbattle2
@do `s01 is NIL
@do move 42 17
@do write
`0Do you want to bet again? (Y/N) `%
@do readspecial `s01 YN
@if `s01 is Y then do
  @begin
  @do `p20 is 0
  @dataload colfite.idf &playernum `p20
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
  @if `p20 > `p40 then goto nogame2
  @clear screen
  @run pickmon
  @closescript
  @end
@if `s01 is N then do
  @begin
  @do map is 57
  @loadmap 57
  @drawmap
  @update
  @closescript
  @end
@#openvault
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
@clear screen
@do move 25 4
@do write
`r1`$   NorthLands Coliseum Vault   `r0
@do move 15 6
@do write
`2The vault has a total of `$`p46`2 gold in it.
@do move 15 7
@do write
`2You have `$&money `2gold.
@do move 30 8
@do write
`r0`5Ú/ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ\¿
@do move 30 9
@do write
`r0`5³                 ³
@do move 30 10
@do write
`r0`5³                 ³
@do move 30 11
@do write
`r0`5³                 ³
@do move 30 12
@do write
`r0`5³                 ³
@do move 30 13
@do write
`r0`5À\ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ/Ù
@do move 31 9
@do `v01 is 1
@choice
`$Deposit Gold
`$Withdraw Gold
`$Close the Vault
@if responce is 1 then do
        @begin
        @do move 20 15
        @do write
`$How much do you wish to deposit into the vault? :
        @do readnum 9
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @if `v40 > money then goto idiot
        @do `p46 + `v40
        @do delete coliseum.dat
        @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @do money - `v40
        @do goto openvault
        @end
@if responce is 2 then do
        @begin
        @do move 5 15
        @do write
`$Remeber if there is not much in the vault, not many players can gamble.`\     `$How much do you wish to withdraw into the vault? :
        @do readnum 8
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @if `v40 > `p46 then goto idiot
        @do `p46 - `v40
        @do delete coliseum.dat
        @writefile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @do money + `v40
        @do goto openvault
        @end
@if `p49 is 0 then goto office
@#idiot
@do write
`\`\`$Who do you think you are? You think you can do the imposible here?`\`\
@key
@do goto openvault
@#rulz
@if coliseum.dat exist false then do
        @begin
        @routine getvars
        @end
@if coliseum.dat exist true then do
        @begin
        @readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
        @end
@show
`r0`c   `r1 `%The Rules of The Coliseum `r0
   `0The rules are very simple. We pick two monsters to fight each other,
   and you bet on which one you think will win. If your monster wins,
   then you double your bet. If it loses, then you lose your bet.
   The House Minimum is `$$`p41`0, and the House Maximum is `$$`p42`0.
   Also, you are limited to `p40 fights per day.
   Like I said, it's pretty simple, eh?
`k
@run top
@closescript
@#nogame
@show
`r0`c   `r1 `%The Coliseum `r0
     `2A hugely muscled man greets you at the door.
     `0I'm sorry, but you have already made your `p40 bets today.
     Please come back tomorrow.
     `2He then ushers you outside.
`k
@drawmap
@update
@closescript
@#nogame2
@show
`r0`c   `r1 `%The Coliseum `r0
    `2You walk back to the man to place your bet. Just as you get there,
    the bouncer stops you.
    `0"I'm sorry, but you have already made your `p40 bets today," `2he says.
    `0"Please come back tomorrow."
    `2He then ushers you outside.
`k
@do map is 57
@loadmap 57
@drawmap
@update
@closescript
@#broke
@do `s05 is King`xSysOp
@readfile coliseum.dat
`p45
`p46
`p47
`p40
`p41
`p42
@if `p45 > 0 then do
        @begin
        @do `s05 is getname `p45
        @end
@show
`c`r0
`\`\   `0I'm sorry, but our account is empty, we are waiting for
  our boss, `s05, to come and fill it up.
  Please come back another day.
@if `p45 > 0 then do
        @begin
        @writefile mail\mail`p45.dat
  `0Business note:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  Your vault at the NorthLand Coliseum is almost empty.
`0  There is exactly `$`p46 `0gold left, please refill the
`0  vault so we can continue business here. 
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
        @end
@if `p45 is 0 then do
        @begin
        @do `p30 is 5
        @do `v40 is 10000
        @routine widthdraw in vaults.ref
        @readfile coliseum.dat
`p20
`p21
        @do `p21 + `v40
        @do delete coliseum.dat
        @writefile coliseum.dat
0
`p21
1
10
10
1000
        @end
@key bottom
@drawmap
@update
@closescript
@#nodough
@show
`\`\   `0I'm sorry, but you need at least `$`p41 `0to bet.
   Please come back when you have that much.
   `2He then ushers you outside.
   `k
@do map is 57
@loadmap 57
@drawmap
@update
@closescript
@#NOBET
@show
`\`\   `0You decide to not bet anything.
   Please come back when you feel like gambling.
   `k
@do map is 57
@loadmap 57
@drawmap
@update
@closescript
@#nothing
;ref file for GARGOYLE'S LANDING IGM by NiGHT fLYER
@#Library1
@do moveback
@do `p20 random 8 1
@if `p20 is 1 then saybar
`%Anonymous: `0101 way to wok your dog
@if `p20 is 2 then saybar
`%Lord Mir: `0Objects are closer than they appear!
@if `p20 is 3 then saybar
`%Grimtooth: `0Tricks and Traps, an amatures handbook.
@if `p20 is 4 then saybar
`#Violet: `0All is fair in love and war
@if `p20 is 5 then saybar
`%Barak: `0FRAMED!
@if `p20 is 6 then saybar
`%Seth Able: `0I write the songs
@if `p20 is 7 then saybar
`%NiGHT fLYER: `0Gargoyles ROCK!!!
@if `p20 is 8 then saybar
`%Cooking for Canibals in 10 easy steps
@#library2
@do moveback
 @do saybar
  now THIS is a Chair!
@#darkhall
@do moveback
@dataload gargfind.idf &playernum `p20
@if `p20 is 1 then do
        @begin
        @do saybar
`7you find nothing more in this damp cellar
        @closescript
        @end
; @if `i57 is 0 then do
; @begin
 @do saybar
  you find a `+57
 @do `i57 + 1
@datasave gargfind.idf &playernum 1
; @do `i75 = 1
 @closescript
; @end
@if `i75 is 1 then do
 @begin
 @do saybar
  you find nothing more in this damp cellar
 @end
@#warm
@do moveback
 @do saybar
  it's nice and toasty by the fire
@#bow
@do moveback
 @do saybar
`6Bow: `%must have been used a long time ago defending this castle...
@#spear
@do moveback
 @do saybar
`6Spear: `%it's worthless now after years of weather
@#noise1
@do moveback
 @do saybar
  you think you hear something upstairs!
@#noise2
@do moveback
 @do saybar
  What was THAT? There is Definitely something up there!
@#food
:free heal
@offmap
@do moveback
@show
`r0`c  `r1  Well Prepared Meal  `r0
  `2You dive fork first into the food.
  `%YOU ARE COMPLETEY HEALED.
`k
@do `p02 is `p03
@drawmap
@update
@#showgargoyle
@pauseoff
@show
[0;37;40m[6C     [7C[1;33m.[10C[37mú[11C[33m.[9C[0mú
[6C    [14C[1;30mÞ[0m°[1;30mÜ   Ü±Ý    [37mú[7Cú[9C[0mú[7C[1m.[0m
[7C   [1;32m    [30mÞÜÜÜÜÜÜÜÜ²þ[0m±[1;30m²²V²Û±þ²ÜÜÜÜÜÜÜÜÜÝ[16C[0m.
[7C   [1;32m     [30mÜ²²±±±±ß² [0;31mO [1;30m²±² [0;31mO [1;30m²ß[8C[0;31m  [37m.
[7C   [1;32m  [30mÜ±±²²²²[0m°[1;30m²²²³²ß[0mÝ[1;30mßßß[0mÞ[1;30mß²³[0m
[6C   [1;30mÜ±±²²²²[0m°[1;30m²²²[0m°[1;30m²²²ß²±²³²±²ß     [37mú    [5C[0mYou Stand Face-to-face
[7C[1;30mÜ±²²²²[0m°[1;30m²²²[0m°[1;30m²²²[0m°[1;30mß  °Þß°ßÝ[17C[0m.  with the massive 
[32m     [1;30mÜ±²²²²[0m°[1;30m²²[0m°[1;30m²²²[0m°[1;30m²ß °°°±±±Ý    [37m.[9C[0;31m  [1;37m.[3C[0m   [CStone Beast    
[32m   [1;30mÜ±²²²[0m°[1;30m²²²[0m°[1;30m²²[0m°[1;30m²ßß°°°±º±±²Ý[9C[0m                
[32m  [1;30mÜ±²²[0m°[1;30m²²[0m°[1;30m²²²[0m°[1;30m²ß±±±±±º±±±²Ý[10C[0m [17C[1;33m. [0m
[32m  [1;30m±²²²²[0m°[1;30m²²[0m°[1;30m²ßß±±±±±º±±±±²Ý[11C[0m [1;30m     [37mú[0m
[32m  [1;30m²²²²²²[0m°[1;30m²²Û±±±±±º±±±±±²Ý[10C[0m    
[32m  [1;30m²²²²²²²[0m°[1;30m²²ÜÜÜ³±±±±±±²ÝÜ[9C[0m      [5C[1;33m.[0m
[32m  [1;30m²²²²²²²²[0m°[1;30m²²²²²Ü°°°±²Ý[0m°±Ý[7C       
[32m  [1;30m°°°°°°°°°°°°ß²ß²²[0m±[1;30mÛ[0m± °±Ü[5C          
[32m  [1;30mßßßßßßßßßßßßß[47mÜÜÜÜÜÜÜÜÜÜ[0mß       [1;30mßßßßßßßßßßßßß[47mÜÜÜÜÜÜÜÜÜÜ[0mß        [1;30mßßßßßßßßßßßßß[47mÜ[40m
[0;32m  [1;30m°°°°°°°°°°°°°Þ[0m°°°°°°°°Ý        [1;30m°°°°°°°°°°°°°Þ[0m°°°°°°°°Ý         [1;30m°°°°°°°°°°°°°Þ
[0;32m  [1;30m°°°°°°°°°°°°°Þ[0m°±±±±±°°Ý        [1;30m°°°°°°°°°°°°°Þ[0m°±±±±±°°Ý         [1;30m°°°°°°°°°°°°°Þ
[0;32m  [1;30m°°°°°°°°°°°°°Þ[0m±±±±±±°°Ý        [1;30m°°°°°°°°°°°°°Þ[0m±±±±±±°°Ý         [1;30m°°°°°°°°°°°°°Þ
[0m                             
`k
@pauseon
@#gargoyle
@do moveback
@do `v01 is 1
@busy
@label gargoylestart
@show
`r0`c  `r1 `%The Keeper of the Castle `r0
  `7You've heard of these mythical creatures, but you didnt think
  that they REALLY existed!!!
   Now you are on a rooftop with this Graet stone beast perched on
   a ledge in from of you
  `%"Greetings, `n.`% I heard you down below," `7his booming voice
  echoes through your head.
@do write
`x`x
@choice
You have wings, can you travel?
What is this place?
Make a wish!
Look at him
>`i57 0 What is the deal with this stone?
Leave
@if responce is 4 then do
  @begin
  @routine showgargoyle
  @do goto gargoylestart
  @end
@if responce is 5 then do
  @begin
  @show
`\`\  `$"Why was this just laying around in you basement?" `2you
  ask him.
`k  `0"Its just a trinket that the master of this household left behind"
`k
  @do goto gargoylestart
  @end
@if response is 6 then do
 @begin
 @drawmap
 @update
 @closescript
 @end
@if responce is 2 then do
  @begin
  @show
`r0`c  `r1 `%This is my domain now. `r0
  `%"This was once the domain of my master...a powerful mage who has bound
  me to this place to protect it until his return."
`k  `$"Well if you believe him to be gone forever why dont you leave?"
`7you ask.
 `%"Because of his great power I will always be drawn back to this place...
 Besides...it's home
`k
  @do goto gargoylestart
  @end
@if responce is 3 then do
  @begin
  @show
`r0`c  `r1 `%????? `r0
  `%"What do I look like, a Djinn?"
`k  `$"Sorry, wasnt thinking."`7you reply.
`k
  @do goto gargoylestart
  @end
 
  @show
`r0`c  `r1 `%Ready for a trip! `r0
  `$"I wanna leave!  This place is not for me." `7you explain.
  `%"Well you are not a prisoner here,  Where would you like
  to go?" `7He asks  - while looking out over the land beneath.
@do write
`x`x
@choice
Stonebrook
Stonepass Lodge
Soshen Village
"Aww...forget it, You are nothing more than a stupid rock"
"actually, I'll stay here a while longer"
@if response is 5 then do
 @begin
 @do goto gargoyle 
 @end
@show
`\`\  `%"Lets GO!!" `7he says suddenly. 
  `$"Whoa wait...." `7you demand.
`k  `%"I dont have all day!!!" `7he responds.
  `7Before you can reply, he grabs
   you by the shoulders and carries you away
`k
 @if response is 1 then do
 @begin
 @do map is 1359
 @loadmap 1359
 @do x is 50
 @do y is 6
 @end
 @if response is 2 then do
 @begin
 @do map is 880
 @loadmap 880
 @do x is 38
 @do y is 12
 @end
 @if response is 3 then do
 @begin
 @do map is 536
 @loadmap 536
 @do x is 36
 @do y is 7
 @end
 
 @if response is 4 then do
 @begin     
 @do map is 132
 @loadmap 132
 @do x is 5
 @do y is 10
 @end
@drawmap
@update
;ALL MONSTERS ARE BELOW HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!
@#monster1
@fight
;name
Great White Shark
;string said when you see him
Duh.Duh...Duh.Duh...
;power move kill string
`$"Shark steaks for dinner tonight!" `2 you laugh.
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
Rips at you with it' teeth|160
pulls you under|84
gets a hold with his teeth|94
NONE|NONE
NONE|NONE
;defense
45
;gold reward
176
;experience
120
;hit points
175
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster2
@fight
;name
Giant squid
;string said when you see him
A large black tentacle emerges from the water.
;power move kill string
"I wonder what squid tastes like"
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
chokes you with it's tentacle|89
gets a good gash in your leg|98
squeezes your head|120
sprays black "ink" into your eyes|85
NONE|NONE
;defense
37
;gold reward
187
;experience
165
;hit points
260
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster3
@fight
;name
Sea Worm
;string said when you see him
The water in front of you begins to move
;power move kill string
`$"Go back below the waves," `2 you command.
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
draws blood with its teeth|83
wraps around & squeezes you legs|114
gets ahold with his sucker|127
NONE|NONE
NONE|NONE
;defense
42
;gold reward
0
;experience
189
;hit points
102
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster4
@fight
;name
Sea Serpent
;string said when you see him
A large serpentine head appears from the waves.
;power move kill string
One less serpent to deal with.
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
chomps down on your arm|132
trys to drown you|95
gets you in a strangle hold|126
Spews a water spout at you|87
NONE|NONE
;defense
19
;gold reward
173
;experience
197
;hit points
183
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster5
@fight
;name
Man o' War
;string said when you see him
Foolishly you approach a blubbery organism
;power move kill string
`$"I think it's really dead this time," `2you hope.
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
touches you with a blubbery tentacle|130
lashes out with smile|95
rubs against your leg with paralysing poison|140
rolls into you|92
NONE|NONE
;defense
35
;gold reward
103
;experience
177
;hit points
180
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster6
@fight
;name
Giant Crab
;string said when you see him
You see a rather large looking crab, but it also sees you!
;power move kill string
`$"I had a bad case of crabs, but killed em."
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
snaps at your leg|115
cracks into your leg|118
grabs your hand with a pincher|125
tramples into you|112
NONE|NONE
;defense
42
;gold reward
145
;experience
172
;hit points
150
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster7
@fight
;name
Pirate
;string said when you see him
Ahoy there!
;power move kill string
"Yo ho ho yourself"
;sex - 1 is male, 2 is female, 3 is it
1
;weapon and strength for the weapon, up to 5
slices with his hook|110
attempts to chop you in two|115
smacks you with his parrot|113
NONE|NONE
NONE|NONE
;defense
43
;gold reward
340
;experience
126
;hit points
140
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
gargoyle.REF|PIRATE
;if runs: ref file|name or NONE
NONE|NONE
              
@#FIGHT
@do `p20 random 12 1
@if `p20 is 1 then do
 @begin
 @run GENRAN in GENRAN.REF
 @end
@busy
@do `p20 random 7 1
@do goto monster`p20
@#PIRATE
@do money / 4
@do money * 3
@SHOW
`r0`c  `r1`% Defeat by the Pirate `r0
  `2The Pirate raises his cutlass to deliver the blow to your skull...
`k  `0"Don't worry, I'm not all about killing, I'm about money.  So I'm sure
  you'll understand if I relieve you of a little." `2He proceeds to raid
  your gold bag.  But at least you have your life.
`4  You lose `b1/4th`4 of your treasure.
`k
@do `p02 is 5
@DRAWMAP
@UPDATE
@CLOSESCRIPT
@#done
;   LORD2: Complete New World v137.0
;             x-x-2001
;
; NOTE: New website, no longer at lord2.darktech.org
;
; Our CNW LoRD2 website:
;    http://www.greenmachinebbs.com/lord2/
;
; LoRD2 Mailing list (join this to find new versions of CNW)
;    http://www.greenmachinebbs.com/maillist.htm
;
;  READ ./DOCS/CNW.TXT for more details
;
;
@#welcome
@busy
@do moveback
@offmap
@DO MOVE 1 1
@clear screen
@show scroll
`r0         `%`r2°±²`r0   `2Complete New World v137.0   `%`r2²±°`r0
  `2 This is a LoRD2: New World, with every known GOOD IGM installed.
  with absolutely no known conficts. Also, a few IGMs have been merged,
  moved around, modified and enhanced, only for the better.
   Also included is all of my own powerful features, such as:
               `!-`@Amazing NPC interaction
               `!-`@TAXES
               `!-`@Vaults for banks of the realm
               `!-`@Have KIDS!
               `!-`@Bed of Roses
               `!-`@The Locker Room Safe House
               `!-`@Time is a concept now, years, ages, bdays, etc.
               `!-`@Vehichles and NPCs can be accessed from items "V"iew
               `!-`@Pouch of Documents
               `!-`@Blue Water Falls (incomplete)
   `2For a complete list of new changes in CNW can be found in the HELP
  section, press `2"`7?`2" `2and check "`7Whats New`2"
        
 `$Minor DDO-F/X support. Included is the LORD2.FNT v2, you should ask
  your SysOp to make this file available for you to d/l.  DDO-F/X requires
  that you are using the FREEWARE LiTerm.
  You have LORD2.FNT version #õ
  (the "õ" should show a version number if you have font version 2+)
  (If you see an odd looking "j", you do not have the proper LORD2.FNT or
  no font)
 `$Later versions will include:
   `4- `2More great IGMs! Please contact CNW for requests.
   `4- `2More NPC actions. Will add trading, and giving,
       `2more gossiping, like tips and tricks.
       `2Please send me comments and ideas what to add to which NPC
       `2on this.
   `4- `2iBBS support! yes, Inter-BBS support! It is easy to make
        `2an add-on program to handle this. All the info is availble
        `2to do such a thing. I however am not an expert programmer,
        `2so I will not do it myself. But, if you are interested in
        `2creating an iBBS external program, contact me ASAP, I'll
        `2share my ideas on how to get this thing going.
   `4- `2I want to make fonts for windows and DOS for terminals to
       `2play LoRD2 with, unfortunately I'm terrible at making them.
       `2So, I need some help to do this. please contact CNW if you
       `2want to help.
       `2NOTE: A DDO-F/X font has already been created.
                   `$All fonts can be found at
       `$http://www.greenmachinebbs.com/lord2/cnwfiles/fonts/
        
   `4- `2NEW QUESTS!
   `4- `2More IGMs made by me! including:
              `@A real PAWN SHOP! where you can buy the stuff they bought
                  from other players. <-done it, but lost it :( gotta remake
              `@More NPC CHARACTERS
 `2I would like to thank all those IGM makers for making such
  good IGMs for such a good game. I would of course also like to
  thank Seth Able for another job well done.
  PS, I heard he's working on a CGI web based game, possibly similar
  to LoRD2. :) 
`%Join the LORD2 Mailing list!            lord2@egroups.com
         lord2-subscribe@egroups.com
  EGroups site: http://www.egroups.com/group/lord2
  CNW web: http://www.greenmachinebbs.com/lord2/
  CNW telnet://greenmachinebbs.com
@drawmap
@update
@closescript
@end
@#BBSLIST
;
@do moveback
@busy
@show
`r0`c  `r1  OFFICIAL LoRD2 TELNET BBS LIST `r0
@if docs/bbslist.txt exist false then do
 @begin
 @DO DELETE docs/bbslist.dat
 @writefile docs/bbslist.dat
15
this file is for number of lines in bbslist.txt for proper display.
 @writefile docs/bbslist.txt
 `2 Please add your BBS to the EGroups LoRD2 Mailing List DATABASE section
 `2 to get listed in next release of CNW.`$http://www.egroups.com/group/lord2
               `#* `2= `5Alternate CNW server gateway`2.
`8ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
`8³  `%CNW Main Server `2: `0telnet://greenmachinebbs.com                        `8³
`8³`#* `%Time Warp of the Future `2: `0telnet://time.darktech.org                  `8³
`8³`#* `%BoBo's BBS `2: `0telnet://bobobbs.net                                     `8³
`8³  `%TechNet BBS `2: `0telnet://techbbs.dhs.org                                `8³
`8³  `%The N.U.B. `2: `0telnet://nub.dhs.org                                     `8³
`8³  `%Chowda Net `2: `0telnet://chowdanet.com                                   `8³
`8³  `%The Wastelands `2: `0telnet://wasteland.darktech.org                      `8³
`8³  `%Cold Fusion `2: `0telnet://fusion.darktech.org                            `8³
`8³  `%The Apparatus `2: `0telnet://theapparatus.net                             `8³
`8³  `%Top's Diamond Mine Online `2: `0telnet://bbs.tdmonline.com                `8³
`8³  `%Mother Board BBS `2: `0telnet://mbbbs.dtdns.net                           `8³
 @end
@if docs/bbslist.txt exist true then do
        @begin
        @displayfile docs/bbslist.txt
        @do write
`8ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ
        @end
@show
@DO WRITE
           `$Do you want to add another LoRD2 BBS? `8[`%y`7/`%N`8]`x
@DO READSPECIAL `s01 NY
@if `s01 is N then do
        @begin
        @drawmap
        @update
        @closescript
        @end
@if `s01 is Y then do
        @begin
        @do write
`%telnet://
        @DO READSTRING 20 NIL `s01
        @DO `p24 is length `s01
        @IF `p24 less 3 then do
                @begin
                @do write
`\  `%Thats too short, try again.`\`k
                @drawmap
                @update
                @closescript
                @end
        @DO `s02 is `0telnet://
        @DO `s02 add `s01
        @DO STRIP `s02
        @DO `p20 is length `s02
        @DO `p21 is 74
        @DO `p21 - `p20
        @do write
`\
        @DO READSTRING `p21 Name`xof`xSystem `s03 <--Read string, NIL is default. (nothing)
        @do stripbad `s03
        @DO `p24 is length `s03
        @IF `p24 less 3 then do
                @begin
                @do write
`\  `%Thats too short, try again.`\`k
                @drawmap
                @update
                @closescript
                @end
        @do `s01 is `%
        @do `s01 add `s03
        @DO `s03 add `x`2:`x
        @do `s03 add `s02
        @do write
`\`x`x`%`s03`\           `$Add this to the list? `8[`%Y`7/`%n`8]`x
        @DO READSPECIAL `s01 YN
        @if `s01 is N then do
                @begin
                @drawmap
                @update
                @closescript
                @end
        @if `s01 is Y then do
                @begin
                @do `s01 is `8³`%`x`x
                @do `s01 add `s03
                @do pad `s01 74
                @readfile docs/bbslist.dat
`p20
                @do `p20 + 1
                @DO DELETE docs/bbslist.dat
                @writefile docs/bbslist.dat
`p20
this file is for number of lines in bbslist.txt for proper display.
                @do `p20 + 1
                @if `p20 > 20 then do
                        @begin
                        @DO DELETE docs/bbslist.dat
                        @writefile docs/bbslist.dat
1
this file is for number of lines in bbslist.txt for proper display.
                        @writefile docs/bbslist.txt
`k
                        @end
                @writefile docs/bbslist.txt
`s01`x`8³
                @drawmap
                @update
                @closescript
                @end
        @end
@#newdata
;gender
@If &sex is 0 then `s09 is `#F
@If &sex is 1 then `s09 is `1M
;name
@do `s02 is `N
@do pad `s02 26
;age
@do `s03 is `p39
@do pad `s03 2
;lays
@do `s05 is `p34
@do pad `s05 5
;kills
@do `s06 is `p35
@do pad `s06 5
;charm
@do `s07 is `p08
@do pad `s07 5
;last flirted with?
@if `t72 is 0 then do
        @begin
        @do `p70 is `t71
        @routine getname in npcname.ref
        @if `t71 is 0 then `s01 is `8Nobody
        @do `s08 is `s01
        @end
@if `t72 is 1 then do
        @begin
        @do `s08 is getname `t71
        @end
@if `t72 is 2 then do
        @begin
        @do `s08 is a`xsheep
        @end
@if `t72 > 2 then do
        @begin
        @do write
`\`\ `4There is seems to be a bug someplace!`\`k
        @end
@do pad `s08 14
;hometown
@routine getplace in myhome.ref
@do pad `s01 20
@do delete info&playernum.dat  ; <-- player data for lists
@do `s10 is `s09`%`s02`$`s03`x`%`s01`5`s05`4`s06
@do `s01 is `!`s07`$`s08
@writefile info&playernum.dat
`s10
`s01
@drawmap
@update
@closescript
@#list1
;this is going to be the list of players with this info:
;    AGE/GENDER/HOMETOWN/LAST FLIRT
@do `p20 is 0
@do write
`r0`c  `0Listing players...
@do delete cnw`*.dat
@writefile cnw`*.dat
`r0`r1                             `%  LORD II RANKINGS                            `r0
                
`0G  Name                   Age - HomeTown  - - - Lays-Kills-Charm-Likes 
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
@
@label makelist2
@do `p20 + 1
@IF info`p20.dat EXISTS TRUE then do
        @begin
        @readfile info`p20.dat
`s01
`s02
        @writefile cnw`*.dat
`s01`s02
        @end
@if `p20 < &totalaccounts then goto makelist2
@convert_file_to_ansi cnw`*.dat cnwscore.ans
@convert_file_to_ascii cnw`*.dat cnwscore.txt
@clear screen
@DO MOVE 1 1
@displayfile cnw`*.dat
@key bottom
@drawmap
@update
@closescript
@#SIGN1
@do `p20 is 1
@do goto SIGN
@#SIGN2
@do `p20 is 2
@do goto SIGN
@#SIGN3
@do `p20 is 3
@do goto SIGN
@#SIGN4
@do `p20 is 4
@do goto SIGN
@#SIGN5
@do `p20 is 5
@do goto SIGN
@#SIGN6
@do `p20 is 6
@do goto SIGN
@#SIGN7
@do `p20 is 7
@do goto SIGN
@#SIGN8
@do `p20 is 8
@do goto SIGN
@#SIGN9
@do `p20 is 9
@do goto SIGN
@#SIGN10
@do `p20 is 10
@do goto SIGN
@#SIGN11
@do `p20 is 11
@do goto SIGN
@#SIGN12
@do `p20 is 12
@do goto SIGN
@#SIGN13
@do `p20 is 13
@do goto SIGN
@#SIGN14
@do `p20 is 14
@do goto SIGN
@#SIGN15
@do `p20 is 15
@do goto SIGN
@#SIGN
; player rentable signs
@do moveback
@do `s01 is `%This`xsign`xis`xblank.
@if cnwsign.`p20 exists true then do
        @begin
        @readfile cnwsign.`p20
`s01
`p21
`p22
        @do `p25 is &time
        @do `p25 - `p21
        @if `p25 > `p22 then do
                @begin
                @do delete cnwsign.`p20
                @do `s01 is `%This`xsign`xis`xblank.
                @end
        @end
@do saybar
`s01
@#RENTSIGN
@do moveback
@do move 1 1
@clear screen
@show
`r0                        `r1 `$- `%Commercial Sign Services `$- `r0
   `2We rent signs for `$50`2 gold per day, with a min of 10 days. `7($500)
                                `6Ú/\/\/\/\/\/\/\/\¿
                                `6³                ³
                                `6³                ³
                                `6³                ³
                                `6³                ³
                                `6À/\/\/\/\/\/\/\/\Ù
@do `v01 is 1
@do move 34 7
@choice
`$Rent a Sign
`%Why so much?
`$My Account
`%Leave
@if responce is 1 then goto RENTIT
@if responce is 2 then goto WHYSIGN
@if responce is 3 then goto SIGNACCT
@if responce is 4 then goto NOMORE
@#RENTIT
@clear screen
@do move 1 1
@show
`r0                        `r1 `$- `%Commercial Sign Services `$- `r0
   `2Which area are you interested in having your sign?
                                `6Ú/\/\/\/\/\/\/\/\¿
                                `6³                ³
                                `6³                ³
                                `6³                ³
                                `6³                ³
                                `6À/\/\/\/\/\/\/\/\Ù
@do `v01 is 1
@do move 34 7
@choice
`$Just outside
`%FlagCity area
`$Sosen area
`%Forget it
@if responce is 1 then do
        @begin
        @do `p22 is 1
        @do `p23 is 5
        @end
@if responce is 2 then do
        @begin
        @do `p22 is 6
        @do `p23 is 10
        @end
@if responce is 3 then do
        @begin
        @do `p22 is 11
        @do `p23 is 15
        @end
@if responce is 4 then goto NOMORE
@label newsign
@if cnwsign.`p22 exists true then do
        @begin
        @if `p22 is `p23 then do
                @begin
                @do move 3 13
                @do write
Sorry, there currently is no more signs availabe in that area.
                @key bottom
                @do goto RENTIT
                @end
        @do `p22 + 1
        @do goto newsign
        @end
@do move 3 13
@show
What do you want written on your sign?
`%:
@do readstring 70 `N's`xsign `s01
@label PAYSIGN
@clear screen
@do move 1 1
@show
`r0                        `r1 `$- `%Commercial Sign Services `$- `r0
   `2Which area are you interested in having your sign?
                                `6Ú/\/\/\/\/\/\/\/\¿
                                `6³                ³
                                `6³                ³
                                `6³                ³
                                `6³                ³
                                `6À/\/\/\/\/\/\/\/\Ù
@do `v01 is 1
@do move 34 7
@choice
>&money 499 `410 Days `8($500)
>&money 999 `420 Days `8($1000)
>&money 1449 `430 Days `8($1450)
Forget it
@if responce is 4 then goto NOMORE
@if responce is 1 then `p24 is 10
@if responce is 2 then `p24 is 20
@if responce is 3 then `p24 is 30
@do `p25 is 500
@do `p25 * `p24
@if `p24 is 3 then `p25 - 50
@do `p30 is 2
@do `v40 is `p25
@routine deposit in vaults.ref
@do money - `p25
@writefile cnwsign.`p22
`s01
&time
`p24
@do move 3 13
@do write
  `2Thanks. We've just sent someone out to fix up your new sign.
@key bottom
@do goto NOMORE
@#WHYSIGN
@do move 1 1
@clear screen
@show
`r0                        `r1 `$- `%Commercial Sign Services `$- `r0
   `2After you have purchased a sign, we/you will not be able to modify
  it until the rent expires. We do not offer ANY sort of warning when
  it will expire.
    Why you ask is it so expensive? well simple enough, it costs us
  cash to hire someone cut down some trees, cut them into posts and
  boards. Then we need to pay ourselves for engraving each sign to
  the customers liking.
    We also take good care of the sign. Do you know how many little
  warriors and little goblins try to knock these signs down. Who's
  gotta replace them, we do!
@key bottom
@do goto RENTSIGN
@#SIGNACCT
@do goto RENTSIGN
@#BREAKIN
@do moveback
@do saybar
`%This door is LOCKED.
@#NOMORE
@drawmap
@update
@closescript
;gshops.ref ... mostly stuff for Greentree
@#bartoy
;barak's tiolet, need to say something I guess..
@do saybar
Not the cleanest thing in town.
@do moveback
@#house6
;nobody home
@do moveback
@do saybar
Hmm, no answer.
@#BARCHEST
@do moveback
@if bitcheck `t01 5 1 then do
  @begin
  @do saybar
The chest is empty.
  @closescript
  @end
@do `p20 random 4 1
@if `p20 is 1 then do
  @begin
  @do `i74 is 1
  @show
`r0`c  `r1  `%You find something in the chest!  `r0
  `2You find `0Barak's Diary`2.  `%AWESOME!`2
`k
  @bitset `t01 5 1
  @drawmap
  @update
  @closescript
  @end
@do goto ma
@#ma
@do moveback
@do `s01 is ass
@if `v06 is 1 then `s01 is self
@do x is 52
@do y is 18
@do map is 69
@loadmap &map
@show
`r0`c  `r1  `%Barak's Mother  `r0
`2  An old woman is rocking in her chair.. until she sees you.
`k  `0"How did you get in here?!?!  Do you know who my son is?!?  He will
  hunt you down and rip you apart!!"
`k  `2She promptly kicks your sorry `s01 out.
`k
@drawmap
@update
@#picklock
@do moveback
@datanewday barmom.idf
@dataload barmom.idf &playernum `p20
@if `p20 is 1 then do
  @begin
  @do saybar
You better not try again today.. she's watching you through a window.
  @closescript
  @end
@do write
`r1
@clearblock 21 21
@do move 3 21
@do write
`r0`2The door is locked.  Attempt to pick it? [`0Y`2/`0N`2] :`x
@do readspecial `s01 YN
@if `s01 is Y then do
 @begin
@if `p18 < 15 then do
  @begin
  @do saybar
`2You lack the skills.  You need more quest points.
  @closescript
  @end
  ;he did it
  @do x is 40
  @do y is 13
  @do map is 75
  @loadmap &map
  @drawmap
  @update
  @do saybar
`2You pick the lock successfully!
  @datasave barmom.idf &playernum 1
  @closescript
@end
@do saybar
Maybe later.
@#MIN
;minister at church, place to cure vd
@do `p70 is 76
@do moveback
@routine talk in talk.ref
@if `p20 is 0 then do
@begin
@do `v01 is 1
@show
`r0`c  `r1 `%Saying your prayers `r0
  `2You kneel in front of the pulpit.   A balding priest looks at you
  intently.
@do write
`x`x
@choice
I wish to make a donation
I wish to donate my negative opinion of organized religion
Leave
@if responce is 1 then do
  @begin
  @show
`\`\  `0"How much, my son?" `2the priests asks, eyes lighting up at the
  prospect.
  @do write
`\`x`x
  @do readnum 10 0
  @if `v40 is 0 then do
   @begin
   @show
`\`\  `$"I'll donate let's see... how about nothing?"
`k
  @do goto min
  @end
  @if `v40 < 0 then do
   @begin
   @show
`\`\  `2Donate a negative amount?  Oh, you mean steal from the plate?
`k  `4Too bad there is nothing in it.
`k
  @do goto min
  @end
  @if `v40 > money then do
   @begin
   @show
`\`\  `2Ok, now try an amount that you have with you.
`k
  @do goto min
  @end
  @dataload npc/npcgold.idf `p70 `p29
  @do `p29 + `v40
  @datasave npc/npcgold.idf `p70 `p29
  @do money - `v40
  @do `p20 is `p09
  @do `p20 * 100
  @if `v40 < `p20 then do
    @begin
    @show
`\`\  `2You close your eyes, hoping for a miracle...
`k  `4Nothing happens.. course you didn't donate much either.
`\`k
    @do goto min
    @end
    @if `p12 is 0 then do
      @begin
    @show
`\`\  `2You close your eyes, hoping for a miracle...
`k  `4Nothing happens.. and you donated plenty.  I guess you just don't need
  divine help right now, maybe later. 
`\`k
  @do goto min
  @end
   @do `p12 is 0
   ;cure vd
    @show
`\`\  `2You close your eyes, hoping for a miracle...
`k  `%YOU FEEL CLEAN AGAIN.  Your body is not sick anymore.
`\`k
  @do goto min
  @end
      @end
@if responce is 2 then do
  @begin
  @show
`\`\  `$"What you do is ridiculous.  You tell us we'll go to a better place
  after we die if we give you money.  Who bought this church, God?  No, we
  did.
  Religion is for people that need something to believe in - so they don't go
  mad." `2you finish softly.
`k  `0"Exactly.. so are you gonna donate or what?" `2laughs the priest.
`k
  @do goto min
  @end
@drawmap
@update
@end
@#WHORE
;(currently unused)
@offmap
@do moveback
@do `v01 is 1
@label whorestart
@show
`r0`c  `r1 `%The Whore House `r0
`2  You run your hands together, it's time you finally had some fun.  And
  hey, while you're in Greentree, why not pay a visit to the infamous
  Greentree brothel.
@do write
`\`x`x
@choice
Visit Kelley.
Leave
@if responce is 1 then do
  @begin
  @show
`\`\  `2You rub your hands together lewdly.  `$"I want a little 'visit' with
  Kelley if you know what I mean..." `2you drawl.
  `0"Kelley is busy.. How about Mary?"
  `2You decide to wait. (this area will be added to later..)
`\`k
  @end
@drawmap
@update
@#SCRIBE
;a place where they can add to the daily happenings
@offmap
@do moveback
@do `v01 is 1
@label scribestart
@do `p22 is `p09
@do `p22 * 10
@show
`r0`c  `r1 `%The Scribe Hut `r0
`2  Wow!  This is where the daily happenings are made!  More than just a
  paper, it brings the community together.
  `2A little man with glasses is working.
@do write
`x`x
@choice
`%Place an ad for `$$`p22`%.
Leave
@
@if response is 1 then do
 @begin
 @if money < `p22 then do
  @begin
  @show
`\`\  `2You are a little short.  Bummer.`\`\`k
  @do goto scribestart
  @end
  @do `p30 is 2
  @do `v40 is `p22
  @routine deposit in vaults.ref
  @do money - `p22
  @writefile lognow.txt
  `2A special announcement from `0`n`2:`\`%
  @show
`\`\  `0"Ok sir!  Enter your message.  A blank line will quit."
@label keepwriting
@do write
`\`x`x
  @do readstring 75 NIL `s01 
  @do `p20 is length `s01
  @if `p20 < 2 then do
   @begin
@writefile lognow.txt
                                 `2-`0=`2-`%=`2-`0=`2-
   @show
`\  `0"Alright!  We have added you to today's edition!"
`2  You trot out feeling important.
`\`k
@drawmap
@update
@closescript
   @end
  @do stripbad `s01
  @writefile lognow.txt
  `s01
  @
  @do goto keepwriting
 @end
@drawmap
@update
@#raise
;can they raise their level?
@do `p20 is `p09
@do `p20 * 100
@do `p20 * `p09
@if `p20 > `p01 then do
 @begin
 @do `p21 is `p20
 @do `p21 - `p01
 @show
  `2Next level raise at `%`p20`2.
  `0"You need about `%`p21`0 more experience before your next level raise!"
  `2Your face falls - what a bummer!
`k
@run barak
@closescript
@end
 @if `t04 > 0 then do
 @begin
 @show
  `0"You already failed once today, come back tomorrow, loser!"
  `2Your face falls - what a bummer!
`k
@run barak
@closescript
@end
 @show
  `0"You have been sitting at level `p09 long enough."
@if `p09 IS 1 then do
 @begin
 @show
  `$"Cool!  So where is the master I fight?" `2you beam with pride.
`k  `0"Master?  Haw!  Now that *I* run this place we do it my way!" `2Barak
  laughs as he crumbles a strange black root into a mortar...
  `2You anxiously await your fate...
@end
@show
`k
`c  `r1`4 DRINKING YOUR OWN INIQUITY `r0
`2  Barak hands you a cup and asks you to drink.
  `2You nearly retch as you feel the vessel's oily contents slide down
  your throat.
`k  `2Barak leads you to a small room with a cot.  `2"I'll be back in a few
  hours,  then we'll see if you're still this cocky!" 
`2  You lay down and begin dreaming immediately.
`k
@do `s01 is gshops
@run startfight in training.ref
@closescript
@#BARAK
@offmap
@do `p21 is `v05
@do `p21 / 24
@if `p11 < `p21 then do
        @begin
        @do moveback
        @do saybar
`0There is not enough time for today, come back tommorow.
        @key bottom
        @closescript
        @end
@if `t01 is 255 then do
        @begin
        @do goto turg
        @end
@do moveback
@do `v01 is 1
@label barstart
@show
`r0`c  `%Barak's Training Center
`2  Hundreds of warriors are randomly jumping and shrieking in their
  efforts to better themselves.
  Although the building itself is old and scarred, the sign is new.
@do write
`x`x
@choice
Ask for a level raise.
Talk to Master Barak.
Leave
@if responce is 1 then do
 @begin
 @run raise
 @do goto barstart
 @end
@if responce is 2 then do
 @begin
 @if bitcheck `t01 4 1 then do
  @begin
  @show
`r0`c  `%Talking to Master Barak
  `0"Make it fast kid, I'm busy!"
  `$"Um, Barak?  Where are the other trainers, as is the tradition?" `2you
  innocently ask.
  
`k  `0"Other trainers?!  Now that *I'M* the new MASTER TRAINER, I fired the
  rest!  I am the master for EVERY LEVEL NOW!" `2Barak cackles evilly.
  `$"Wow, nice.  You must have worked long and hard to achieve this position,
  Master Barak."
`k  `0"Of course I did!  That last Master, this geezer known as Turgon turned
  out to be a thief - you never know about some people, eh?  Haw!" `2 Barak
  laughs crudely.
`k
  @if bitcheck `t01 2 1 then do
        @begin
        @bitset `t01 6 1
        @end
 @do goto barstart
 @end
  @show
`r0`c  `%Talking to Master Barak
  `0"Sorry kid, I'm a little busy TEACHING, because after all, I am sort of
  the MASTER of this whole place - you can grasp that concept, can't you?"
  `2Wow, what an ass.  Maybe he'll talk later.
`k
 @do goto barstart
 @end
@drawmap
@update
@#turgraise
;can they raise their level?
@do `p20 is `p09
@do `p20 * 100
@do `p20 * `p09
@if `p20 > `p01 then do
 @begin
 @do `p21 is `p20
 @do `p21 - `p01
 @show
  `2Next level raise at `%`p20`2.
  `0"You need about `%`p21`0 more experience before your next level raise!"
  `2Your face falls - what a bummer!
`k
@run turgstart
@closescript
@end
 @if `t04 > 0 then do
 @begin
 @show
  `0"You already failed once today, `n.  I cannot let you try again
  tomorrow," `2Turgon tells you.
  `2Your face falls - what a bummer!
`k
@run turg
@closescript
@end
 @show
  `0"You have been sitting at level `p09 long enough."
@show
`k
`c  `r1`4 DRINKING YOUR OWN INIQUITY `r0
`2  Turgon hands you a small black cup.
  `2It doesn't taste bad actually...
`2  You lay down and begin dreaming immediately.
`k
@do `s01 is gshops
@run startfight in training.ref
@closescript
@#TURG
@offmap
@do moveback
@do `v01 is 1
@label turgstart
@show
`r0`c  `%Turgon's Training Center
`2  Hundreds of warriors are randomly jumping and shrieking in their
  efforts to better themselves.
  Turgon waves to you warmly as you come in.
@do write
`x`x
@choice
Ask for a level raise.
Talk to Master Turgon.
Leave
@if responce is 1 then do
 @begin
 @run turgraise
 @do goto turgstart
 @end
@if responce is 2 then do
 @begin
  @show
`r0`c  `%Talking to Master Turgon
  `0"How are you, `n`0?"
  `$"Doing pretty good.  Are you back to the master-per-level system?" `2you
  ask.
  
`k  `0"Nah..  the other trainers have left.  I think we're gonna stick to
  the nightmare drink thing." `2he smiles.
  `$"Hmm... I'm not real excited about that part, but ok."
`k
 @do goto turgstart
 @end
@drawmap
@update
@#ABDUL
@offmap
@do moveback
@do `v01 is 1
@label abstart
@show
`r0`c  `%Abdul's Armour
`2  You see chainmail, leather, studded vests and other crap everywhere.
@do write
`x`x
@choice
Examine her wares
Go outside.
@show
`\
@if responce is 1 then do begin
 @begin
@buymanager
  10
  12
  13
  14
  @end
@if responce not 2 then goto abstart
@drawmap
@update
@#ARTHUR
@offmap
@do moveback
@do `v01 is 1
@label arstart
@show
`r0`c  `%King Arthur's Weapons
`2  Items of destruction are hung all around you - you feel like a kid in
  a candy store.
@do write
`x`x
@choice
Examine his weaponry
Go outside.
@show
`\
@if responce is 1 then do begin
 @begin
@buymanager
  4
  9
  15
  16
  @end
@if responce not 2 then goto arstart
@drawmap
@update
;Items file
@#default                                                  
  @routine error_handler in regfixit.rec                   
@#vehicles
;methods of transportation and people following player
@do `p20 is 0
@do `p21 is 0
@do `p22 is 0
@do `p23 is 0
@dataload canoe.idf &playernum `p20
@IF `p20 > 0 THEN DO
        @BEGIN
        @end
@if `p71 > 0 then do
 @begin
 @routine getname in npcwith.ref
 @do `p21 is 1
 @end
@do move 21 15
@do write
`r0`2ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿`r0
@do move 21 16
@do write
`r0`2³                                  ³°°`r0
@do move 21 17
@do write      
`r0`2³                                  ³°°`r0
@do move 21 18
@do write
`r0`2³                                  ³°°`r0
@do move 21 19
@do write
`r0`2³                                  ³°°`r0
@do move 21 20
@do write
`r0`2³                                  ³°°`r0
@do move 21 21
@do write
`r0`2ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ°°`r0
@do move 23 22
@do write
`r0`2°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°`r0
@do move 25 16
@do `v01 is 1
@choice
<0 `p21 `%Talk to `s01
<0 `p20 `$Inspect Canoe
+`t79 1 `$Inspect Horse
+`t79 2 `$Inspect Wagon
`3Nothing to do
@if response is 5 then goto vend
@if response is 4 then goto Wagon
@if response is 3 then goto Horse
@if response is 2 then goto Canoe
@if response is 1 then goto Talk
@label Wagon
;not yet available
@routine checkwagon in vehicle.ref
@do goto vend
@label Horse
@routine checkhorse in vehicle.ref
@do goto vend
@label Canoe
@routine checkcanoe in vehicle.ref
@do goto vend
@label vend
@run justitems in gametxt.ref
@label talk
@routine getname in npcwith.ref
@if `p71 is 109 then goto item42
@clearblock 14 23
@do move 1 14
@show
            `r1   Talking with `s01   `r0
`\
@if bitcheck `t50 0 1 then do
        @begin
        @show
  `$`N: `%Didn't you say you had something for me?`\
  `$`s01: `%Yes, I do, but I do not have it with me here.`\
        @key
        @end
@if bitcheck `t50 1 1 then do
        @begin
        @show
  `$`N: `%So, where do you want to go today?`\
  `$`s01: `%hmmm, anyplace that is very romantic.`\
        @key
        @do goto vend
        @end
@if bitcheck `t50 2 1 then do
        @begin
        @show
  `$`N: `%Where were we heading again?`\
  `$`s01: `%I HAVE `@VD`% Please take me to a doctor.`\
        @key
        @do goto vend
        @end
@if bitcheck `t50 3 1 then do
        @begin
        @show
  `$`N: `%Where were we heading again?`\
  `$`s01: `%You WERE going to take me to go and pay my taxes.`\
        @key
        @do goto vend
        @end
@if bitcheck `t50 4 1 then do
        @begin
        @show
  `$`N: `%Where were are we heading now?.`\
        @key
        @end
@if bitcheck `t50 7 1 then do
        @begin
        @do write
  `$`s01: `%Please take me safely home. Thanks.`\
        @key
        @do goto vend
        @end
        @do write
  `$`s01: `%I have nothing more to say right now.`\
@key
@#brokenkey
;
; something special to work on later on. Plan on have the player loose this
;  key then find it again in the future. Nice treasure behind it.
;
@clearblock 13 23
@do move 1 13
@show
                                               
  `2It's rusty and chipping apart.                  `6Ø
                                                  `6Æ
  `2You have had this thing for as long as         `6ÚÁ¿ 
  `2you could remember.                            `6ÀÐÙ
`k
@routine stats in gametxt.ref
@#item88
;Pot of Honey
@clearblock 13 23
@do move 1 13
@show
  `2You swallow the sticky mess.
`k  `%MAX HITPOINTS INCREASED BY TEN.
`k
@do `p03 + 10
 @clearblock 5 11
 @routine drawstats in gametxt.ref
@#item89
;Jar of Honey
@clearblock 13 23
@do move 1 13
@show
  `2You swallow the sticky mess.
`k  `%MAX HITPOINTS INCREASED BY FIVE.
`k
@do `p03 + 5
 @clearblock 5 11
 @routine drawstats in gametxt.ref
@#item91
;black potion
@clearblock 13 23
@do move 1 13
@show
  `2You slurp it down.  It tastes ok at first but then... `bYUCK!`2
  You spew all over the place!
  `4HITPOINTS GO DOWN BY ONE.
@if `p02 more 0 then `p02 - 1
@clearblock 5 11
@routine drawstats in gametxt.ref
@do move 1 19
@key
@#item93
;purple potion
@clearblock 13 23
@do move 1 13
@show
  `2You slurp it down. It tastes like draino...!`2
  
  `4HITPOINTS GO DOWN BY FIVE.
@if `p02 more 0 then `p02 - 5
@clearblock 5 11
@routine drawstats in gametxt.ref
@do move 1 19
@key
@#item94
;Yellow Potion
@clearblock 13 23
@do move 1 13
@show
  `2You swallow the bubbling concoction.
`k  `%MAX HITPOINTS INCREASED BY ONE.
`k
@do `p03 + 1
 @clearblock 5 11
 @routine drawstats in gametxt.ref
@#item86
;Pink potion
@clearblock 13 23
@do move 1 13
@show
  `2You drink the pink liquid.
@if `p02 less `p03 then do
 @begin
 @show
  `%You feel a lot better!
 @do `p02 + 200
 @if `p02 more `p03 then `p02 is `p03
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@#item99
@run menu in item99.ref
@closescript
@#item76
  @clearblock 13 23                                        
  @do move 1 13                                             
  @show                                                     
    `2You can use this key an `$UNLIMITED `2number of times.
  `k                                                        
  @                                                         
  @if `i76 > 0 then do                                      
   @begin                                                   
   @itemexit                                                
   @routine load_registry in registry.rec                   
  @end                                                      
@#DIARY
;Barak's diary
@show
`r0`c  `r1`%  Reading Barak's Diary  `r0
  `r1`%  2-24  `r0
  `2Turgon embarressed me in front of the students again.  He has no right
  to do this.
`k  `r1`%  2-29  `r0
  `2I was beat by a student with 24 experience today!  Turgon told Aragorn
  and Santiger about it immediately... gawd I hate him!
`k  `r1`%  3-03  `r0
  `2Mother made some pointed comments about how nice it would be if I got
  my own place.. that old hag, I'll show her I make plenty of money!
`k  `r1`%  3-23  `r0
  `2I took 20 gems from the student gem deposit today.  No one saw me.
  I now am afraid to try to sell them...  I will wait until people forget.
`k  `r1`%  4-03  `r0
  `2Turgon saught me out today in an attempt to 'teach me the proper way
  to handle twin swords'.  I can't believe his ego!  It was all I could do
  to tell him I was busy.
`k  `r1`%  4-12  `r0
  `2I have only just become sober.  Last night I did something terrible..
  In a drunken rage while others were at a party celebrating the death of
  `4The Red Dragon`2 (it was one of Turgon's students that did it.. I will
  never hear the end of this) I went to Turgon's house and hid the gems
  behind his bookshelf.
  My heart is heavy now, I hope the gems are never found.
`k  `r1`%  4-18  `r0
  `2TURGON SUCKS!  I decided to play some dice for a few minutes during
  training with some students and was reprimanded by Turgon himself in
  front of everyone.  Even Halder was laughing!
  Later I left an anonymous note at the councils door.  I told them Turgon
  had taken the gems, and I told them exactly where to find them.  I hope
  that old coot has not found them and moved them...
`k  `r1`%  4-22  `r0
  `2Turgon has been banashed from Greentree!  Things could not have worked
  more beautifully!!!  I told the council today that Turgon had been stealing
  things all along.. it explained many disappearances..<snicker> I told them
  all the other trainers but I took part - and it was I wrote the note.
`k  `r1`%  4-23  `r0
  `2The council has made me the master trainer for my 'service to the 
  community'.  I will finally be able to start the Barak Training center
  like I have always dreamed!
  `0That was the last entry.
`k
  @bitset `t01 5 1
  @if bitcheck `t01 6 1 then do
        @begin
        @bitset `t01 0 0
        @end
  @run stats in gametxt.ref
  @closescript
@#SMACK
@clearblock 13 23
@do move 1 13
@show
  `2To use this item press Z from the map screen.
`k
@
@#MOON
;Gryphon Moon
@clearblock 13 23
@do move 1 13
@show
  `2The `%Gryphon Moon`2 comes alive in your hands.
  Did the sun move backwards a bit?
@if `p11 < `v05 then `p11 + 500
@clearblock 5 11
@routine drawstats in gametxt.ref
@do move 1 17
@key
@#WAND
@if castle3.dat exist false then do
  @begin
  @show
`r0`c  `r1 `0WAVING YOUR WAND ALL ABOUT `r0
`2  This wand is dead and lifeless.  This means nobody currently owns the
  `%Wizard Tower`2.
`k
  @run stats in gametxt.ref
  @closescript
  @end
@readfile castle3.dat
`p20
`s01
@
;load owner and current password
@if `p20 not &playernum then do
  @begin
  @do upcase `s01
  @if `s01 is NONE then do
  @begin
  @do `s04 is getname `p20
  @show
`r0`c  `r1 `0WAVING YOUR WAND ALL ABOUT `r0
  `%A light appears over the wand!  `2Something leans out...
`k`2  The face of mighty wizard `0`s04`2 scowls at you.
  `0"I am not allowing anyone to enter my castle by any means!"
  `2As quick as that the light is gone.
`k
  @run stats in gametxt.ref
  @closescript
  @end
  @show
`r0`c  `r1 `0WAVING YOUR WAND ALL ABOUT `r0
`2  Say what incantation while you wave?
   @do write
`\  `2Say what? :`x
  @do readstring 40 NIL `s03 
  @do upcase `s03
  @do upcase `s01
  @if `s03 is `s01 then do
    @begin
    @itemexit
    @do x is 44
    @do y is 15
    @do map is 1176
    @loadmap &map
    @drawmap
    @update
    @do quebar
`%AWESOME!
    @closescript
    @end
@do `p02 / 2
@show
`\`\  `2The wand grows hot and burns you!  `bOUCH!
  `2If only you knew the right thing to say...
`k
  @run stats in gametxt.ref
  @closescript
  @end
    @itemexit
    @do x is 44
    @do y is 15
    @do map is 1176
    @loadmap &map
    @drawmap
    @update
    @do quebar
`%WHAT A RIDE!
    @closescript
@#QUEST
;help them remember where they need to deliver something
;get location and name
@do `p20 is `p15
@routine getname in quest.ref
@routine getplace in quest.ref
@clearblock 13 23
@do move 1 13
@do `s02 is `2You`xstarted`xthis`xquest`x`0`p32`2`xdays`xago.
@if `p32 is 0 then `s02 is You`xstarted`xthis`xquest`xtoday.
@if `p32 is 1 then `s02 is `2You`xstarted`xthis`xquest`xyesterday.
@show
  `2You need to take this to `0`s01`2 in `0`s03`2.
  `s02
@do `v01 is 1
@do write
`x`x
@choice
Continue your journey
Throw the thing away like a bad little s&boy
@if responce is 1 then do
  @begin
  @closescript
  @end
//setting quest stuff to 0, they chose throw sack away
@do `p14 is 0
@do `p15 is 0
@do `p16 is 0
@do `p17 is 0
//take away quest items
@do `i44 is 0
@do `i45 is 0
@do `i46 is 0
@do `i47 is 0
@do `i48 is 0
@show
`r0
  You chuck it behind some bushes.  Haw!
`k
@closescript
@#item1
;Wildberrys
@clearblock 13 23
@do move 1 13
@show
  `2You chug 'em down.  Boy do they taste good.
@if `p02 less `p03 then do
 @begin
 @show
  `%You feel a little better.
 @do `p02 + 1
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@end
@key
@#item2
;poisonberrys
@clearblock 13 23
@do move 1 13
@show
  `2You slurp it up.  It tastes ok at first but then... `bACK!`2
  You hook all over the place!
  `4HITPOINTS GO DOWN BY ONE.
@if `p02 more 0 then `p02 - 1
@clearblock 5 11
@routine drawstats in gametxt.ref
@do move 1 19
@key
@#item3
;Milk          
@clearblock 13 23
@do move 1 13
@show
  `2You down the cow juice.
  `2It's a little warm, but thats how ya like it!
`k
@
@#item5
;Green potion
@clearblock 13 23
@do move 1 13
@show
  `2You drink the green liquid.
@if `p02 less `p03 then do
 @begin
 @show
  `%You feel better!
 @do `p02 + 10
 @if `p02 more `p03 then `p02 is `p03
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@end
@key
@#item7
;Flute
@if bitcheck `t14 1 1 then do
  @begin
  @if bitcheck `t14 2 0 then do
  @begin
  @clearblock 13 23
  @do move 1 13
  @show
  `2You don't know any songs.  Damn!
`k
  @closescript
  @end
  @do `v01 is 1
  @show
`r0`c  `r1  Playing your flute  `r0
  `2Play what?
@do write
`x`x
@choice
Remembering the past
Remembering the present
Play nothing
@if responce is 3 then do
  @begin
  @run stats in gametxt.ref
  @closescript
  @end
  @if responce is 2 then do
  @begin
  @show
`\`\  `2You play the song.  You will never forget this place.
`k
  @do `t15 is x
  @do `t16 is y
  @do `p36 is &map
  @run stats in gametxt.ref
  @closescript
  @end
  @if responce is 1 then do
  @begin
  @if `t15 is 0 then do
    @begin
  @show
`\`\  `2Nothing happpens.  Maybe you should try the other song...
`k
    @do goto item7
    @end
  @show
`\`\  `2You play the song.  You are moved by your performance!
`k
  @do x is `t15
  @do y is `t16
  @do map is `p36
  @loadmap &map
  @itemexit
  @drawmap
  @update
  @closescript
  @end
  @end
@clearblock 13 23
@do move 1 13
@show
  `2No sound comes out, must be broke.
`k
@
@#item8
;momma's pie
@clearblock 13 23
@do move 1 13
@show
  `2You messily chow down the berry pie.
  After a satisfying belch, the pie is gone.
@if `p02 less `p03 then do
 @begin
 @do `p02 + 50
 @if `p02 > `p03 then `p02 is `p03
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@end
@key
@#item11
;talking to little girl
@do `v01 is 1
@label item11s
@show
`r0`c  `r1 `0TALKING TO YOUR CHARGE `r0
`2  You motion the girl to sit down so that you may speak with her.
@do write
`x`x
@choice
`%Where is your mother waiting for you again?
What were you doing so far from town?
`4Kill her.
`%Nevermind
@if response is 1 then do
 @begin
 @show
`\`\  `0"My mommy is waiting for me at the `4Red Dragon Inn`0.  Please, lets hurry,
  before she leaves!"
`k
 @do goto item11s
 @end
@if response is 2 then do
 @begin
 @show
`\`\  `0"I was picking flowers and.. I wanna go home!" `2the girl cries.
`k
 @do goto item11s
 @end
@if response is 3 then do
 @begin
 @show
`\`\  `$"Come here, small one.  I won't hurt you." `2you beckon.
`2  The child slowly advances towards you.  `0"Yes sir?"
@do write
`x`x
@do `v01 is 1
@choice
End her life.
Have mercy on her.
@if responce is 2 then do
  @begin
  @show
`\`\  `$"I just wanted to... Straighten your dress.  There, all better."
`2  She thanks you.  If only she knew how close you had come to...
`k
  @do `v01 is 3
  @do goto item11s
  @end
 @show
`\`\  `2You quickly crush the life out of her.  In a few moments, it is over.
`k  `2Looking down at her lifeless body you are saddened.  What ever posessed
  you to do this awful thing?
  `4ALIGNMENT GOES DOWN BY ONE.
`k
 @do `i11 is 0
 @do `p07 - 1
 @end
@run stats in gametxt.ref
@#ITEM17
;Gloworm
@clearblock 13 23
@do move 1 13
@if map is 1289 then do
  @begin
   @show
  `2You bite into the little guy.
  `$Your mouth is glowing!
`k  `%The area is much brighter now.  Good thinking!
`k
@do map is 1285
@loadmap 1285
 @closescript
  @end
@show
  `2You bite into the little guy.
  `$Your mouth is glowing!
`k  `2Gee, it would be more fun in the dark, you can't really see it glow here.
`k
@
@#item18
;talking to hector
@do `v01 is 1
@label item18s
@show
`r0`c  `r1 `0TALKING TO HECTOR `r0
`2  You let the bird poke his head out to speak with you.
@do write
`x`x
@choice
How do you know the old woman wants to eat you?
Taunt the bird
Set Hector free
Want a cracker?
`%Nevermind
@if response is 1 then do
 @begin
 @show
`\`\  `0"That witch has told me so, dozens of times!  Awk! She kept me locked
  up for months trying to fatten me up!"
`k  `$"Why did she 'enchant' you into a bird?  Why does she hate you so much?"
  `0"I threw stones at her shack with some friends.  Now I'm paying for it!"
`k
 @do goto item18s
 @end
@if response is 2 then do
 @begin
 @show
`\`\  `$"Say... Hector.  You are gonna taste MIGHTY fine in the old woman's stew!"
  `0"Awk!  No!  Please let me go!"
`k  `$"Haha... and lose my main course?  I don't think so." `2you laugh.
`k
 @do goto item18s
 @end
@if response is 4 then do
 @begin
 @show
`\`\  `$"Little birdy wordy wanna cracker?" you ask.
`0  "I most certainly do not!" `2Hector sqawks indignantly.
`k
 @do goto item18s
 @end
@if response is 3 then do
 @begin
 @show
`\`\  `$"Hector.  If I let you go...  Will you be a good bird?" `2you ask.
`2  Hector violently nods his beak.
@do write
`x`x
@do `v01 is 1
@choice
Throw Hector into the sky
Put him back in your pouch
@if response is 1 then do
  @begin
  @show
`\`\  `$Fly, Hector!  Fly!" `2you exclaim as you toss Hector up.
`k  The bird sqawks with joy - and soon is gone.
  `%ALIGNMENT GOES UP BY 20.  2 QUEST POINTS GAINED.
`k
  @do `i18 is 0
  @do `t08 is 3
  @do `p07 + 20
  @do `p18 + 2
  @run stats in gametxt.ref
  @end
 @show
`\`\  `$"Well... I was just kidding, so get back into that bag!"
`k
 @do `v01 is 3
 @do goto item18s
 @end
@run stats in gametxt.ref
@#item19
;Eating the apple
@clearblock 13 23
@do move 1 13
@show
  `2It tastes delicious.
`k
@
@#item20
;Using the map.
@clearblock 13 23
@do move 1 13
@show
  `2To use this item, press `0M`2 from the 'map' menu.
`k
@
@#item22
;Using the map.
@clearblock 13 23
@do move 1 13
@if `i22 < 1 then goto fail22
@if `i23 < 1 then goto fail22
@if `i24 < 1 then goto fail22
@if `i25 < 1 then goto fail22
@show
  `2You carefully fit all four pieces of this strange wand together...
`k  `%THE WAND COMES TO LIFE, BURNING IN YOUR HANDS. (YOU GET A QUEST POINT!)
`k  `0YOU ARE TELEPORTED TO A STRANGE AND WONDEROUS PLACE!
  `2You discard the now burned out wand.
`\`k  `2Somehow you feel safe here - as though you were back in your mother's
  womb and she was laying in a bed stomach down. `k
 @do map is 154
 @do x is 14
 @do y is 12
 @do `i22 - 1
 @do `i23 - 1
 @do `i24 - 1
 @do `i25 - 1
 @do `p18 + 1
 @loadmap 154
 @itemexit
 @drawmap
 @update
 @closescript
@label fail22
@show
  `2You can't seem to make it work.  Pieces are missing it looks like.
`k
@
@#ITEM28
;Casting the fishing rod
@clearblock 13 23
@do move 1 13
@show
  `2You practice casting.  Can't wait for a fishing dock to try this out
  on!
`k
@
@#item40
;Blue potion, heals 50
@clearblock 13 23
@do move 1 13
@show
  `2You drink the blue liquid.
@if `p02 less `p03 then do
 @begin
 @show
  `%You feel better!
 @do `p02 + 50
 @if `p02 more `p03 then `p02 is `p03
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@end
@key
@#ITEM41
;Reading ma's letter
@clearblock 13 23
@do move 1 13
@show
  `2The letter reads:
  `%Dear brother, Elle is with child.  The tramp must be taught a lesson
  only you can teach.  Please bring what you need, and hurry.
@if bitcheck `t12 6 0 then do
  @begin
  @bitset `t12 6 1
  @do `p07 - 5
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
  @show
  `4Your alignment goes down by 5.
  @end
@show
`k
@
@#ITEM42
;Talking to Laura and Edward
@clearblock 14 24
@do move 1 14
@show
`r0             `r1  Talking with Laura and Uncle Edward   `r0
  `2Laura's pretty face is dirty but determined.  Edward is panting
  heavily.
                        `4ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
                        `4³                       ³`8°°
                        `4³                       ³`8°°
                        `4³                       ³`8°°
                        `4ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ`8°°
                        `8  °°°°°°°°°°°°°°°°°°°°°°°°°
@do move 27 19
@do `v01 is 1
@choice
`% Talk to Laura       `%
`% Talk to Uncle Edward`%
`% Talk to nobody      `%
@if response is 1 then do
  @begin
  @clearblock 15 23
  @do move 1 15
  @show
  `$"Hey uh.. Laura.  You got a boyfriend?" `2you casually
  ask.
`k  `0"Not yet.  Maybe after all this is over you can come over and talk
  to me about it?"
`k  `$"You bet!  What are friends for?" `2you grin.
`k
  @do goto item42
  @closescript
  @end
@if response is 2 then do
  @begin
  @clearblock 15 23
  @do move 1 15
  @show
  `2You feel this might be a bad idea.  You sure?
  @do `v01 is 1
  @do write
`x`x
  @choice
Yes, talk to 'em
Good call
  @if response is 2 then do
    @begin
    @do goto item42
    @closescript
    @end
   @clearblock 15 23
  @do move 1 15
   @show
  `$"Friend Edward!  Why do you live with your niece?, anyway?" `2you ask,
  carefully shielding your mouth with one hand.
`k  `0"Well - Laura's parents were killed by `4Dragon Tooth `0riders.  They
  burned down her whole village a few months ago.  She survived... but
  not without scars.  Luckily I was there to help."
`k
  @do goto item42
  @closescript
  @end
@run justitems in gametxt.ref
 @#ITEM50
 ;travel potion
@clearblock 13 23
@do move 1 13
@show
  `2You empty the vial's contents down your throat.
`k  `2Your mind begins to spin...  Streaks of light dance in your head
  at your command.  You are the ruler of this universe of brilliance -
  and then... it all stops.
`k
@itemexit ;this will cause it to exit to the map screen directly after
          ;finishing this .ref
@do `p20 random 9 1
@if `p20 is 1 then do
  @begin
  @do map is 1498
  @do x is 49
  @do y is 6
  @end
@if `p20 is 2 then do
  @begin
  @do map is 1271
  @do x is 28
  @do y is 11
  @end
@if `p20 is 3 then do
  @begin
  @do map is 379
  @do x is 55
  @do y is 4
  @end
@if `p20 is 4 then do
  @begin
  @do map is 1255
  @do x is 58
  @do y is 6
  @end
@if `p20 is 5 then do
  @begin
  @do map is 1576
  @do x is 24
  @do y is 4
  @end
@if `p20 is 6 then do
  @begin
  @do map is 1029
  @do x is 27
  @do y is 10
  @end
@if `p20 is 7 then do
  @begin
  @do map is 1358
  @do x is 66
  @do y is 3
  @end
@if `p20 is 8 then do
  @begin
  @do map is 1093
  @do x is 44
  @do y is 10
  @end
@if `p20 is 9 then do
  @begin
  @do map is 1035
  @do x is 46
  @do y is 11
  @end
@loadmap &map
@drawmap
@update
@#item52
;Red potion
@clearblock 13 23
@do move 1 13
@show
  `2You slurp down the strange concoction.
`k  `%MAX HITPOINTS INCREASED BY FIVE.
`k
@do `p03 + 5
 @clearblock 5 11
 @routine drawstats in gametxt.ref
@#item53
;Gold potion
@clearblock 13 23
@do move 1 13
@show
  `2You slurp down the strange concoction.
`k  `%MUSCLE INCREASED BY TWO.
`k
@do `p04 + 2
 @clearblock 5 11
 @routine drawstats in gametxt.ref
@#item54
;Silver potion
@clearblock 13 23
@do move 1 13
@show
  `2You slurp down the strange concoction.
`k  `%DODGE INCREASED BY ONE.
`k
@do `p05 + 1
 @clearblock 5 11
 @routine drawstats in gametxt.ref
@#item55
;White potion
@clearblock 13 23
@do move 1 13
@show
  `2You drink the white liquid.
@if `p02 less `p03 then do
 @begin
 @show
  `%You feel better!
 @do `p02 + 200
 @if `p02 more `p03 then `p02 is `p03
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@end
@key
@#item66
;Koshi Snack
@clearblock 13 23
@do move 1 13
@show
  `2You chomp down the strange cookie.
  `%YOU ARE FULLY HEALED.
 @do `p02 is `p03
 @savecursor
 @clearblock 5 11
 @routine drawstats in gametxt.ref
 @loadcursor
@end
@key
;---The Following is used by TLS1.REF
@#groon
;Myphon Groon
@routine GTRANS in TLS1.REF
@drawmap
@update
@#screw
;The Loose Screw
@routine GSCREW in TLS2.REF
@drawmap
@update
;----------------------------------
;For Pyramid.ref
@#ankh
;ankh
@routine ankh in pyramid.ref
@drawmap
@update
@end 
@#MEYE
 @itemexit
 @routine enter in show2.ref
@#DEEDS
@routine DEEDS in DEEDS.REF
@routine drawstats in gametxt.ref
@UPDATE
@END
@#NOMOREITEMS
@#BANK
@do `v01 is 1
@offmap
@do moveback
@do `s09 is loki
@routine DONEQUEST in VAULTS.REF
@label bankstart
@show
`r0`c  `r1 `%Loki's Inn Bank `r0
`2  An older man looks you over carefully.
@if bank more 0 then do
 @begin
 @show
`2  You are holding `$$&money`2, your account is at `$$&bank`2.
 @end
@if bank is 0 then do
 @begin
 @show
`2  You currently don't have an account with them.
 @end
@do `p30 is 16
@do write
`x`x
@choice
>&bank 0 Make a deposit.
>&bank 0 Make a withdrawal.
=&bank 0 Apply for an account here.
Leave
@if response is 3 then do
  @begin
  @do `v01 is 1
  @show
  `2The man asks you to sit down.
  `0"Your full name s&sir?"
  @do `s01 is NIL
  @do write
`x`x
  @do readstring 30 `s01
  @show
  `0"Your current residence?"
  @do write
`x`x
  @do readstring 50 `s01
  @show
  `0"Your net income yearly?"
  @do write
`x`x
  @do readnum 10
  @if `v40 less 20 then do
  @begin
  @show
  @end
  @if `v40 more 19 then do
   @begin
   @show
  `2You giggle to yourself `0-`2 how will they know you just totally lied on
  that last questions?!??  You only made `b19`2 gold pieces last year!
  @end
  @label bankagain
  @show
  `0"How much would you like to open your account with?" `2(you have `$$&money`2)
  @do write
`x`x
  @do readnum 10 money
  @if `v40 is 0 then do
   @begin
   @show
  `2You decide you really don't want to open an account with this
  branch.
`k
  @do goto bankstart
  @end
  @if `v40 > money then do
   @begin
   @show
`2  You don't have this much!  Try again.
   @do goto bankagain
   @end
  @if `v40 < 50 then do
  @begin
  @if money < 50 then do
   @begin
  @show
  `2The clerk eyes your shabby clothing distastefully - as if he knew
  this part was coming.
  `0"I'm sorry s&sir, we do require `$$50 `2to open an account.  And could
  you please leave the pen on your way out." `2he asks haughtily.
`k  `2You carefully return the pen.  `$"I'll be back someday.  And you WILL
  open an account for me then," `2you vow seriously.
  `0"Of course you will, s&sir.  Please exit now, remember, the sign does
  say no loitering.  And this means you." `2he says as he points to the
  door.
`k
@drawmap
@update
@closescript
   @end
  @show
  `0"S&Sir, `$$50 `0is required to open a new account!"
  @do goto bankagain
  @end
  @routine deposit in vaults.ref
  @do money - `v40
  @do bank + `v40
  @show
  `0"Very good S&sir!  Your new account has been opened!"
`k
  @do goto bank
  @end
@if response is 1 then do
  @begin
  @do write
`\
  @label deposit
  @do write
`\  `0"Deposit how much, s&sir?"`\`\`x`x
  @do readnum 10 money
  @if `v40 more money then do
  @begin
  @show
`\`\  `2Maybe you left the money in your other pants?  'cuz it sure ain't here.
  @do goto deposit
  @end
  @if `v40 less 0 then do
  @begin
  @show
`\`\  `2No, this isn't happening and you aren't here.
  @do goto withdraw
  @end
  @routine deposit in vaults.ref
  @do money - `v40
  @do bank + `v40
  @do goto bankstart
  @end
@if response is 2 then do
  @begin
  @do write
`\
  @label withdraw
  @do write
`\  `0"Withdraw how much, s&sir?"`\`\`x`x
  @do `p21 is bank
  @do `p21 - 1
  @if `p21 < 0 then `p21 is 0
  @do readnum 10 `p21
  @if `v40 more bank then do
  @begin
  @show
`\`\  `2You kind of don't have that much in your account.  Nice bookeeping!
  @do goto withdraw
  @end
  @if `v40 less 0 then do
  @begin
  @show
`\`\  `2No, I don't think so.
  @do goto withdraw
  @end
  @if `v40 is bank then do
   @begin
   @show
  `0"But s&sir!  This will close your account with us, are you sure you wish
  to do that?" `2the clerk chokes.
  @do write
`x`x
  @do `v01 is 1
  @choice
Ok, nevermind then.
Yeah.  Get my damn money.
@if response is 1 then goto bank
   @end
  @routine widthdraw in vaults.ref
  @do money + `v40
  @do bank - `v40
  @do goto bankstart
  @end
@drawmap
@update
@#SALES
@offmap
@do moveback
@label weapons
@show
`r0`c `r1 `%Loki's Weapons, Armor and General Goods `r0
  `2A scruffy looking blacksmith approaches
 `0"Waddaya need today?" `2he asks.
 
@do `v01 is 1
@do write
`x
@choice
Examine his Weaponry
Check out the Armory
List other Goods
Sell something
Leave
@show
`\`c
@if responce is 1 then do begin
 @begin
@buymanager
  60
  49
  39
  58
  @end
@if responce is 2 then do begin
 @begin
@buymanager
  37
  59
  62
  68
  @end
@if responce is 3 then do begin
 @begin
@buymanager
  3
  17
  20
  29
  5
  40
  50
  55
  61
  @end
@if responce is 4 then do begin
 @begin
 @clearblock 8 14
 @do move 1 7
 @sellmanager
  @end
@if responce not 5 then goto WEAPONS
@drawmap
@update
@end
@#WINK1
@if `p08 < 5 then do
@begin
@show
`c
  `4oDiN `2doesn't seem interested in your fluttering eyelashes.
`\`k
  `%Perhaps if you had more charm ?
`\`k
@do goto fin
@end
@if `p08 > 4 then do
@begin
@do `p01 + 525
@show
`c
  `4oDiN `2smiles and winks at you !
`\`k
`\
  `%You gain 525 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 2
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#WINK2
@if `p08 < 5 then do
@begin
@show
`c
  `#Hilda `2doesn't seem interested in your winking.
`\`k
  `%You lack the charm it seems.
`\`k
@do goto fin
@end
@if `p08 > 4 then do
@begin
@do `p01 + 525
@show
`c
  `#Hilda `2smiles and winks at you !
`\`k
`\
  `%You gain 525 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 2
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#DINNER1
@if `p08 < 10 then do
@begin
@show
`c
  `4oDiN `2refuses your invitation to dinner.
`\`k
  `%You lack the charm it seems.
`\`k
@do goto fin
@end
@if `p08 > 9 then do
@begin
@do `p01 + 750
@show
`c
  `4oDiN `2accepts your invitation to dinner !
`\`k
  `2You eat dinner together and stare deep into each others eyes.
`\`k
  `%You gain 750 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 3
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#DINNER2
@if `p08 < 10 then do
@begin
@show
`c
  `#Hilda `2refuses your invitation to dinner.
`\`k
  `%Perhaps if you had more charm ? 
`\`k
@do goto fin
@end
@if `p08 > 9 then do
@begin
@do `p01 + 750
@show
`c
  `#Hilda `2accepts your invitation to dinner.
`\`k
`\
  `2You enjoy your dinner with `#Hilda`2, she asks you
  to return tomorrow !
`\`k
`\
  `%You gain 750 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 3
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#WALK1
@if `p08 < 15 then do
@begin
@show
`c
  `4oDin `2tells you that his leg is cramped.
`\`k
  `%If only you had more charm.
`\`k
@do goto fin
@end
@if `p08 > 14 then do
@begin
@do `p01 + 975
@show
`c
  `4oDiN `2takes your hand in his and together you go out walking in the
  moonlight. It is a beautiful night and you are overcome with desire
  as he whispers sweet nothings in your ear.
`\`k
`\
  `%You gain 975 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 6
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#WALK2
@if `p08 < 15 then do
@begin
@show
`c
  `#Hilda `2tells you her leg is cramped.
`\`k
  `%If only you had more charm.
`\`k
@do goto fin
@end
@if `p08 > 14 then do
@begin
@do `p01 + 975
@show
`c
  `#Hilda `2accepts your invitation for a moonlit walk !
`\`k
  `2You walk around outside the Inn holding hands in the moonlight.
  `#Hilda `2rests her head on your shoulder as you continue your
  walk together.
`\`k
`\
  `%You gain 975 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 6
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#KISS1
@if `p08 < 20 then do
@begin
@show
`c
  `4oDiN `2frowns and turns away as you try to embrace and kiss him.
`\`k
  `%You decide that you really do need more charm.
`\`k
  `4You lose 1 Hit Point
`\`k
@do goto fin
@end
@if `p08 > 19 then do
@begin
@do `p01 + 1129
@show
`c
  `4oDiN `2returns your affections, you kiss and hug for what seems like
  forever. He asks you to return tomorrow !
`\`k
`\
  `%You gain 1129 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 8
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#KISS2
@if `p08 < 20 then do
@begin
@do `p03 - 1
@show
`c
  `#Hilda `2pushes you away and `bslaps `2you silly !
`\`k
  `%You decide that you need more charm before you try that again.
`\`k
  `4You Lose 1 Hit Point 
`\`k
@do goto fin
@end
@if `p08 > 19 then do
@begin
@do `p01 + 1129
@show
`c
  `2You show `#Hilda `2the finer points of making out !
  She invites you to return tomorrow for some more fun.
`\`k
`\
  `%You gain 1129 experience points !
`\`k
@dataload npc/npc-`p70.idf &playernum `p29
@do `p29 + 8
@datasave npc/npc-`p70.idf &playernum `p29
@do goto fin
@end
@#NOFLIRT
@busy
@do moveback
@if sexmale is 1 then `s10 is `#Hilda
@if sexmale is 0 then `s10 is `4oDiN
@show
`r0`c  
  `2You notice that `s10 `2is busy talking to the InnKeeper.
`\`k
@do goto fin
@#FLIRT
@datanewday loki3.idf
@dataload loki3.idf &playernum `p25
@if `p25 = 1 then do
@begin
@do goto NOFLIRT
@end
@datasave loki3.idf &playernum 1
@if sexmale = 0 then do
@begin
@do goto odin
@end
@if sexmale = 1 then do
@begin
@do goto hilda
@end
@#Odin
@do `p70 is 61
@do moveback
@routine talk in talk.ref
@if `p20 is 0 then do
@begin
@show
`r0`c  `r1 `%Flirting with `4oDiN `r0
  `2You sit down on the stool next to the most handsome man you've
  ever laid eyes on. He introduces himself as `4oDiN`2.
  `0You decide to...
`\
@do `v01 is 1
@do write
`x`x
@choice
Flutter your eyelashes at him
Invite him to dinner
Ask him to join you for a walk in the moonlight
Embrace and Kiss him
Get up and leave
@if responce is 5 then do
@begin
@do goto fin
@end
@if responce is 1 then do
@begin
@do goto wink1
@end
@if responce is 2 then do
@begin
@do goto dinner1
@end
@if responce is 3 then do
@begin
@do goto walk1
@end
@if responce is 4 then do
@begin
@do goto kiss1
@drawmap
@update
@end
@#HILDA
@do `p70 is 62
@do moveback
@routine talk in talk.ref
@if `p20 is 0 then do
@begin
@show
`r0`c  `r1 `%Flirting with `#Hilda `r0
  `2You sit down on the stool next to the most beautiful woman you've
  ever laid eyes on. She introduces herself as `#Hilda`2.
  `0You decide to....
`\
@do `v01 is 1
@do write
`x`x
@choice
Wink at her
Invite her to dinner
Ask her to join you for a walk in the moonlight
Embrace and Kiss her
Get up and leave
@if responce is 5 then do
@begin
@do goto fin
@end
@if responce is 1 then do
@begin
@do goto wink2
@end
@if responce is 2 then do
@begin
@do goto dinner2
@end
@if responce is 3 then do
@begin
@do goto walk2
@end
@if responce is 4 then do
@begin
@do goto kiss2
@drawmap
@update
@end
@#SEXMONEY
@show
`r0`c  `r1 Money before Sex Change `r0
 `0"I'll change your sex for `$$50000 `0gold." `2the Innkeeper says
`\
@do `v01 is 1
@do write
`x`x
@choice
>&money 49999 Pay the InnKeeper
<&money 50000 Leave because you can't afford it
>&money 49999 I'm outta here
@
 @if responce is 1 then do 
@begin
@do money - 50000
@do goto sexchange
@end
@do goto koshi
@#NAMEMONEY
@show
`r0`c  `r1 Money before Name Change `r0
 `0"I'll change your name for `$$250 `0gold." `2the Innkeeper says
`\
@do `v01 is 1
@do write
`x`x
@choice
>&money 249 Pay the InnKeeper
<&money 250 Leave because you can't afford it
>&money 249 No thanks
@
 @if responce is 1 then do 
@begin
@do money - 250
@do goto changename
@end
@do goto koshi
@#SEXCHANGE
@show
`r0`c  `r1 Sex Change `r0
 `0"Normally I frown upon this sort of thing, but I do have a few
 sharp knives and extra parts in the back room somewhere."
 `0"So what sex do you want to be `%`n `0?"
`\
@do `v01 is 1
@do write
`x`x
@choice
I want to be a `!man
Make me a `#woman
I'll pass
@if responce is 1 then sexmale is 1
@if responce is 2 then sexmale is 0
@if responce is 3 then do
@begin
@show
`\
 `0"You're a weird one, here is half of your money back !"
 `2He hands you `$$250 `2gold.
`\`k
@do money + 250
@do goto koshi
@end
@if sexmale is 1 then `s10 is `!Man
@if sexmale is 0 then `s10 is `#Woman
@show
`r0`c  `r1 `%Your new sex is `^? `r0
  `2After hours of painful surgery you emerge a `l.`l.`l.`l.`l.`l.`l.
  `l.`l.`l.`l.`l.`l.`l.`l. `s10 `2!
`\`k
 `0"There you go `%`n `0! Enjoy your new sex."
`\`k
@if sex is 1 then `s09 is she
@if sex is 0 then `s09 is he
@do goto Koshi
@#CHANGENAME
@label namechange
@show
`r0`c  `r1 Name change `r0
 `0"Ok `%`n`0, what do you want to change your name to?" `2the Innkeeper asks. 
 
 
@do `v01 is 1
@show
@do write
  `2You decide upon 
  @do readstring 20 NIL
  @do stripbad `s10
  ; change dark blue to light blue in their name
  @do replaceall `1 `! `s10
  @do `p20 is length `s10
  @if `p20 less 1 then do
    @begin
    @do move 20 y
    @show
`bNada `2.
 `0"I thought you wanted to change your name, when you decide on a
 name let me know."
`\`k
 `0"You're a strange one, here's half of your money back !"
 `2The InnKeeper hands you `$$125 `2gold.
`\`k
    @do money + 125
    @do goto koshi
    @end
  @if `p20 less 3 then do
    @begin
    @show
 `0"The name you chose is too short, try again !"
`\`k
    @do goto namechange
    @end
   @if checkdupe `s10 true then do
    @begin
    @show
 `0"I already know someone with that name, try again !"
`\`k
    @do goto namechange
    @end
   
    @end
  
@show
`\`\ `0"Are you sure you want to be known as `%`s10 `0?" `\
@do write
`x`x
@choice
Keep it
Try again
@if response is 2 then goto namechange
@do copytoname
@show
`r0`c `r1 Your new name `r0
 `0"You will now be known as `%`n`0 !" `2the Innkeeper exclaims. 
`\`k
@do goto koshi
@#NOALIGN
@show
`r0`c  `r1 Chatting with InnKeeper `r0
  `0"Come back tomorrow `%`n`0. I'm too busy to chat now."
`\`k
@do goto koshi
@#KOSHI
@do moveback
@label keeper
@show
`r0`c  `r1 `%Koshi InnKeeper `r0
  `2As the InnKeeper approaches you notice his wings, knowing right
  away that he belongs to the "`$Good`2" race, the Koshi.
  `0"Hello `%`n`0, what can I do for you today?" `2he says smiling. 
`\
@do `v01 is 1
@do write
`x`x
@choice
Make conversation
Ask about Loki's Inn
Who is oDiN ?
I want to change my name.
Do you do Sex change operations?
Conduct business
Leave
@if responce is 6 then do
        @begin
        @do `p20 is 11
        @run getquest in quest.ref
        @end
@if responce is 7 then goto fin
@if responce is 5 then goto sexmoney
@if responce is 4 then goto namemoney
@if responce is 3 then do
@begin
@show 
`r0`c  `r1 Who is oDiN `r0
 `0"You mean `4oDiN `0? Well he's some regular kind of guy with
 way too much time on his hands. He built a place near Greentree
 called "`$Quester`0" and another place near Porttown called "`$Odin's Keep`0."
 "They say he's working on building a place called `$Valhalla`0,
 I talked with him once, he kept mumbling something about webs or
 we-bsi-te or something like that."
 "Oh yea, he gave me his address it's kinda strange, didn't make much sense
 to me. It is `$http://members.aol.com/odin706/title.html`0,strange huh?"
 "His brother's name is `7Nemesis `0and has been seen starting to build
 something around here." `2the Innkeeper informs.
`\`k
@do goto keeper
@end
@if responce is 2 then do
@begin
@show
`r0`c  `r1 About Loki's Inn `r0
 `0"Well now `%`n`0, there was this gangster that came along, he called
 himself "`$The Gangster of Love`0" he put up the money for the Inn and a
 man named `4oDiN `0built it."
 "All of the rooms here are owned by private people. There are guards in
 each room and from what I understand they won't allow any harm to come to
 the owner of the room."
 "Rooms `3101 - 109 `0are kinda small but each room has a spare bedroom.
 Rooms `!110 - 118 `0are really super nice and each comes with it's own
 majik transporter stone." 
 "I hope I've answered any questions you may have had about the Inn."
`\`k
@do goto keeper
@end
@if responce is 1 then do
@begin
@datanewday loki1.idf
@dataload loki1.idf &playernum `p20
@if `p20 = 1 then do
@begin
@do goto NOALIGN
@end
@datasave loki1.idf &playernum 1
  @show
`r0`c  `r1 Chit Chat `r0
 `0"I took this job hoping to help others in need." 
 `0"Do you help others `%`n`0?" `2the Innkeeper asks.
@do write
`x`x
@choice
Yes as much as I can.
I help others to an early Grave.
@if responce is 1 then do
@begin
@do `p07 + 5
@show      
`r0`c
       `0"Maybe this gift will help you continue helping others" `2he says.
`\`k
`\`\
                          `%YOU GAIN `$5 `%ALIGNMENT
`\`k
@do goto keeper
@end
@if responce is 2 then do
@begin
@do `p07 - 5
@show
`r0`c
                       `0"You are beyond hope `%`n`0."
`\`k
`\`\
                           `4YOU LOSE `%5 `4ALIGNMENT
`\`k
@do goto keeper
@end
@end
@#FIN
@drawmap
@update
@#SIGN1
@do moveback
@busy
@do saybar
`%Welcome to Loki's Inn
@#SIGN2
@do moveback
@busy
@do saybar
`%`^<---- `0Rooms 110 - 118    `$Rooms 101 - 109 `%`^---->
@#SIGN3
@do `p70 is 60
@do moveback
@routine talk in talk.ref
@if `p20 is 0 then do
@begin
    @do `p20 random 10 1
    @if `p20 is 1 then saybar
`$Guard: `%oDiN is rumoured to visit this Inn often.
  @if `p20 is 2 then saybar
`$Guard: `%I'm taking a break from guarding a room here.
  @if `p20 is 3 then saybar
`$Guard: `%There is something behind this Inn.
  @if `p20 is 4 then saybar
`$Guard: `%I secretly hate this job.
  @if `p20 is 5 then saybar
`$Guard: `%Do you visit here often.
  @if `p20 is 6 then saybar
`$Guard: `%Have you visited Odin's Keep ?
  @if `p20 is 7 then saybar
`$Guard: `%I once worked as a spy for the Koshi.
  @if `p20 is 8 then saybar
`$Guard: `%Talk to the InnKeeper. He is very wise.
  @if `p20 is 9 then saybar
`$Guard: `%I completed a quest in Quester once..
  @if `p20 is 10 then saybar
`$Guard: `%I love to talk ! 
@end
@#NOMORE
;                          Odin's Keep Version 2.00
;                          Here it is as promised !
;                        10.5% better than Version 1.02
;                        Added : Towers in the castle. 
;                        Uses  : Ericsbar.ref
;                      This is the last version folks !
;
;
;
;   Added to CNW NPCs. :)
;
;
@#LAIR
@offmap
@do moveback
@show
`r0`c  `r1  The Dragons Lair `r0
  `2As you walk into the Lair, atop a huge pile of treasure consisting
  of various gold and silver items, sits a 40 foot tall adult, male gold
  dragon. You hear a faint Mooing sound, upon closer inspection you see
  a half eaten cow in the corner of the room.
  
  `0"Greetings, s&sir!  I am Vincent your servant. Where will we be
  flying off to today?" `2the dragon grumbles.
@do `v01 is 1
@do write
`x`x
@choice
Sosen Village
Stonepass Lodge
Bonetown
Flagcity
I'll stay here, thanks
@if responce not 5 then do
  @begin
@show
`c
`\`\  `0"Climb on my back master, it's a good day for flying!" `2Vincent roars.
`k  `2You climb up in the saddle, the magnificent beast lifts off the  
    ground effortlessly. Before too long you are at your destination. A few
    peasants scatter in fear as Vincent makes a soft landing.
  `0"We are here master, watch your back amongst these other humans."
  `2You watch as Vincent's sparkling golden form disappears into the horizon.
`k
@if responce is 1 then do
  @begin
   ;Sosen village
   @do x is 38
   @do y is 5
   @do map is 456
  @end
@if responce is 2 then do
  @begin
   ;Stonepass Lodge
   @do x is 40
   @do y is 11
   @do map is 880
  @end
@if responce is 3 then do
  @begin
   ;Bonetown
   @do x is 53
   @do y is 17
   @do map is 1572
  @end
@if responce is 4 then do
  @begin      
   ;Flagcity
   @do x is 69
   @do y is 19
   @do map is 1092
  @end
  @loadmap &map
  @end
@drawmap
@update
@#NOSWIM
@do saybar
`$The water was too cold, try again tomorrow ...
@end
@#NOMOREFAIRY
 @show
 `r0`c
                     `0"Come back and see me tomorrow" 
`k
  @drawmap
  @update
  @end
@#NOMORE
@#NOMOREWHORE
 @show
`r0`c `r1 Booked solid `r0
 `0"We are booked up until tomorrow." `2he says.
  `2You decide to wait until then.
`\`k
  @drawmap
  @update
  @end
@#DOC
@offmap
@do moveback
@show
`r0`c  `r1  The Healers `r0
  `2The old doc looks you over for wounds carefully.
`k
`k
        `%Your wounds are completely healed!
`k
@do `p02 is `p03
@drawmap
@update
@#NOMORE
;-=-=-=-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
;---------------------------SWIM ROUTINE---------------------------------
;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
@#SWIM
@do moveback
@datanewday swim.idf
@dataload swim.idf &playernum `p20
@if `p20 = 1 then do
@begin
@do goto NOSWIM
@end
@do write
`r1
@clearblock 21 21
@do move 3 21
@do write
`r0`2Do you want to go swimming ? `2[`0Y`2/`0N`2] :`x
@do readspecial `s01 YN
@if `s01 is Y then do
@begin
  @show
`r0`c  `r1  The Swimming Hole `r0
`2You jump into the ice cold water.
`k
`$`lCo`l-`lCo`l-`lCo`l-Cold  Brrrrrr !
`k
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `c`\`\
                            `%YOU FEEL STRONGER !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `c`\`\
                           `%YOU FEEL MORE AGILE !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `c`\`\
                   `%YOU FIND A GEM AT THE BOTTOM OF THE POOL !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `c`\`\
                        `%YOU GAIN 1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `c`\`\
                       `%YOU GAIN 1 EXTRA CHARM POINT !
 `k
 @end
@datasave swim.idf &playernum 1
@drawmap
@update
@closescript
@end
@do saybar
`%You are tired of swimming ! Maybe tomorrow ...
@#NOMORE
;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
;-----------------------FAIRY ROUTINE-------------------------------------
;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
@#FAIRY
@do moveback
@datanewday fairy.idf
@dataload fairy.idf &playernum `p20
@offmap
@if `p20 = 1 then do
 @begin
 @do goto NOMOREFAIRY
 @end
@show
`r0`c `r1 Fairy Garden `r0
  `2You have encountered a fairy bathing in the garden pool.
  `0"Oh no not another human ! Spying on me huh? Now that you've seen me
   I guess I'll have to grant you a wish"`2 she sighs.
`k
@do `v01 is 1
@do write
`x`x
@choice
Make a wish
Try to catch her
Clap your hands
Forget the whole thing
@if responce not 4 then do
@begin
@end
@if responce is 1 then do
  @begin
  ;hopefully randomly gives stuff  ;>
@show
`c
`0"Ok sweetie, close your eyes and make your wish." `2she says smiling.
`k
`2You close your eyes and make a wish
`2When you open your eyes
`2You find `l.`l.`l.`l.
  @do `p21 random 10 1
@if `p21 is 1 then do
 @begin
 @do `i28 + 1
 @show
                               `%a fishing Pole!
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 2 then do
 @begin
 @do `i08 + 1
 @show
                               `%a Berry pie!
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
                               `%a Gem !
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 4 then do 
 @begin
 @do `i01 + 1
 @show
                               `%some Wildberries !
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
                               `%1 extra charm point !
`k
  @datasave fairy.idf &playernum 1
  @end
@if `p21 is 6 then do
 @begin
 @do `i05 + 1
 @show
                               `%a Green Potion !
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 7 then do
 @begin
 @do `i21 + 1
 @show
                               `%a Travel Pass !
          
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 8 then do
 @begin
 @do `i20 + 1
 @show
                               `%a World Map !
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 9 then do 
 @begin
 @do `i40 + 1
 @show
                               `%a Blue Potion !
`k
 @datasave fairy.idf &playernum 1
 @end
@if `p21 is 10 then do
 @begin
 @do `i17 + 1
 @show
                               `%a Gloworm !
         
`k
  @datasave fairy.idf &playernum 1
  @end
@end  
@if responce is 2 then do
  @begin      
  ;She is pissed
  @do `p04 - 1
  @show
`c`2You make a valiant effort to catch the tiny fairy.
`k
`2Your hand connects with a `l.`l.`l.`l.`l.`l. `@VERY ANGRY FAIRY !
`k
`\ `0"That might have worked somewhere else, but HERE us fairies rule!"
  `2she slips out of your grasp, and hits you with her wand
`k
`\               `%YOU LOSE 1 MUSCLE POINT 
`k
  @end
@if responce is 3 then do
 @begin
 @do `p01 + 1
 @show
`c`\ `0"Silly thing"`2! `2she smiles `0"You should only clap if I'm near death!
  `0Here's a gift for being so sweet!"
`k
  `2She waves her wand over you.
`k
`\           `%YOU GAIN AN EXTRA EXPERIENCE POINT !
`k
  @end
 @end
@end
 @end
@drawmap
@update
@end
@#NOMORE
;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
;--------------------------BEGIN BAR ROUTINES-------------------------------
;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
@#MAN2
@do moveback
    @do `p20 random 10 1
    @if `p20 is 1 then saybar
`$Man: `%oDiN is rumored to visit this bar often.
  @if `p20 is 2 then saybar
`$Man: `%I've heard tell of a secret passage here.
  @if `p20 is 3 then saybar
`$Man: `%I like visiting the women companions here..
  @if `p20 is 4 then saybar
`$Man: `%oDiN made this IGM !
  @if `p20 is 5 then saybar
`$Man: `%My name is Tim.
  @if `p20 is 6 then saybar
`$Man: `%Have you visited the Fairy behind the castle ?
  @if `p20 is 7 then saybar
`$Man: `%Buy Odin's Keep it's worth the money.
  @if `p20 is 8 then saybar
`$Man: `%I tried catching the fairy once.
  @if `p20 is 9 then saybar
`$Man: `%I once slew the spirit of the mighty Red Dragon !
  @if `p20 is 10 then saybar
`$Man: `%I'm in love with Yewanda. 
   
@#NOMORE
@#WOMAN1
@do moveback
    @do `p20 random 6 1
    @if `p20 is 1 then saybar
`$Woman: `%I'm in love with oDiN !
  @if `p20 is 2 then saybar
`$Woman: `%I never kiss on the first date.
  @if `p20 is 3 then saybar
`$Woman: `%I found a secret passage here once.
  @if `p20 is 4 then saybar
`$Woman: `%My name is Yin.
  @if `p20 is 5 then saybar
`$Woman: `%The Bartender is a wimp.
  @if `p20 is 6 then saybar
`$Woman: `%The fire sure adds romance.
@#NOMORE
@#DRUNK
@do moveback
    @do `p20 random 6 1
    @if `p20 is 1 then saybar
`$Drunk: `%Buurrrrpppp ! 
  @if `p20 is 2 then saybar
`$Drunk: `%Give me lib-er-tea or gimmi -hic-  sex.
  @if `p20 is 3 then saybar
`$Drunk: `%How dry I -hic- am.
  @if `p20 is 4 then saybar
`$Drunk: `%Bring on the dancing -hic- gals.
  @if `p20 is 5 then saybar
`$Drunk: `%Glad to meet all six of you -hic-.
  @if `p20 is 6 then saybar
`$Drunk: `%The -hic- drinks are free here !
@#NOMORE
@#BARDRINK
@do `v01 is 1
@show
`r0`c `r1 Pick your poison `r0
 `0"Whatta ya want ?"
@do write
`x
@choice
oDiN's Ale
Ben's Beer
Wispy Whisky
Eric's Cure all
I'm not thirsty
@if responce is 1 then do
@begin
@show
`\`c
                          `2Eric hands you the Ale.`l.`l.`l.
`\`k
                `$Ahhh. That hit the spot. Better than a blu moon !
`\`k
@end
@if responce is 2 then do
@begin
@show
`\`c
                          `2Eric hands you the beer.`l.`l.`l.
`\`k
                      `$Burppp... Better than a Budweezer !
`\`k
@end
@if responce is 3 then do
@begin
@show
`\`c
                         `2Eric hands you the whiskey.`l.`l.`l.
`\`k
                 `$Ewww...Ahhh.... St`l-`lSt`l-`ltrong stuff!  WOW !
`\`k
@end
@if responce is 4 then do
    @begin
@show
`\`c
                     `2Eric hands you his special concoction.
                    `0"Enjoy it! `2he says laughing.
`\`k
                  `2You quaff down the strong smelling drink.`l.`l.`l.
`\`k
                     `$St`l-St`l-St`l-St`l-St-rong stuff !
`\`k
         `2You feel Strange.`l.`l.`l.`l.everything is blurry.`l.`l.`l.`l.you feel
         yourself slipping away into darkness.`l.`l.`l.`l.`l.`l.`l.`l.`l.
`k
 @run SPIRIT in ericsbar.ref 
 @end
@drawmap
@update
@end
@#NOMORE
@#BARTENDER
@do moveback
@do `v01 is 1
@show
`r0`c  `r1 Eric the Bartender `r0
  `0"What can I help you with s&boy ?"
@do write
`x`x
@choice
Order a drink
Ask Eric about his bar
Conduct business with Eric
Trade in gems for potions
Leave
@if responce is 1 then goto BARDRINK
@end
@if responce is 2 then do
 @begin
 @show
`\`c
 `0"I built this place back when I used to own Odin's keep. I always wanted
  my own bar, but never could afford to build it.
  I'm real careful with my money now though, I got it hid away real good."
 `%"Um-Uh That's nice.." `2you say boringly. `%"Gotta go now.."
`k
@end
@if responce is 3 then do
  @begin
  @do `p20 is 1
  @run getquest in quest.ref
  @end
@if response is 4 then do
@begin
;3 gems for `i54 Silver potion,  3 gems for `i53 Gold, `i52 red.
 @if `p19 < 3 then do
   @begin
   @show
`\`\  `0"Hey, you need at least three gems to get a potion!"
`\`k
   @do goto bartender
   @end
  @do `v01 is 1
  @show
`\`\  `0"Okay, what kind a potion you want?"`2
  @do write
  `x`x
  @choice
Silver Potion
Gold Potion
Red Potion
   @if response is 1 then do
    @begin
    @do `p19 - 3
    @do `i54 + 1
    @show
`\`\  `0"Alright, there you go"`2
`\`k
    @end
   @if response is 2 then do
    @begin
    @do `p19 - 3
    @do `i53 + 1
    @show
`\`\  `0"Alright, there you go"`2
`\`k
    @end
   @if response is 3 then do
    @begin
    @do `p19 - 3
    @do `i52 + 1
    @show
`\`\  `0"Alright, there you go"`2
`\`k
    @end
  @end
@drawmap
@update
@#SEXPRISEF1
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l`l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEF2
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your wild love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your wild love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your wild love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your wild love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your wild love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEF3
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEF4
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your flawless love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEF5
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your probing love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your probing love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your probing love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your probing love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your probing love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#WOMAN
@show
`r0`c `r1 A Woman's Touch `r0
 `2You enjoy a Woman's Touch. You are led into a room full of
 different kinds of women, all are beyond beautiful. 
`0"Take your Pick s&man" `2he urges.
   
@do `v01 is 1
@do write
`x
@choice
Carlina-Puerto Rican Beauty
Yewanda-African Princess
Marilyn-Blonde "All American" Bombshell
Bibianna-Indian love goddess
Yuko-Asian love slave
Lisa-Mutt but what a butt
Leave this place
 
@if responce not 7 then do
@begin
@end
@if responce is 1 then do
 @begin
 @show
`r0`c  `r1`% Fun with Karlita `r0
`0"I won't disappoint you s&man " `2she says smiling.
`\`2Karlita leads you into a back room to a comfortable looking bed.
`k`c  `r1  Aye Karumba `r0
 `2You spend what seems like hours in pure sexual delight, exploring every   
 possible love making technique. 
  
`k  
 `2When it's all over you get up, and get dressed. Knowing that you'll
 savor this experience for a long time. Karlita gives you one last 
 long kiss. `0"Adios lover" `2she says as she walks out of the bedroom.
`k
@do goto SEXPRISEF1
@end
@if responce is 2 then do
 @begin
 @show
`r0`c  `r1`% Fun with Yewanda `r0
`0"Love awaits s&man " `2she says smiling.
`\`2Yewanda leads you into a back room to a comfortable looking bed.
`k`c  `r1 Ritual Passion `r0
 `2Yewanda pounces on you like a wild cat. You gently grab her wrists and
 show her a few of the finer points of sex.    
  
`k  
 `2When it's all over you get up, and get dressed. Still soaked with
 sweat from your wild ride. Yewanda licks your face, 
`0"Let's do this again soon" `2she says as she prances out of the bedroom.
`k
@do goto SEXPRISEF2
 @end
@if responce is 3 then do
 @begin
 @show
`r0`c  `r1`% Fun with Marilyn `r0
`0"Ewww ww your are a sexy s&man " `2she says licking her lips.
`\`2Marilyn leads you into a back room to a comfortable looking bed.
`k`c  `r1 Sex with a Legend `r0
 `2As Marilyn undresses you discover all that you heard about her was    
 true, and then some. She purrs and moans while you take her
 again and again.
  
`k  
 `2When it's all over you get up, and get dressed. You can't wait 
 to run go tell your friends about it. Marilyn blows you a kiss. 
`0"Come back and see me sexy, mmm." `2she says as she swishes out
 of the bedroom.
`k
@do goto SEXPRISEF3
 @end
@if responce is 4 then do
 @begin
 @show
`r0`c  `r1`% Fun with BiBiAnna `r0
`0"I want your hot sex s&man " `2she says smiling.
`\`2BiBiAnna leads you into a back room to a comfortable looking bed.
`k`c  `r1 Sheeva Awakens `r0
 `2She takes you to an astral plane with her superb style. 
 You are completely at her whim as you reach your climax repeatedly. 
  
`k  
 `2When it's all over you get up, and get dressed. Wondering if 
 she is a mere mortal.  
 `0"Goodbye, see me again" she says as she walks out of the bedroom.
`k
@do goto SEXPRISEF4
 @end
@if responce is 6 then do
 @begin
 @show
`r0`c  `r1`% Fun with Yuko `r0
`0"I know you can tame me." `2she says smiling.
`\`2Yuko leads you into a back room to a comfortable looking bed.
`k`c  `r1  Eastern Delight `r0
 `2You probe deep into this beauty's sexual being. You gasp for breath     
 as she works her body up and down in unison with yours. 
  
`k  
 `2When it's all over you get up, and get dressed. You'll never 
 be the same. You are now an asian master lover.
`0"So long master" `2she says as she walks out of the bedroom.
`k
@do goto SEXPRISEF5
@end
@if responce is 6 then do
 @begin
 @show
`r0`c  `r1`% Fun with Lisa `r0
`0"I think I could love a s&man like you." `2she says smiling.
`\`2Lisa leads you into a back room to a comfortable looking bed.
`k`c  `r1  Best Buns `r0
 `2You probe deep into this beauty's sexual being. You gasp for breath     
 as she works her body up and down in unison with yours. 
  
`k  
 `2When it's all over you get up, and get dressed. You'll never 
 be the same. You are now a butt lover.
`0"So long lover" `2she says as she walks out of the bedroom.
`k
@do goto SEXPRISEF6
@end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEM1
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your superb love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your superb love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your superb love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l`l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your superb love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your superb love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEM2
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your cat-like love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your cat-like love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your cat-like love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your cat-like love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your cat-like love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEM3
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your love making with a legend you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEM4
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your enriching love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your enriching love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your enriching love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your enriching love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your enriching love making you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#SEXPRISEM5
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#SEXPRISEM6
@do `p21 random 5 1
@if `p21 is 1 then do
 @begin
 @do `p04 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 STRENGTH POINT !
 `k
  @end
@if `p21 is 2 then do
 @begin
 @do `p05 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 DODGE POINT !
 `k
 @end
@if `p21 is 3 then do
 @begin
 @do `p19 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 GEM !
 `k
 @end
@if `p21 is 4 then do 
 @begin
 @do `p03 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA HITPOINT !
 `k
 @end
@if `p21 is 5 then do
 @begin
 @do `p08 + 1
 @show
 `2For your phreaking you gain `l.`l.`l.`l.`l.`l.`l.
 `\ `l.`l.`l.`l.`l.`l.`l.`l.`%1 EXTRA CHARM POINT !
 `k
 @end
@drawmap
@update
@end
@#NOMORE
@#MAN
@show
`r0`c `r1 A Man's Touch `r0
 `2You Love Men. You are led into a room full of
 different kinds of men, all are beyond handsome. 
`0"Take your Pick s&man" `2he urges.
   
@do `v01 is 1
@do write
`x
@choice
Juan-Puerto Rican Stud
Jamal-African Power House
Peter-also known as oDiN
Raj-Indian love god
Seth-Mixed Breed Mack Daddy
Leave this place
 
@if responce not 6 then do
@begin
@end
@if responce is 1 then do
 @begin
 @show
`r0`c  `r1`% Fun with Juan `r0
`0"I need a s&man like you." `2he says smiling.
`\`2Juan leads you into a back room to a comfortable looking bed.
`k`c  `r1  Aye Karumba `r0
 `2You spend what seems like hours in pure sexual delight, exploring every   
 possible love making technique. 
  
`k  
 `2When it's all over you get up, and get dressed. Knowing that you'll
 savor this experience for a long time. Juan gives you one last 
 long kiss. `0"Adios my lover" `2he says as he walks out of the bedroom.
`k
@do goto SEXPRISEM1
@end
@if responce is 2 then do
 @begin
 @show
`r0`c  `r1`% Fun with Jamal `r0
`0"Love waits for no s&man." `2he says laughing.
`\`2Jamal leads you into a back room to a comfortable looking bed.
`k`c  `r1 Ritual Passion `r0
 `2Jamal pounces on you like a wild cat. You gently grab his shoulders and
 show him a few of the finer points of sex.    
  
`k  
 `2When it's all over you get up, and get dressed. Still soaked with
 sweat from your wild ride. Jamal licks your face, 
`0"Let's do this again soon" `2he says as he struts out of the bedroom.
`k
@do goto SEXPRISEM2
 @end
@if responce is 3 then do
 @begin
 @show
`r0`c  `r1`% Fun with Peter `r0
`0"I'm only doing this for the hell of it. " `2he says, grinning.
`\`2Peter leads you into a back room to a comfortable looking bed.
`k`c  `r1 Sex with a Legend `r0
 `2You can't believe this man's stamina, as he pleases you in ways    
 you've only imagined. 
   
`k  
 `2When it's all over you get up, and get dressed. You can't wait 
 to run go tell your friends about it.  
`0"Come back and see me ." `2he says as he eases out of the bedroom.
`k
@do goto SEXPRISEM3
 @end
@if responce is 4 then do
 @begin
 @show
`r0`c  `r1`% Fun with Raj `r0
`0"A s&man like you is hard to find." `2he says smiling.
`\`2Raj leads you into a back room to a comfortable looking bed.
`k`c  `r1 Ganesh Awakens `r0
 `2He takes your breath away with his superb style. 
 You are completely at his whim as you reach your climax repeatedly. 
  
`k  
 `2When it's all over you get up, and get dressed. Wondering if 
 he is a mere mortal.  
 `0"Goodbye, see me again" he says as he walks out of the bedroom.
`k
@do goto SEXPRISEM4
 @end
@if responce is 5 then do
 ;Seth, Gotta Love it huh? :>
 ;    oDiN
 @begin
 @show
`r0`c  `r1`% Fun with Seth `r0
`0"With a s&man like you, this will be fun." `2he says smiling.
`\`2Seth leads you into a back room to a comfortable looking bed.
`k`c  `r1  LORD FREAK `r0
 `2You can't get over how lucky you are to make it with the      
 creator of LORD. His flawless routines leave you breathless. 
  
`k  
 `2When it's all over you get up, and get dressed. You'll never 
 be the same. You decide to come back for more.
`0"E-mail me baby" `2he says as he walks out of the bedroom.
`k
@do goto SEXPRISEM5
@end
@drawmap
@update
@end
@#NOMORE
@#WHATEVER
@show
`r0`c `r1 Male or Female `r0
  `2You can't make up your mind. 
     
 `0"Do a little soul searching s&man ! Come back when you've made up
  your mind" `2the man says giggling.
   
`k
@drawmap
@update
@end
@#NOMORE
@#COMPARED
@do moveback
@offmap
@show
`r0`c `r1 Companion For Rent `r0
 `2You find yourself longing for the touch of another.
 Your guide leads you to a large room, he turns around and faces you.
`0"Listen up s&man ! We got ONLY the cleanest, best who..Ur..Mmm companions
 this side of heaven, Whatta ya need ?"
   
`k
@do `v01 is 1
@do write
`x
@choice
I like women
I want a man
I'll take whatever I can get
I do good with myself
@if responce not 4 then do
@begin
@end
@if responce is 1 then do
    @begin
    @do goto WOMAN
    @end
@if responce is 2 then do
   @begin
   @do goto MAN
   @end
@if responce is 3 then do
   @begin
   @do goto WHATEVER
   @end
@end
@drawmap
@update
@end
@#NOMORE
@#PIMPDADDY
@do moveback
@offmap
;I love this part
@datanewday compadre.idf
@dataload compadre.idf &playernum `p20
@if `p20 = 1 then do
@begin
@do goto NOMOREWHORE
@end
@datasave compadre.idf &playernum 1
@if `v06 is 1 then do
 @begin
 ;Clean mode is on - you don't know what you're missing dude or dudette 
 @do saybar
Sorry but your Sysop has selected clean mode for this game. 
 @closescript
 @end
@show
`r0`c  `r1`% Gueedo the Pimp `r0
 `2A surly looking man approaches you.
`0"You found the right place if you're looking for a nice, clean, male or
 female companion. The best method of relaxation at the best price.
 Only `$$50 `0bucks."
@do write
`x`x
@do `v01 is 1
@choice
Yea, I'll try it out
I don't think so
@if responce = 2 then do
  @begin
   @drawmap
   @update
   @end
@if responce is 1 then do
  @begin
  @if money < 50 then do
    @begin
    @show
`\`c
 `0"You stupid idiot ! You can't afford it ! Come back and see us
  when you have the money" `2he says, frowning.
`k
  @drawmap
   @update
    @closescript
   @end
  @do `p30 is 3 
  @do `v40 is 50
  @routine deposit in vaults.ref
 @do money - 50
  ;Gives player 1 lay point don't matter if they chicken out- at least they
  ;paid for it.
  @do `p34 + 1
  @do goto COMPARED
  @drawmap
   @update
  @closescript
 @end
@#NOMORE
@#GRAFFITTI
;Thanks ring out to Seth for the template :>
@do moveback
@busy
@show
`r0`c  `r1  THE GRAFFITTI WALL  `r0
@if wall.txt exist false then do
 @begin
 @writefile wall.txt
  `%oDiN `2: `0Hello ladies !
 @end
@if wall.txt exist true then do
 @begin
 @displayfile wall.txt
 @end
@show
@
(Do tricky stuff with name to determine how much they can type)
@DO `s04 is `%
@DO `s04 add `n
@DO STRIP `s04 <-- Strips all none color ` codes out
@DO `s04 add `x`2:`x`0
@DO `p20 is length `s04
@DO `p21 is 76
@DO `p21 - `p20
@DO WRITE
  `2Enter a special message or `0ENTER`2 to abort.`\  `s04
@DO READSTRING `p21 NIL `s03 <--Read string, NIL is default. (nothing)
@do stripbad `s03
@SHOW
@DO `p24 is length `s03
@IF `p24 less 3 then do
 @begin
 @drawmap
 @update
 @closescript
 @end
   
 @writefile wall.txt
  `%`n`2 : `0`s03
 @do trim wall.txt 17
 @drawmap
 @update
@#WEAPONS
@offmap
@do moveback
@label weapons
@show
`r0`c `r1 `%Odin's Weapons, Armor and General Goods `r0
  `2A scruffy looking blacksmith approaches
 `0"Waddaya need today?" `2he asks.
 
@do `v01 is 1
@do write
`x
@choice
Examine his Weaponry
Check out the Armory
List other Goods
Sell something
Leave
@show
`\`c
@if responce is 1 then do begin
 @begin
@buymanager
  60
  49
  39
  58
  @end
@if responce is 2 then do begin
 @begin
@buymanager
  37
  59
  62
  68
  @end
@if responce is 3 then do begin
 @begin
@buymanager
  3
  17
  20
  5
  40
  50
  @end
@if responce is 4 then do begin
 @begin
 @clearblock 8 14
 @do move 1 7
 @sellmanager
  @end
@if responce not 5 then goto WEAPONS
@drawmap
@update
@end
@#NOMORE
@#BAR
@do x is 73
@do y is 19
@do map is 796
@loadmap 796
@do goto DONE
;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;-------------------------END BAR ROUTINES---------------------------------
;-=-=-=-=-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
@#GUARD
@do moveback
@label startg
@if keep.dat exist false then do
  @begin
  @do saybar
`0 "You have 5 seconds to make yourself scarce!" `2the guard barks.
  @closescript
  @end
@readfile keep.dat
`p20
`s01
@
@if `p20 not &playernum then do
  @begin
  @do saybar
You nod to the door guard, he gives you a Stoney stare.
  @closescript
  @end
@busy
@do `v01 is 1 ;set default choice to 1
@show
`r0`c  `r1 Instructing your servants `r0
`2 As you approach, the huge door guard snaps to attention when he
   sees you are going to speak to him.
@do write
`x`x
@choice
Set password to gain entrance (currently is `0`s01`%)
Ownership options
`%Make `#Odin's Keep `%your home
Leave
@if responce is 3 then do
        @begin
        @do `p69 is 27
        @show
`r0`c
   `#Odin's Keep `%is now home sweet home.
       @key
       @end
@if responce is 2 then do
 @begin
 @show
`r0`c  `r1 Ownership Options `r0
  `2You retrieve your deed and carefully look it over.
   
   @do `v01 is 1
   @do write
`x`x
   @choice
Transfer deed to someone else
Sell property back to the bank for `$25000`%.
Do nothing of the sort
 @if response is 1 then do
   @begin
   @show
`\`\  `2Transfer to whom?
   @chooseplayer `p20
   @if `p20 is 0 then do
    @begin
    @show
  `2You decide to keep your domain - for now.`\`\`k
    @do goto startg
    @end
   @do `s02 is getname `p20
   @show
`2  Are you sure you wish to give your property to `0`s02`2?
@do write
`x`x
@choice
Yes
Not on your life.
 @if responce is 2 then do
   @begin
    @show
`\`\  `2You decide to keep your domain - for now.`\`\`k
    @do goto startg
   @end
  @do delete keep.dat
  @writefile keep.dat
`p20
`s01
0
0
0
0
   @writefile mail\mail`p20.dat
  `0Business note:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 has transferred ownership of Odin's Keep to you. 
  Password to enter will remain `0"`s01"`2 unless
  `2you come by and change it.
    @do addlog
  `0`n`2 has given `%Odin's Keep`2 to `0`s02`2!
     @routine seperate in gametxt.ref
    @show
`\`\  `2Deed transferred.  Oh well - it was fun while it lasted.`\`\`k
   @do goto done
   @end
  @if response is 2 then do
    @begin
    @show
`\`\`2  Are you sure you wish to sell your property back to the bank?`\
@do `v01 is 1
@do write
`x`x
@choice
Yes
Not in this lifetime !
 @if responce is 2 then do
   @begin
    @show
`\`\  `2You decide to keep your domain - for now.`\`\`k
    @do goto startg
   @end
  @do delete keep.dat
  @do `p30 is 3 
  @do `v40 is 25000
  @routine widthdraw in vaults.ref
  @do money + 25000
  @show
`\`\  `%PROPERTY SOLD!`2`\`\`k
    @do addlog
  `0`n`2 has sold `%Odin's Keep`2 back to the bank!
    @routine seperate in gametxt.ref
    @do goto done
    @end
  @do goto startg
 @end
@if responce is 1 then do
  @begin
  @do write
`\`\  `0"And the new password, s&sir?" `2(enter `4NONE`2 for no access to anyone)`\ 
`2Password:`x
  @do readstring 40 `s01 `s01 
  @do `p20 is length `s01
  @if `p20 < 2 then do
   @begin
   @show
`\`\  `2You decide the current password is ok.`\`\`k
   @do goto startg
   @end
  @do delete keep.dat
  @writefile keep.dat
&playernum
`s01
0
0
0
0
@show
`\`\  `0"Yes s&sir, I will not forget it!" `2the guard promises.`\`\`k
   @do goto startg
  @end
@drawmap
@update
@#SIGN
@do moveback
 @if keep.dat exist false then do
 @begin
 @do saybar
Odin's Keep - For sale inquire within
 @end 
@if keep.dat exist true then do
 @begin
@readfile keep.dat
`p20
`s01
@do `s01 is getname `p20
 @do saybar
`%Welcome to Odin's Keep - Property of `0`s01`%.
 @end 
@#SIGN2
;No I'm really not vain - just ran outta ideas :>
@do moveback
    @do `p20 random 10 1
    @if `p20 is 1 then saybar
`$oDiN: `%I went swimming- WOW -I feel better !
  @if `p20 is 2 then saybar
`$oDiN: `%Visit Eric's bar, it rocks !
  @if `p20 is 3 then saybar
`$oDiN: `%Led Zepplin rocks !
  @if `p20 is 4 then saybar
`$oDiN: `%I made this IGM !
  @if `p20 is 5 then saybar
`$oDiN: `%Carlos is in prison !
  @if `p20 is 6 then saybar
`$oDiN: `%Have you visited the Fairy behind the Castle ?
  @if `p20 is 7 then saybar
`$oDiN: `%Smashing Pumpkins song, "EYE" rules.
  @if `p20 is 8 then saybar
`$oDiN: `%I caught the fairy !
  @if `p20 is 9 then saybar
`$oDiN: `%I Love Yin, have you seen her ?
  @if `p20 is 10 then saybar
`$oDiN: `%Calypso made Audacity BBS. 
   
  
@#SIGN3
@do moveback
@do saybar
`@The Dragon's Lair
@end
@#SIGN4
@do moveback
@do saybar
`$The Healer's Hut
@end
@#ENTER
@do moveback
@offmap
@if keep.dat exist false then do
  @begin
  @show
`r0`c  `r1 `%For Sale `r0
  `2Odin's Keep rumored to have been created by it's namesake
  hundreds of years ago.
  Comes fully stocked with the following :
  `0* `2You're very own pet Dragon "Vincent" , who will fly you to
    `0Porttown`2, `0Sosen Village`2, `0Flagcity`2, `0etc.`2!
  `0* `2The meanest, toughest Guard you've ever seen
  
  `0* `2A private doc, to patch up your wounds !
  `0* `2Much.. much.. more included ! 
  `2The asking price is `$$50,000`2.
@do `v01 is 1
@do write
`x`x
@choice
>&money 49999 Buy it ! What a bargain !
<&money 50000 Mark it on your map and come back later to buy it.
>&money 49999 Leave.
@
@if responce is 1 then do
  @begin
  @if keep.dat exist true then do
    @begin
    @show
`\`\  `2Oh hells bells!  Someone  else bought it while you weren't looking
  You could kick yourself for letting this slip by. .`\`\`k
    @do goto done
    @end
  @writefile keep.dat
&playernum
NONE
0
0
0
0
  @do `p30 is 3 
  @do `v40 is 50000
  @routine deposit in vaults.ref
    @do money - 50000
    @do addlog
  `0`n `2buys `%Odin's Keep`2!
     @routine seperate in gametxt.ref
  @show
`r0`c  `r1 `%Why hello there, landowner! `r0
`\`2  Nice job!  You now own this property!
  `2Enjoy your new home.`\`\`k
  @end
@label done
@drawmap
@update
@closescript
  @end
@readfile keep.dat
`p20
`s01
@
@do `p21 is deleted `p20
@if `p21 is 1 then do
  @begin
    @do delete keep.dat
    @do addlog
  `%Odin's Keep`2 is put on the market today.
     @routine seperate in gametxt.ref
   @do goto enter
  @end
@if `p20 not &playernum then do
  @begin
  @do `s02 is getname `p20
  @do upcase `s01
  @if `s01 is NONE then do
   @begin
   @show
`r0`c  `r1 None shall pass `r0
  `2You pound on the door for some time before you get an answer.
  `0"Master `s02`0 has declared that `4NO`0 visitors shall be allowed!" `2a
  voice calls from behind the wall.
`\`k
   @update
   @drawmap
   @closescript
   @do goto done
   @end
  @show
`r0`c  `r1 Stand and unfold thyself `r0
`2  A head pops over the gate.  `0"Halt, you!  What business have you with
  my lord and master, `%`s02`0?" `2the door guard asks.
@do write
`x`x
@do `v01 is 1
@choice
Offer an explanation.
Visit later.
  @if response is 1 then do
   @begin
   @do write
`\`\  `2Say what? :`x
  @do readstring 40 NIL `s03 
  @do upcase `s03
  @do upcase `s01
  @if `s03 is `s01 then do
    @begin
    @show
`\`\  `0"Welcome to `%Odin's Keep`0,"`2 the guard frowns as he opens the gate.`\`\`k
    @do goto letmein
    @end
   @writefile mail\mail`p20.dat
  `0Odin's Keep Reports:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 attempted to sweet talk the guard by saying
  `0"`s03"`2.  `2He was `bNOT`2 allowed in.
   @show
`\`\  `2The guard doesn't look too interested.`\`\`k
   @do goto done
   @end
  @do goto done
  @end
;let him in
@label letmein
@do x is 73
@do y is 19
@do map is 796
@loadmap 796
@do goto done
@#done
@drawmap
@closescript
@end
@NOMORE
;File for the Eastern Stone Path area & stuff.
@#lodgeansi
@pauseoff
@show
`r0[2J[0;1;34;44m°°[0;34mÛÛÛÛÛÛÛÛÛÛÛÛÛÛ²ßß[37m [34m [37m  [1;31m [3C
[A[27C[30m°[0m  [34mÜÜ[30;44m°[34;40mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛßß[37m [33m
[A[53CÜÜ°[37m [33mÜ²±[37m [33m²± [37m [33m°±[1;30m° [0;33m   
[34mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[30;44m°[34;40m°[1;30mß[44m²[40m°[0;33m [34m 
[A[22C[33m  [34m [33m°[1;30mþ°[0;30;44m°[34;40mÛ[30;44m [34;40mÛ
[A[32CÛÛÛÛÛÛÛÛÛÛÛÛÛÛßß [33m ß°[1;30m°[0;33m²±[1;30m°[0m [33m°±°
[A[60C[1;30m°[0;33m°±° [37m [33m°°[1;30m°°[0;33m°°[37m [33m 
[34mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛßß [1;30m°  [0;34m    ÜÜÜ²ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÝÜ²ÛÛ
[A[51C[37m  [33m°[37m [1;30mÜÜ[0m [33mß[3C°[37m [1;30mßß[0m 
[A[67C[1;30m°[0m [1;30m°[0m [1;30m°°[0m [1;30m°
[0;34mÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[30;44m°[34;40mÛ[37m °[1;30mÜ[3C[0m°[1;30m°
[A[24C[0m    [34mÞ[1;44m°°[0;34mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÝ[11C[1;30m  Ü
[A[66CÜ
[0;34mÛÛÛÛÛÛÛÛÛÛßßßßßß[37m  [1;30mßß[8C[0;34mßßßßßÛ[1;44m°[0;34mÛÛÛ
[A[38CÛÛÛÛÛÛÛÛÛÛÛÛÛÝ[37m °[1;30m°[6Cß[0mÜ[1m±[0m Ü [1;30mß
[0;34mÛÛÛÛÛÛß [37m    [34m [1;30mß[6C °[0m [31m  [33mÜÜ°[37m 
[A[29C[33m²Û[1;43m°[0;33mÜ[37m [33mÜÜÜ[37m [34mßßßßßÛÛÛÛÛÛÛÛ[37m
[A[51C  [1;30m°[6C°[37;47m²±°[0m [1;47m±[36m°[0mÝ[1;30mÞÝ
[0;34mÛÛ[1;44m°[0;34mßß[3C[33mÜÜÜ Ü[1;30m°°°[31;43m°[0;33mÛ²²ß
[A[21C[37m  [33mßßÛ² [37m [33m°°²±° [1;31;43m°[0;33m²[1;37;43m°[40m
[A[38C[43m[0;33m°°[1;43m°[37m°[0;33mÜÜ[37m [33mÜÜ[34m ßßß[37m 
[A[52C[1;30m°[7C[0;33m°[1;37mÜ[0mÜÜ[1m [0mÜÜÜ [1;30m±
[0;34mÛÛß [37m [1;30mß°[31;43m°[0;33m²²°° [37m  [33m°ß±°°[37m  
[A[22C[1;30mß°°[3C[0m [33m  °[37m  [33m° °°[37m  [33m°°±° °°±
[A[48C[1;43m°[37m°[0;33mß[37m [33m°ÜÜÜ[37m [4CÞ[1;47m²[40m±[0m
[A[64C [1;47m²±[0mÝ[1;30m°
[0;34mÛÝ [1;30m°[0m  [1;30m°°[0;33m°°[37m  [1;30m°°[4C[0;33mÜÜÜ
[A[21C[37m [33m°²ÜÜÛ²[37m  [33mÜÜÜ²±[37m  [33mÜÜ[3C° [3C°°°[3C°
[A[54C±²[1;43m°[37m°[0;33m°[37m [33m°Ü[37m ß
[34mÛÝ[1;30mß[3C°[0m [33mÜÜ[1;31;43m°[0;33m²²Ü[37m [33mß²
[A[17C[1;31;43m°[0;33mÛ²²[37m  [33m°°²²°[37m [33m°±[1;31;43m°[40m
[A[32C[43m[0;33m²±°[37m [33m°[1;31;43m°[0;33m²²°°[37m [33m°²
[A[45C[1;43m°[0;33mÜÜ[3CÜ[3C°°[3Cß°[37m  [33mÜÜ
[1;34;44m°[0;34m [1;30mÝ[0;34m [37m  [1;30m°[0m [33m²²±°°[37m 
[A[14C[1;30m°[0m [33m°°±°[37m [33m°[6CÜ[37m  [33m°°[6Cß°[4C°°
[A[47C[37m  [33m ±²°°[37m [33mÜÜ[37m  [33mÜ[4C±°[37m  [33mß±Ü
[A[71C[37m °°
[34mÛ [1;30m°[0;34m [3C[1;30m°[0;33mß°[4C[1;31;43m°[0;33mÜÜ[5CÜ
[A[23C[1;31;43m°[0;33m²ÜÜ[37m [33m°²ÜÜ[37m [33mÜ[1;31;43m°[0;33m
[A[35C²²[1;30m [0;33m°²ÜÜ[37m [1;31;43m°[0;33mÜÜ °°Ü[37m  [33m°°
[A[54C[37m [33m°²±[37m [1;31;43m°[33m°[0;33m°[37m  [33m°[3C°°
[34mÛ [1;30m°°[0;34m [5C[33m°[1;30m [0m [33m°Û²²ß[37m [33m°°[3C
[A[24C°°[3C°²°[37m [33m°±±°[37m [33m ±°°[37m [33m°²°[37m [33m²Û
[A[49C°[37m [33m°ÜÜ[37m [33m ° [37m [33m°°[6C  
[34mÛÛÜÜ[4C[1;30m°[5C[0;33m°°[12C[1;30mÜÜ[3C°[0m [33m°[37m  
[A[38C[1;30mÜ[0;33m°[37m [1;30m°°[0m [33m°[3C°[3C°²°[37m  [33m
[A[57C°°[4C[37m              
[34mÛÛ[1;44m°[0;34mÝ[4C[1;33mÜ[0m [1;33mÜ[11C[30mßß[26Cßß[3CßßÜ
[A[58CÜ°°[0;34m [1;30m°[C[0m              
[34mÛ[1;44mß[0;34mÛÝ[37m  [33m°[1mÞ[43m°[40m°ÞÝ[0m  [1;30mÜ[6C°
[A[22C°[3C[0m [15C[34m   [19C[37m               
[A[79C [34mß[37m  [34mß[37m [3C[33m°[1mß[5C[30m°[7C[33mÜÜ[0m
[A[25Cß [1;33mÜÜ[9C[30m°[10C [0;34m    [33m°[34m   [1;30m [4C
[A[63C[0m            
[34m°[37m °[34m°[37m [1;30m°[9C°[5C[0m°[1;33mÞ[37;43mÛÛ[33;40mÝ
[A[26CÞ[43m²[40m²[0m°[19C[34m [1;30m [33mÜÛ[37;41mÛ[0;34m 
[A[55C[1;33mÜ[0mßß°[3CYou see a warm
[34mÝ[37m  [34mÞ[37m [1;30m°[6C[0m [33m°[37m  [1;30m°[4C[0;33m
[A[21C°[1mßßß[0m°[1;33m ßß°[17C°[0m [33m°[34m [1;33;41m²[40mÛßÞ
[A[55CÛ[37;41mÛ[33m²[0;34m [3C[37mlittle Lodge!
[34m±[37m  [34mÞ [7C[37mÜ°[8C[1;33mÜÛ[37;43mÛ[33;40mÝÞ[37;43mÛ[40m
[A[28C[43m[33;40mÜ[0m [33m°[37m  [1;33m°[15C[30m [33mÜÜÜ[0m°
[A[54C[34m [1;33mßß[30m [0;33m°
[34m [37m  [34m²[1;33m [30mß[8C[0;33m±[37m  [1;30m°[4C[33mß
[A[23C[43m²[40mß[0m [1;33mß[43m²[40mß[0m  [1;30m°°[12C°°[0m   
[A[50C[1;33mÞ[43m²[37;41mÛ[33;40mÝÞ[43m²[40mÝ[0;33mÞ[37m°[3CYum
[A[65C, something
[34m [37m  [34m°[10C[33m°[37m  [1;30m°[4C[0;33mß ÜÜ[37m [33mÜ°°
[A[30C[3C[1;30m°°[14C[33m [0mß[1;33mßß [0;34m [1;33mßß[0;34m  
[A[59C[3C[37msmells good[C     
[A[79C [5C[1;30m°[8C[0;33m°[37m  [1;30m°[9C[0;33m  [20C[34m  
[A[51C[37m [33mßßß°°°[34m [3C[37minside! `k
@
@#cloudtable
@do moveback
@if `i34 > 0 then do
  @begin
  @do saybar
`%Your hand passes through the table.  It is empty.
  @closescript
  @end
@do saybar
`%You find a Cloud Sword on the table! (AND 5 QUEST POINTS!)
@do `i34 = 1
@do `p18 + 5
@#showangel
@pauseoff
@show
[2J[0mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ  [35mÜß[1mÜ[0;35mÜ[1;45m°°°°±°[0;35mÜ
[A[32C[1;45m°±°[0;35mÛÜß[1;30;45m°°[0m [35mß[37m [35mÛÜÜÛßßßßß
[A[52C[1;45m²±°[0;35mÛ[1;45m°[0;35mÛß[1;45m°[0;35mÛÝ[1;45m±±±°[40m
[A[66C[45m[0;35mÛÛ[37m [1;35;45m±°[0;35mÛÞÛÛÛ[1;30;45m°°[0m 
[A[79C[1;30m°[0mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;47m [0mÝ  [1;35;45m²²±±±°°[40m
[A[28C[45m[0;35mßÜÛßß[1;45m°[0;35mÜÜÜ[1;30;45m°°±[0;35mÝÜ[37m 
[A[43C[35mß[4C[33mÜÜÜ[3C[35mßßß[1;45m²°[0;35mßÛÛ [1;45m²±°[40m
[A[66C[45m[0;35mÛ[1;45m°[0;35mÝÞ[1;45m°[0;35mÛÞÛÛÛÛ[1;45m°[0;35mÛ
[A[79C[37m ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ [1;35m [45mÛÛ²²±±[0;35mß [1;45m°°°[40m
[A[31C[45m[0;35mÛÛß [33m [35m ß[1;30;45m±[0;35m±ßßß[37m [33m°Ü
[A[46C[1;31;43m²ÜÛ[40mÛ[43mÛÛ²[40mÜÜ[3C[0;35mß[1;45m°[0;35mÛÛÝÞ
[A[64C[1;45m²±° [0;35mÛ[37m [1;35;45m°[0;35mÝ[1;30;45m°[0;35mÛÛÛ
[A[76C[1;45m°±°[40m
[A[79C[0;35mÝ[37mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÝ [1;35mÞ[45mÛ²²±[0;35mß[1mÜ
[A[26C[45m±°°[34m [35m [0;35mßÛÝ [33m²Ü[35m [37m  [33mÜÜ[1;31mÜ
[A[43CÛÛÛÛÛÛ[47m²²²[40mÛÛÛ[43m²[0;33mÜ°[37m  [35mß[1;45m°[0;35mÛ
[A[63C[1mÞ[45m²²±°°[0m [1;35;45m±°[0;35m ÛÛÜß[1;45m²±[40m
[A[79C[45m°[0mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÝ [1;35mÞ[45m²[0;35mÝ[1;45m±²[40mÛ
[A[25Cß[45m²±°[0;35mÜß[1;45m°[0;35mÜßÜ[37m [1;31;43m°²Ü[40mÛÛÛÛÛÛ
[A[45CÛÛÛ[47m²²²[40mÛÛÛÛÛÛ[43m²[0;33mÜ°[37m  [35mß[1mÞ[45mÛ²²±°[40m
[A[69C[45m[0m [1;35;45m°[0;35mÛÝ[1;30;45m°[0;35mÛÛÝÞ[1;45m²[40m
[A[79C[45m°[0mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÝ [1;35mÞ[45m²[40m°[45m°[0;35mß
[A[24C[1;45mÛÛ²²±[0;35mÝÛ[1;45m±°[0m [35mÞÝ[33mÞ[1;31;43mÞ[40mÛÛ
[A[40CÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛßßÛÛÛ[0;33m°[37m  [1;35;45mÛÛ²²±[0;35mÝÞÛ
[A[71C[1;45m°[0;35mÛÞÛÛ[37m [1;35;45m²±[40m
[A[79C[45m°[0mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ  [1;35;45m±[0;35mÝÝ°[1;45mÛÛ²±°[40m
[A[29C[45m[34m [0;35m [1;45m°[0;33m Ü±[35mß[33mÜ[1;31;43m²[40mÛ
[A[39CÛÛÛÛÛÛßßß[0m [1;35mÜ[0;35mÜÜÜÜÜ[1;43m°[31;45m²[40mÛÛÛ[43m²[40m
[A[61C[43m[0;33m°[37m [1;35mÞ[45mÛÛ²[0;35mßÜ[34;45m°[35;40mÛÛÛÛÛ
[A[75CÛÝÞ[1;45m°[40m
[A[79C[0;34;45m°[1;37;47m°°  [0mÛÛÛÛÛÛÛÛÛÛÛÛÛÛ  [1;35;45m²±°[0;35m²
[A[24C [1;45m²±° [0;35m  ÞÝ[1;30mÜ[0;35mÜÜÜ[1;31mßßßÛ[43m²[40mÛÛÛ
[A[45C[35;43m°[0;35mßßßßß[34mÜ[37m [1;31m [0;35mßßßß[1;31mßßÛ
[A[61C[43m²[0;33mÜ[37m [1;35;45m²²±[0;35mÝ[33mÜ[35m ßÜß[1;45m°[40m
[A[74C[45m[0;35mÛÛÛÜÛ
[A[79C[1;30;45m°[0mÛ[1;47mÜÜÛÛÛÛÛÛÛÜÜ[0mÛÛÛÛÛ[1;47m [0mÝ [35mÞ
[A[21C[1;45m±[0;35mÞÝ²[1;45m±°°[0;35mÝ[1;30m°[0;33m°[35mÞÝ[1;30m
[A[33C°[0;34m°[1mÜ[37m [0;35mßß[1;31mßÛÛÛÛÜ [0m ß² [1;34m°[0;34m
[A[51C°[37m [1mß[34m°[0m ß[1;31m ÜÛÛ[43m²°[0m [1;35;45m±±°[0m 
[A[68C[33mÜÛ[37m [34;45m°[1;35m°[0;35mÛßÛÛ[1;45m°[0;35mß
[A[79CÝ[1;37;47mÛÛÛÛÛÛÛÛÛÛÛÛÛ [0mÛ[1;47mÜÜÛÛ[0m  [1;35;45m°[0;35m 
[A[23CÛ[1m°[0;35mÞ[1;45m°[34m°[0;35m [1;30m°[0;33m [35mÞÝ[1;34m
[A[33C°[0;34m [1m [0m°ß [1;31mÜÜÛÛÛ²ÛÛÛÜÜÜÜ[0m [34mß[1;31m ÜÜÛÛÛÛ
[A[61CÛ[0;33m°[35mÞ[1;45m±°[0;35mÝ[33mß°ÞÝ[35mÞ ÛÛ Ûß[1;30;45m°[40m
[A[79C[0m [1;47mÛÛÛÛÛÛÛÛÛÛÛÛÛÝÛÛÛÛÛ[40mÝ[0m [35mÞÝÞÝÝ[1;45m°±[40m
[A[28C[45m[0;35m  [1;31m [0;33mÝ[1;35;45m°[0m [1;31mÜÜÜÛÛÛÛÛÛ
[A[43C[43m²[40mÛÛÛÛÛÛÛÛÛÛÛ[43m²²[40mÛÛÛÛÛ[0;33mÝ[35mÞ[1;45m°[40m
[A[65C[45m[0;35mÛÝ[33mÜ[37m [1;31;43m°[0m [35mÛÝÞ[1;45m°[0;35mÛ
[A[76C[1;45m°[0;35mÛÛ
[A[79C[37m [1;47mÛÛÛÛÛÛÛÛÛ²²ÛÛÛÛÛÛÛÛÛ[0m  [35mÛ ßÝÛ[1;45m°[0;35mÝ 
[A[30C[33mÞ[1;31;43m°[0;35mÞÝ[1;31mÞ[43m²[40mÛÛÛÛÛ[47m²[40mÛ
[A[43C[43m²²[40mÛÛÛÛÛÛÛ[47m²²[40mÛÛÛÛÛÛÛ[43m²[0;33mÝ[1;35;45m°[40m
[A[64C[45m[0;35mÛÛ[37m [1;31mÝ[0;33mÞ[1;31;43m²[0;35mÞ[34;45m°[40m
[A[72C[45m[37;40m [1;35;45m°±°[0;35mßÛ[34;45m°[40m
[A[79C[35mÝ[1;37;47mßßßßÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[40mÝ[0m [35mÞÝ ÛÞ[1;45m±°[40m
[A[29C[45m[0;35m [37m [33mÛÜ[35mß[1;31mÜÛÛÛÛÛÛÛÛÛ[43m±²[40mÛÛÛÛÛ
[A[51CÛÛÛ[47m²²²ÛÛÛ[40mÛ[43mÝ[0;33mÝ[1;35;45m±°[0m  [1;31mÜ[43m²[40m
[A[69C[43m[40mÝ[0;34;45m°[35;40m Û[1;45m°[0;35mß ÜÛ[1;45m°[40m
[A[79C[45m±[37;47m°°[0mÛÛÛÛÛ[1;47mßÛÛÛÛÛÛÛÛÛÛÛÛÛ[40mÝ[0m [35mß
[A[24C[37m [35mÞÝÛ[1;45m°[0;35m [37m  [33mß[1;31;43m°²[40mÛÛÛÛÛÛ
[A[41C[43m²[0;33mÜÜ[1;31mÜÛÛÛÛÛÛÛÛÛÛÛ[47m²²²[40mÛÛ[43mÝ[35;40mÞ
[A[63C[45m²[0;35mÝ[1;31m ß[43mÛ[40mß[0m [35mÝÞÛ Û Û[1;30;45m°°[40m
[A[79C[35;45m°[37;47m²[40mÛÛ[47mÛÜÜ[0mÛ[1;47m° ßÛÛÛÛÛÛÛÛÛÛÛÛÛ[40m
[A[23CÜ[0m  [35mÛ ÛÝ[4C[33mßß[1;31;43m²[40mÛÛÛÛ[43mÛ[40mÛÛÛÛÛÛÛÛ
[A[50CÛÛÛÛÛÛÛ[47m²²[40mÛÛ[43mÝ[0;35mÞ[1;45m±[0m [33m±°[37m  
[A[69C[35mÞ[37m [35mÛÝÞÛÛ Û[1;45m°[40m
[A[79C[0;35mÛ[1;37;47mÛÛÛÛÛÛÛ   ßßß ° [0mÛÛ[1;47mßßßÛÛÛ[40mÝ[0m 
[A[26C[35mÞ[1;45m°[0;35m Û[4C[37m  [33mÞ[1;31mÛÛÛÛÛßßß[0;31m 
[A[46C[33m°[31m [1m ßßßßßÜÛ[47m²[40mÛÛÛ[43m²[0;33mÝ[35mÛ [33mÜ²
[A[66C[1;31;43mÜ[0;33m²°[35mÞÝ[34;45m°[35;40mÛ[37m [35mÛÛÛÜÛ
[A[79C[1;30;45m°[37;47mÛÛÛÛÛÛÛÝ  ÜÜÜÛ²ÛÛÜÜÜ[0mÛÛÛ[1;47mßÛ[0m  
[A[27C[1;35;45m±[0;35mÝ Û [37m  [1mÞÝ[31m [0;33mÛ[1;31;43m²[40mÛ
[A[40CÛÜ[0;31m ß°  Ü°[33mß[31mß[1mÜÜÛÛÛÛÛÛÛ[0;33mß[35mÞÝ[33mÞ
[A[64C[1;31mÛÛ[43m²²[0;33mÝ[37m [35mÛ[37m [34;45m°°[35;40mÜÛ
[A[76C[1;45m°[0;35mÛ[1;30;45m°[40m
[A[79C[45m±[37;47mÛÛÛÛÛÛÛÜÛÛÛÛÛÛÛÛÛÛÛÛÛÛÜ[0mÛÛÝ [35mÞ[1;45m°[0;35m
[A[29C  ß  [1;37mÛÛ[0m  [33mß[1;31;43m°ß[40mÛÛÛÛÛÜÜÜÛÛÛÛÛÛÛÛ[43m²[40m
[A[58C[43m[40mß[0;33m Ü[35mß[33mÜ[1;31;43m²[40mÛÛÛÛ[43m²[0m  
[A[71C[35mÛÜßÛ[1;45m°±°[0;35mß
[A[79C[1;30;45m°[37;47mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÝ°[0mÛ  [35mÛ[37m  
[A[31C[1mÛÜ[0m [1mÞÛÝ[0m [1mÞÜ[0m [33mßÛ[1;31;43mßß[40mÛÛÜÜÜÛÛ
[A[52C[43mÛÛ²²[40mß[0m  [33mÜ[1;31;43mÜ²²[40mÛ[43mÛÛ[47m²[43mÛÛ[40m
[A[69C[43m[40mÝ[0m  [35mßÛÛÛ[1;45m°[0;35mÛÛ
[A[79C[1;45m°[37;47mÛÛ²Û²ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÜ²[40mÝ[0m [35mÞÝ[37m 
[A[31C[1mÞÛÛÜÛÛ[0m [1mÛÛÛÜ[0m  [33mßßß[1;31;43m°ßßßß[0;33mßß
[A[54C[1;31mß[0m  [33mÜ[1;31;43m°²ÛÛÛÛÛ[47m²²²[40mÛÛ[4C[0;35mÛÛß
[A[77CÛÛ
[A[79C[1;30;45m°[37;47mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[40mÛÛÜ[0m [35mß
[A[30C[37m  [1mÛÛÛÛÛÛÜÛÛÛÝ[0m        [3C[33mÜÜ[1;31;43mÜÜ²ÛÛ[40mÛ
[A[62CÛÛÛÛ[47m²²[40mÛÛÝ[3C[0;35mÞ[34;45m°[35;40mÛ [1;30;45m°[40m
[A[79C[45m°[46C[0;33m°[37m    [33m°²[1;31;43m°°²[40mÛÛÛÛÛÛÛÛÛÛÛÛÛ
[A[69CÛÛÜ[0m  [34;45m°°[1;35m°[30m°°[40m
[A[79C[45m±[40mßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß   ßß 
`k
@pauseon
@#CLOUDRAN
@do saybar
`7The cloud feels light and airy under your feet.
@#CLOUD
@do moveback
@do `v01 is 1
@busy
@label cloudstart
@show
`r0`c  `r1 `%The City In The Sky `r0
  `7You can't believe your eyes!  A naked woman stands before you - (this
  isn't what is strange, you've seen quite a few of those) she has tiny
  wings protruding from the small of her back.
  `%"Greetings, `n.`% We've been expecting you," `7her voice
  echoes in your head.
@do write
`x`x
@choice
Please, oh naked angel, send me back
What is this sanctuary?
How did you know my name?
Look at her
>`i34 0 What good is this Sword?
Leave
@if responce is 4 then do
  @begin
  @routine showangel
  @do goto cloudstart
  @end
@if responce is 5 then do
  @begin
  @show
`\`\  `$"Look at this sword I sto..I mean found.  What good is it?" `2you
  ask her.
`k  `0"We left that for you.  You are not required to use it, but it is
  your key to our high mountain palace - west of Arrisville - you must
  NEVER lose it."
`k
  @do goto cloudstart
  @end
@if response is 6 then do
 @begin
 @drawmap
 @update
 @closescript
 @end
@if responce is 2 then do
  @begin
  @show
`r0`c  `r1 `%There IS a heaven.. of sorts. `r0
  `%"We are the Koshi.  This is a magical place we've created for emergencies
  that our people have, we were very suprised to see YOU were the one who
  invoked the magic in our staff."
`k  `$"I'll invoke another staff if you don't put some clothes on," `7you laugh
  merrily.
  `7The girls face turns sad. `%"Your people hate us - they just don't
  understand.  But you may be different..."
`k
  @do goto cloudstart
  @end
@if responce is 3 then do
  @begin
  @show
`r0`c  `r1 `%The Koshi `r0
  `%"You wouldn't understand, human.  Sometimes we know things.. Know things
  before they happen."
  `$"So you are a witch then?!" `7you accuse.
`k  `%"No!  We are telepathic - our ancestors are very different than yours."
`k
  @do goto cloudstart
  @end
;if they got here, they want to leave
  @show
`r0`c  `r1 `%The Vacation Is Over `r0
  `$"I wanna leave!  You have totally weirded me out here," `7you explain.
  `%"We will not keep any soul against their will.  Where would you like
  to return?" `7she asks sorrowfully - while looking down at the world beneath.
@do write
`x`x
@choice
Stonebrook
Greentree
Porttown
Stay here
@if response is 4 then do
 @begin
 @do goto cloud 
 @end
@show
`\`\  `%"Alright but.." `7she suddenly giggles.
  `$"What is so funny?" `7you demand.
`k  `%"No one is going to believe you were here!" `7she smiles.
  `7Before you can reply, she shoves you over the edge.
`k
 @if response is 1 then do
 @begin
 @do map is 1359
 @loadmap 1359
 @do x is 50
 @do y is 6
 @end
 @if response is 2 then do
 @begin
 @do map is 1356
 @loadmap 1356
 @do x is 27
 @do y is 5
 @end
 @if response is 3 then do
 @begin
 @do map is 956
 @loadmap 956
 @do x is 11
 @do y is 14
 @end
@drawmap
@update
@#BEACHSIGN
;Sign overlooking the beach
@DO SAYBAR
`2Beach observation deck.
@do moveback
@#BLOOK
;Looking off the beach deck
@DO SAYBAR
`2The view of the sea is breathtaking.
@#BDOOR
;Back door to the lodge
@DO SAYBAR
`2A sign reads: Exit Only
@do moveback
@#ATREE
;Lookin at the apple tree stumps
@DO SAYBAR
`2Hmm ... someone's been cutting down apple trees.
@do moveback
@#BRIDGE
;Stupid guard on the bridge that doesn't let u pass.
@IF &lasty is 12 then do
@BEGIN
@DO SAYBAR
`2The lazy guard seems content sitting on a rock.
@CLOSESCRIPT
@END
@BUSY
@Do MOVEBACK
@DO `v01 is 1
@SHOW
`r0`c  `r1 The Bridge guard `r0
  `2A rather bulky looking guard looks sitting down looks up at you. `0"Hey
  you got anything to eat?  I'm just starving up here on patrol.  Oh, maybe
  you're interested in passing the bridge eh?  Well it'll cost ya, 200 up
  front."
@DO WRITE
`x`x
@CHOICE
>&money 200 Pay him the dough `$(you have &money)
>`i19 0 Give him an apple
Sorry I don't have anything
>`i01 0 Give him some berries
>`i03 0 Offer him some milk
@IF RESPONSE IS 1 THEN DO
@Begin
  @do `p30 is 25
  @do `v40 is 200
  @routine deposit in vaults.ref
@do money - 200
@Show
`\`\ `$"Here, let me show you the money," `2you say as you hand over the cash.
`\`k
@DRAWMAP
@UPDATE
@DO SAYBAR
`2The bridge creaks as you pass over it.
@Do y - 2
@CLOSESCRIPT
@End
@IF RESPONSE IS 2 THEN DO
@Begin
@do `i19 - 1
@Show
`\`\  `$"Here you go buddy,"`2 you say and throw the apple to the guard.
`\`k
@DRAWMAP
@UPDATE        
@DO SAYBAR
`2The bridge creaks as you pass over it.
@Do y - 2
@CLOSESCRIPT
@End
@IF RESPONSE IS 3 THEN DO
@Begin
@Show
`\`\  `2You wonder where you could find something for him...
`\`k
@label bdone
@DRAWMAP
@UPDATE
@CLOSESCRIPT
@End
@IF RESPONSE IS 4 THEN DO
@Begin
@Show
`\`\  `2The guard looks at you funny, `0"I don't want that crap," `2he barks.
`\`k
@do goto bdone
@End
@IF RESPONSE IS 5 THEN DO
@Begin
@Show
`c`\`\  `2The guard looks at you funny, `0"I don't want that crap," `2he barks.
`\`k
@do goto bdone
@End
@#APPLE
;Getting the apple for the bridge guard
@If `i19 > 0 then do
@BEGIN
@DO SAYBAR
`2You don't need another apple.
@do moveback
@CLOSESCRIPT
@END
@DO SAYBAR
`2Hey, you find an apple up here in the tree!
@DO `i19 + 1
@#BED
;Bed's in the StonePass lodge (tm)
@DO SAYBAR
`2A nice comfortable bed!
@#BEDAM
;Bed with amulet under it in StonePass lodge (tm)
@IF `i31 > 0 then do
  @begin
  @DO SAYBAR
`2A nice comfortable bed!
  @closescript
  @end
@DO SAYBAR
`2Hey, there's an amulet under this bed!!
@Do `i31 + 1
@end
@#LODGE
;Fun at the StonePass lodge (tm)
@do `p22 is 0
@if ninn5a.dat exist false then do
        @begin
        @writefile ninn5a.dat
40
0
0
        @end
@if ninn5.dat exist false then do
        @begin
        @do `p22 is 1
        @end
@offmap
@Do MOVEBACK
@routine lodgeansi
@DO `v01 is 1
@do move 1 1
@clear screen
@SHOW
`r0  `r1`% StonePass Lodge `r0
  `2You step inside the lodge door and the heat inside engulfs you.  In the
  corner of the big wooden room is a piano piping out merry tunes for the
  patrons.  Adventurers adorne the lodge engaging in their tales and food.
  What do you want to do?
  `2(you have `$$&money`2)
@DO WRITE
`x`x
@CHOICE
>&money 10 Buy a $10 meal
>&money 20 Buy the $20 `3BIG `%meal
Take a seat & listen a while
>&sex 0 =`v06 0 Flirt with the local women
Get a room for the night
=`p22 1 I'd like to buy this place!
=`p22 0 How's the owner?
Leave this place
@IF RESPONSE IS 7 THEN DO
        @BEGIN
        @do move 1 1
        @clear screen
        @SHOW
`\`\  `$"How's the owner to this hardy, fun-loving place?" `2you ask astutely.
  `2There are grunts and groans from around the room. After some hard
  looks and loud whispers, three very large men approach you.
  `0"The owner's awright. But the toilet water's great!"
  `2..how odd.
`k
        @do goto lodge
        @end
@IF RESPONSE IS 6 THEN DO
        @BEGIN
        @do move 1 1
        @clear screen
        @SHOW
`\`\  `$"I'd like to buy this hardy, fun-loving place!" `2you say astutely.
`k  `2There are grunts and groans from around the room. After some hard
  looks and loud whispers, three very large men approach you.
  `0"You want to buy this place?" `2one of them says to you.
`k  `$"Yes!" `2you say confidently. `$"And I pay good salary."
`k  `0"The price will be high," `2they say to you. `0"Real high!"
`k  `$"How high's real high?"
`k`c`\`\  `0"We'll sell it to you for `%$100,000`0?
        @do `v01 is 1
        @choice
>&money 99999 I'll take it!
That IS real high. No thanks.
        @if response is 2 then do
                @begin
                @do goto lodge
                @end
        @if response is 1 then do
                @begin
                @if ninn5.dat exist true then do
                        @begin
                        @show
`\`\  `2Oh crap!  Someone bought it while you were thinking about it.  You
  will regret your snail like thinking for the rest of your days.`\`\`k
                        @do goto lodge
                        @end
                @writefile ninn5.dat
&playernum
NONE
                @do `p30 is 25
                @do `v40 is 100000
                @routine deposit in vaults.ref
                @do money - 100000
                @do addlog
  `0`n `2buys `%StonePass Lodge `2!
                @routine seperate in gametxt.ref
                @show
`r0`c  `r1 `%The StonePass Men, your Employees and Friends `r0
`\`2  Nice job!  You now own their Inn!
  `2Enjoy your new home.
`k
               @label POTIOND
                @do move 1 1
                @clear screen
                @show
`c`\
  `2What would you like your toilet water to be made out of?
                @do `v01 is 1
                @choice
Silver Potion
Gold Potion
Red Potion
What!?!
                @if response is 4 then do
                        @begin
                        @do move 1 1
                        @clear screen
                        @show
`\`\  `2Let's explain, shall we...
  `0In your private room, there will be a toilet. In it, there will be water.
  What kind of water is your choice. This water will be available to drink
  once per day by yourself and whomever you allow inside your private room.
        `2Types of Water:
           `$-`0Silver Potion`2: Dodge goes up by 1!
           `$-`0Gold Potion`2: Muscle goes up by 2!
           `$-`0Red Potion`2: Max HP goes up by 5!
  `2That's what we're talking about...
`k
                        @do goto POTIOND
                        @end
                @if response is 1 then do
                        @begin
                        @show
`\`\  `0"Okay," `2He says, and pours the contents of a Silver Potion into
  your toilet water. `0"I'll refill it once a day."
`k
                        @do delete ninnw5.DAT
                        @writefile ninnw5.DAT
1
Silver Potion
                        @end
                @if response is 2 then do
                        @begin
                        @show
`\`\  `0"Okay," `2He says, and pours the contents of a Gold Potion into
  your toilet water. `0"I'll refill it once a day."
`k
                        @do delete ninnw5.DAT
                        @writefile ninnw5.DAT
2
Gold Potion
                        @end
                @if response is 3 then do
                        @begin
                        @show
`\`\  `0"Okay," `2He says, and pours the contents of a Red Potion into
  your toilet water. `0"I'll refill it once a day."
`k
                        @do delete ninnw5.DAT
                        @writefile ninnw5.DAT
5
Red Potion
                        @end
                @end
        @end
@IF RESPONSE IS 1 THEN DO
        @Begin
        @do money - 10
        @readfile ninn5a.dat
`p25
`p26
`p27
        @do `p26 + 10
        @writefile ninn5a.dat
`p25
`p26
`p27
        @Show
`\`\  `$"One order of clam soups," `2you say getting a taste of the cuisine.
  `%YOU FEEL PARTIALLY REFRESHED
`\`k
        @do `p02 + 5
        @if `p02 > `p03 then `p02 is `p03
        @do goto lodge
        @End
@IF RESPONSE IS 2 THEN DO
        @Begin
        @do money - 20
        @readfile ninn5a.dat
`p25
`p26
`p27
        @do `p26 + 20
        @writefile ninn5a.dat
`p25
`p26
`p27
        @Show 
`\`\  `$"Give me an order of shark ribs," `2you indulge in the sea cuisine.
  `%YOU FEEL FULLY REFRESHED
`\`k
        @if `p02 < `p03 then `p02 is `p03
        @do goto lodge
        @End
@IF RESPONSE IS 3 THEN DO
        @Begin
        @Show
`\`\  `2You grab a chair by the fire and listen to local fisherman's tales...
`\`k
        @do `p20 random 5 1
        @routine story`p20 
        @do goto lodge
        @End
@IF RESPONSE IS 4 THEN DO
        @Begin
        @Show
`\`\  `2You smile at a rather voluptuous waitress, `$"Hey baby, when do you
  get off?"  `2She turns to look at you and `l.`l.`l.
        @do write
`\`k
        @do `p20 random 6 1
        @IF `p20 is 1 then do
                @Begin
                @Show
  `0"Same time you do baby," `2she smiles.  All right!
`\`k
                @do goto lodge
                @End
        @IF `p20 is 2 then do
                @Begin
                @Show
  `0"Not 'till two hours into it," `2she smiles.  You Stallion!
`\`k
                @do goto lodge
                @End
        @IF `p20 is 3 then do
                @Begin
                @Show
  `0"Whenever you want me to big boy," `2she smiles.  Go man!
`\`k
                @do goto lodge
                @End
        @Show
      `2Slaps you across the face.  Guess not any time soon.
`\`k
        @do goto lodge
        @End
@IF RESPONSE IS 5 THEN DO
        @Begin
        @pauseoff
        @do `v01 is 1
        @readfile ninn5.dat
`p20
`s01
        @do `s02 is getname `p20
        @do `p21 is deleted `p20
        @if `p21 is 1 then do
                @begin
   ;owner got deleted!!!  Lets put it up for sale again.
                @do delete ninn5.dat
                @do addlog
  `%StonePass Lodge`2 is put on the market today.
                @routine seperate in gametxt.ref
                @end
        @if `p20 is &playernum then do
                @begin
                @do x = 27
                @do y = 9
                @loadmap 70
                @do map = 70
                @drawmap
                @update
                @do saybar
`!Stonepass Men: `$Welcome back, boss.
                @closescript
                @end
        @readfile ninn5a.dat
`p25
        @do move 1 1
        @clear screen
        @Show
`\`\  `$"Pardon me sir, I'm interested in a room for the night."
  `0"A room here will cost ya only `p25."
        @DO WRITE
`x`x
        @do `v01 is 1
        @CHOICE
>&money `p25 Go ahead and get a room
Forget this place
        @IF RESPONSE IS 1 THEN DO
                @BEGIN
                @do money - `p25
                @readfile ninn5a.dat
`p25
`p26
`p27
                @do `p26 + `p25
                @writefile ninn5a.dat
`p25
`p26
`p27
                @do x = 27
                @do y = 9
                @loadmap 70
                @do map = 70
                @drawmap
                @update
                @closescript
                @END
        @IF RESPONSE IS 2 THEN DO
        @do goto lodge
        @End
@drawmap
@update
@closescript
@#GATE
;Gate to StonePass
@IF &lasty is 14 then do
@BEGIN
@DO SAYBAR
`2The guard nods as you pass.
@CLOSESCRIPT
@END
                
@BUSY
@DO `v01 is 1
@SHOW
`r0`c  `r1 You approach the hulking gates `r0
  `2The guard yells `0"Halt!! Citizen, you must have a travel pass to continue
  beyond this point.  The land of GreenTree cannot be resposible for your 
  safety if you continue this way."
                      
@DO WRITE
`x`x
@CHOICE
>`i21 0 Show him your travel pass
You don't have one, guess you'll leave
@IF RESPONSE IS 1 THEN DO
@Begin
@Show
`\`\  `$"Here you go,"`2 you say and show the pass to the guard.
`\`k
@DRAWMAP
@UPDATE        
@DO SAYBAR
`2You feel the beach breeze as you pass the gate.
@CLOSESCRIPT
@End
@IF RESPONSE IS 2 THEN DO
@Begin
@Show
`\`\  `2You wonder where you could find a pass...
`\`k
@DO MOVEBACK
@DRAWMAP
@UPDATE
@CLOSESCRIPT
@End
@#STORY1
@Show
`c  `r1`%  A Dark Monster from the past  `r0
  `2One of the older sailors speaks up.  `0"I remember when we used to sail
  these seas without worries of pirates or harsh weathers, just the worry of
  one thing ... The great giant Squid."  `2You hear the crowd around you ooh
  to his story, the piano dies down a bit.
`k  `0"I've heard that he was as big as PortTown, able to crush the biggest
  galleons under his grasp.  More tentacles than ships have crew hands, and
  each as powerfull as an arm of the Red Dragon!"  `2The crowd falls into a
  dead silence.
`k  The old fisherman slowly raises his mug.  `0"A drink, for that nobody here
  ever has the horrible punishment to encounter that beast."
  `$"Here Here," `2 shouts the crowd.
`\`k
@
@#STORY2
@Show
`c  `r1`%  High Seas Legend  `r0
  `2A scruffy looking fellow stands up.  He has no arm and a patch over his
  left eye.  His voice is raspy,  `0"I know of a man who's name should be
  known.  McCarith the Vile ..."
`k  `0"The law of the land hates and fears him, passing him off as only a
  ruffian of the sea.  Without mercy or purpose, killing, destroying and
  questing only for money and goods.  But he is truly a man of honor, a
  man who vows to those who struggle in the world, ally to those who are
  made to suffer from a greater evil."
`k  `2You hear the rowdy ones in the tavern cheer in the background.  `0"Yes
  speak up and be proud of this man.  If your ship ever falls under his prey
  show your good not to the crown, not to him, but to the good men of the sea
  and maybe ... just maybe he'll spare you."  `2The crowd around you begins
  to roar with praise, guess this McCarith is a popular guy.
`\`k
@
@#STORY3
@Show
`c  `r1`%  Lands of the West  `r0
  `2Slowly a beautiful women stands from the crowd.  Her eyes seem to glow
  with happiness and mystery.  She speaks with a soft voice.  `0"I ... I
  know of a land, a hidden land.  Where the light grows and people strive to
  a better life for all."  `2The crowd begins to quiet and the room seems to
  become soothing & warm.
`k  `0"To the west it lies, high in the mountains there.  The people who
  inhabit it are ... mysterious to outsiders.  But they are peaceful and kind
  - they know much about the world and answers to our questions.  If you see
  these people, befriend them for they may aid you greatly on you quest in
  life."  `2She smiles and sits.
`\`k  `2One older sailer stands up. `0"Oh Wanda!  You know that's a load of
  crap!" `2He then promptly sits down.
`\`k
@
@#STORY4
@if `v06 is 1 then do
  @begin
  @show
`c  `r1`%  Woman better have my Money  `r0
  `2This story has been `bcensored`2, the game is running in clean mode.
`k
  @closescript
  @end
@Show
`c  `r1`%  Bitch better have my Money  `r0
  `2A man with a rather large hat stands.  He is adorned with what looks like
  exotic furs and golds.  He has a certain .. flavor to himself.  He speaks.
`k  `0"Bitch better have my money.  She should have it good and true.
  Bitch better have my money, else you don't wanna know what I'll do to you.
  Bitch better have my money, rolled and ready to go.
  Bitch better have my money, or else I'm gonna slap you ho."
`\`k
@
@#STORY5
@Show
`c  `r1`%  Fear Denied  `r0
  `2A man who looks pale as a ghost stands.  He seems to have wounds on his
  body, they seem fairly recent.  He speaks.
`k  `0"The Dragon still is alive my friends.  Take care in your quests for he
  does exist.  I was captured by the Dragon Tooth Cult, they .. they showed
  me that he was alive.  The Dragon ..  will be coming soon!  You must ..."
  `2He begins to babble and become lost.  A few men from the bar stand and
  him outside.  One of the elders in the lodge stands.
  `0"My friends, do not worry of what he speaks.  Nearly a drunk with an
  active imagination.  I assure you, the Dragon is gone ..."
`\`k
@
@#STORY6
;whoever added this story, tell me who you are!!! (Seth and Pap don't know?!)
@Show
`c  `r1`%  The Sand Cat  `r0
  `2Here we go said the pussy
`\`k
@
;ALL MONSTERS ARE BELOW HERE!!!!!!!!!!!!!!!!!!!!!!!!!!!!
@#monster1
@fight
;name
Beached Pirate
;string said when you see him
A constant "arr" sound comes from behind you.
;power move kill string
`$"Say hi to Davey Jones for me," `2 you laugh.
;sex - 1 is male, 2 is female, 3 is it
1
;weapon and strength for the weapon, up to 5
slices your arm with his cutlass|14
backstabs you|44
gets a hold with his garrot|54
NONE|NONE
NONE|NONE
;defense
20
;gold reward
76
;experience
98
;hit points
75
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster2
@fight
;name
Thief
;string said when you see him
A man in a cloak approches you, with a dagger in each hand.
;power move kill string
He should know, you've got insurance.
;sex - 1 is male, 2 is female, 3 is it
1
;weapon and strength for the weapon, up to 5
jabs with his daggers|17
gets a good gash in your leg|10
cuts your arm|12
blows a strange powder into your eyes|32
NONE|NONE
;defense
9
;gold reward
187
;experience
65
;hit points
60
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
STONEP.REF|THIEF
;if runs: ref file|name or NONE
NONE|NONE
@#monster3
@fight
;name
Sand Worm
;string said when you see him
The sand in front of you begins to move
;power move kill string
`$"Go in the ground and stay there," `2 you command.
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
draws blood with its teeth|43
wraps around & squeezes you legs|14
gets ahold with his sucker|27
NONE|NONE
NONE|NONE
;defense
12
;gold reward
0
;experience
189
;hit points
102
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster4
@fight
;name
Vagabond Cutthroat
;string said when you see him
Suddenly a mad heckling yell approches.
;power move kill string
That's one less bum on the beach.
;sex - 1 is male, 2 is female, 3 is it
1
;weapon and strength for the weapon, up to 5
slices a with his saber|32
throws a handfull of sand in your eyes|16
gets you in a strangle hold|26
throws a rock|23
NONE|NONE
;defense
19
;gold reward
103
;experience
127
;hit points
83
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster5
@fight
;name
Beached Man o' War
;string said when you see him
Foolishly you approach a blubbery organism
;power move kill string
`$"I think it's really dead this time," `2you hope.
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
touches you with a blubbery tentacle|30
leashes out with smile|35
rubs against your leg with paralysing poison|40
rolls into you|42
NONE|NONE
;defense
25
;gold reward
103
;experience
77
;hit points
80
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster6
@fight
;name
Giant Crab
;string said when you see him
You see a rather large looking crab, but it also sees you!
;power move kill string
`$"I had a bad case of crabs, but killed em."
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
snaps at your leg|15
cracks into your leg|18
grabs your hand with a pincher|25
tramples into you|12
NONE|NONE
;defense
12
;gold reward
45
;experience
72
;hit points
50
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
@#monster7
@fight
;name
Rogue Bard
;string said when you see him
You hear really crappy music approaching you...
;power move kill string
Shut up, please just shut that thing up!
;sex - 1 is male, 2 is female, 3 is it
1
;weapon and strength for the weapon, up to 5
sings about his past loves|10
attempts to dance for you|15
smacks you with his lute|13
NONE|NONE
NONE|NONE
;defense
15
;gold reward
34
;experience
26
;hit points
40
;if win: ref file|name or NONE
NONE|NONE
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
NONE|NONE
              
@#FIGHT
@do `p20 random 6 1
@if `p20 is 1 then do
 @begin
 @run GENRAN in GENRAN.REF
 @end
@busy
@do `p20 random 7 1
@do goto monster`p20
@#THIEF
@do money / 4
@do money * 3
@SHOW
`r0`c  `r1`% Defeat by the Thief `r0
  `2The Thief raises his dagger to deliver the blow to your skull...
`k  `0"Don't worry, I'm not all about killing, I'm about money.  So I'm sure
  you'll understand if I relieve you of a little." `2He proceeds to raid
  your gold bag.  But at least you have your life.
`4  You lose `b1/4th`4 of your loot.
`k
@do `p02 is 5
@DRAWMAP
@UPDATE
@CLOSESCRIPT
@#done
; Updated by CNW to handle the java telnet app
;
;    Taxes. v1.3
;
;   created by: Joel Gathercole
;   Last Modified on Mar 6, 2000
;   An official CNW IGM,
;   currently will only work in CNW.
;
; All payable at SysOp Castle and some banks
;
; - Some guidelines for the taxes-
;taxes are calculated yearly.. and must be paid before the next round of
; taxes is calculated.
; If taxes are not paid by the middle of the year. There is an interest
; rate of `v16 per day. If taxes are over $10,000 and after half the year,
; a bounty will be put out on that person.
;
;  Both players and NPCs MUST pay their taxes.
;
; On occasion in the daily random events of the npcs. they will try to
; pay their taxes automaticly.. but everyone may not get a chance to, or
; may not be able to afford it.
;
; All taxes collected are stored in secured vaults through-out the realm.
; Guarded and unguarderd.
;
; Players can get quest points by bringing NPCs to the SysOp Castle so
; the NPC can pay their taxes. If NPC does not have enough cash, they
; will ask the player for help. If player helps.. special other bonuses.
; if the npc taxes are not able to be paid, there is no bonus and the
; npc still owes. No de-credit to player. It was the NPC's responsibility.
;
;
; Vault #200 is the GIVE-A-WAY flag, if is more than 0 then the realm
; will give away money to 1 lucky player or npc the next day.
;
@#playertaxes
;1st check if player is old enuf to pay taxes!
@do `p22 is `v18
@if `p39 < `p22 then do
        @begin
        @datasave taxyear.idf &playernum `v12
        @closescript
        @end
@do `p20 is 0
@do `p29 is 0
@do `p28 is 2000000000
@do `p28 / `v15
@datanewday taxes.chk
@dataload taxes.chk 1 `p20
@dataload taxyear.idf &playernum `p29
@if `p29 < 0 then `p29 is 0  ; just in case it went to a neg. it happened before.
@if `p29 < `v12 then do
        @begin
        @do `p29 + 1
        @datasave taxyear.idf &playernum `p29
        @do addlog
`%Royals of the King SysOp has calculated `N taxes for last year.
        @do `p23 is `p09
        @do `p23 * 100
        @do `p24 is &money
        @do `p25 is &bank
        @do `p24 + `p25
        @if `p24 > `p28 then `p24 is `p28
        @do `p24 * `v15
        @do `p24 / 100
        @do `p23 + `p24
        @datasave taxes.idf &playernum `p23
        @run FINDPROP in TAXES2.REF
       @label doneprops
        @dataload taxes.idf &playernum `p23
        @dataload taxyear.idf &playernum `p29
        @writefile mail\mail&playernum.dat
  `0Tax Office:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0 `%You're taxes for year `p29 is `$`p23 `%gold. Please
 pay at the amount at the Sysop castle or at a bank before the
 middle of the year.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
        @dataload taxes.idf &playernum `p26
        @if `p23 > 1000000000 then `p23 is 1000000000
        @if `p26 > 1000000000 then `p26 is 1000000000
        @do `p23 + `p26
        @if `p23 > 2000000000 then `p23 is 2000000000
        @end
@closescript
@#npctaxes
@do `p20 is 0
@do `p29 is 0
@do `p28 is 2000000000
@do `p28 / `v15
@dataload npc/taxyear.idf 1 `p29
@if `p29 < 0 then `p29 is 0  ; just in case it went to a neg. it happened before.
@if `p29 < `v12 then do
        @begin
        @do `p29 + 1
        @datasave npc/taxyear.idf 1 `p29
        @do `p29 is 0
       @label npctaxloop
        @do `p29 + 1
 ;1st check if NPC is old enuf to pay taxes!
        @dataload npc/npcage.idf `p29 `p20
        @if `p20 < `v18 then do
                @begin
                @do goto npctaxloop
                @end
        @dataload npc/npcgold.idf `p29 `p24
        @if `p24 > `p28 then do
                @begin
                @do `p24 is `p28
                @end
        @do `p24 * `v15
        @do `p24 / 100
        @dataload npc/npctaxes.idf `p29 `p23
        @if `p23 > 1000000000 then `p23 is 1000000000
        @if `p24 > 1000000000 then `p24 is 1000000000
        @do `p23 + `p24
        @datasave npc/npctaxes.idf `p29 `p23
        @if `p29 > 199 then goto npctaxdone
        @do goto npctaxloop
        @end
@label npctaxdone
@if `p20 is 0 then do
        @begin
        @do `p22 is `v10
        @do `p22 / 2
        @if `p22 > `v11 then do
                @begin
                @show
`\ `%Royals of the SysOp are checking if citizens paid taxes.
                @datasave taxes.chk 1 1
                @do `p21 is 1
                @do goto interest
                @end
        @datasave taxes.chk 1 1
        @end
@closescript
@end
;adds interest to owed taxes if not paid.
;if taxes over $10,000, a royal bounty is put out on player or NPC.
@#interest
@do `p28 is 2000000000
@do `p28 / `v16
@dataload taxes.idf `p21 `p20
@dataload npc/npctaxes.idf `p21 `p23
@if `p20 > 1 then do
        @begin
        @do `p22 is `p20
        @if `p22 > `p28 then do
                @begin
                @do `p22 is `p28
                @end
        @do `p22 * `v16
        @do `p22 / 100
        @do `p20 + `p22
        @end
@if `p23 > 1 then do
        @begin
        @do `p22 is `p23
        @if `p22 > `p28 then do
                @begin
                @do `p22 is `p28
                @end
        @do `p22 * `v16
        @do `p22 / 100
        @do `p23 + `p22
        @end
@datasave taxes.idf `p21 `p20
@datasave npc/npctaxes.idf `p21 `p23
@if `p20 > `v17 then do
        @begin
; Bad PLAYER ... did not pay taxes!
        @do `s01 is getname `p21
        @do addlog
`$ROYAL TAX BUREAU: `%"`5`s01 did not pay their taxes,
        @do addlog
                    `5a reward of `p20 gold is out for them, alive.`%"
        @IF bounty.`p21 EXISTS TRUE THEN do
                @begin
                @readfile bounty.`p21
`p26
`p27
                @if `p27 > 1000000000 then `p27 is 1000000000
                @if `p20 > 1000000000 then `p20 is 1000000000
                @do `p20 + `p27
                @DO DELETE bounty.`p21
                @end
        @writefile bounty.`p21
399
`p20
1
        @end
@if `p23 > `v17 then do
        @begin
; Bad NPC.. did not pay taxes!
        @do `p70 is `p21
        @routine getname in npcname.ref
        @do addlog
`$ROYAL TAX BUREAU: `%"`5`s01 did not pay their taxes,
        @do addlog
                    `5a reward of `p23 gold is out for them, alive.`%"
        @do `p21 + 200
        @IF bounty.`p21 EXISTS TRUE THEN do
                @begin
                @readfile bounty.`p21
`p26
`p27
                @if `p27 > 1000000000 then `p27 is 1000000000
                @if `p23 > 1000000000 then `p23 is 1000000000
                @do `p23 + `p27
                @DO DELETE bounty.`p21
                @end
        @writefile bounty.`p21
399
`p23
1
        @end
@do `p21 + 1
@if `p21 > 200 then goto nomore
@do goto interest
@closescript
@end
@#npcpay
@do `p20 random 5 1
@if `p20 is 2 then do
        @begin
@do `p20 random 199 1
@dataload npc/npctaxes.idf `p20 `p21
@if `p21 > 0 then do
        @begin
        @dataload npc/npcgold.idf `p20 `p24
        @if `p24 < `p21 then goto nomore
        @dataload vaults.idf 1 `p26
        @do `p26 + `p21
        @datasave vaults.idf 1 `p26
        @do `p24 - `p21
        @do `p70 is `p20
        @routine getname in npcname.ref
        @do `p40 random 10 1
        @if `p40 is 1 then `s02 is joyfully
        @if `p40 is 2 then `s02 is disgustedly
        @if `p40 is 3 then `s02 is has
        @if `p40 is 4 then `s02 is has
        @if `p40 is 5 then `s02 is has
        @if `p40 is 6 then `s02 is has
        @if `p40 is 7 then `s02 is quickly
        @if `p40 is 8 then `s02 is quietly
        @if `p40 is 9 then `s02 is quietly
        @if `p40 is 10 then `s02 is quietly
        @do addlog
     `!`s01 `s02 paid tribute to thy realm today.
        @do addlog
                                 `2-`0=`2-`%=`2-`0=`2-
        @datasave npc/npctaxes.idf `p20 0
        @datasave npc/npcgold.idf `p20 `p24
        @end
        @end
@closescript
@#movemoney
@if vaults.idf exists false then do
        @begin
        @do `p21 is 0
        @label makenew
        @do `p21 + 1
        @if `p21 > 199 then goto donenew
        @do `p20 random 2000 100
        @datasave vaults.idf `p21 `p20
        @do goto makenew
        @label donenew
        @datasave vaults.idf 1 10000
        @datasave vaults.idf 199 20000000
        @datasave vaults.idf 200 0
        @end
@dataload vaults.idf 1 `p20
@if `p20 > 1000 then do
        @begin
        @do `p25 random 12 1
        @do `p21 random `p20 1
        @dataload vaults.idf `p25 `p26
        @do `p26 + `p21
        @do `p20 - `p21
        @datasave vaults.idf 1 `p20
        @datasave vaults.idf `p25 `p26
        @end
@if `p20 > 1000000 then do
        @begin
        @do `p23 is 1000000
        @do `p21 random 199 1
        @if `p21 is 1 then `p21 is 2
        @dataload vaults.idf `p21 `p22
        @do `p29 is 0
        @label toomuch
        @if `p22 > 5000000 then do
                @begin
                @do `p29 + 1
                @if `p29 is 100 then goto giveaway
                @do `p21 + 1
                @if `p21 > 199 then `p21 is 3
                @dataload vaults.idf `p21 `p22
                @if `p22 > 5000000 then goto toomuch
                @end
        
        @do `p20 - `p23
        @if `p22 > 1000000000 then `p22 is 1000000000
        @if `p23 > 1000000000 then `p23 is 1000000000
        @do `p22 + `p23
        @if `p22 > 2000000000 then `p22 is 2000000000
        @datasave vaults.idf `p21 `p22
        @datasave vaults.idf 1 `p20
        @end
@if `p20 > 50000 then do
        @begin
        @do `p23 is `p20
        @do `p21 random 199 1
        @if `p21 is 1 then `p21 is 2
        @dataload vaults.idf `p21 `p22
        @do `p20 - `p23
        @if `p22 > 1000000000 then `p22 is 1000000000
        @if `p23 > 1000000000 then `p23 is 1000000000
        @do `p22 + `p23
        @if `p22 > 2000000000 then `p22 is 2000000000
        @datasave vaults.idf `p21 `p22
        @datasave vaults.idf 1 `p20
        @end
@do `p20 random 199 1
@do `p21 random 199 1
@if `p21 is `p20 then do
        @begin
        @do `p21 is 1
        @do `p20 is 2
        @end
@dataload vaults.idf `p20 `p22
@dataload vaults.idf `p21 `p23
@if `p22 > 60000 then do
        @begin
        @do `p24 is `p22 
        @end
@if `p22 < 60000 then do
        @begin
        @do `p24 random `p22 1
        @end
@if `p22 is 60000 then do
        @begin
        @do `p24 random `p22 1
        @end
@do `p22 - `p24
@if `p23 > 1000000000 then `p23 is 1000000000
@if `p24 > 1000000000 then `p24 is 1000000000
@do `p23 + `p24
@if `p22 > 2000000000 then `p22 is 2000000000
@if `p23 > 2000000000 then `p23 is 2000000000
@datasave vaults.idf `p20 `p22
@datasave vaults.idf `p21 `p23
@closescript
@#giveaway
@writefile lognow.txt
`$King SysOp proclaims there is too much money in the royal treasurey.
`$We will be hosting a lottery tommorow for 
                                 `2-`0=`2-`%=`2-`0=`2-
@dataload vaults.idf 200 `p21
@do `p21 + 1
@datasave vaults.idf 200 `p21
@#vault
@#bank
;playing paying at the bank.
@if bitcheck `t50 3 1 then do
        @begin
        @dataload npc/npctaxes.idf `p71 `p20
        @do `p70 is `p71
        @routine getname in npcname.ref
        @do move 1 1
        @show
`c                     `r1  Bank Tax Collector  `r0
 `$Banker: `%What is your name, s&sir?`l`l`l`l`l
 `$`s01: `%`s01!`l`l`l`l
 `$Banker: `%One moment `s01, as I find your files.`l`l
 `%<`l.`l.`l.`l>`l
 `$Banker: `%Okay, you must pay tribute of `$`p20 `%gold
                  to our fine realm.
`l`l`k
        @dataload npc/npcgold.idf `p71 `p22
        @if `p22 < `p20 then do
                @begin
                @show
 `$`s01: `%Hold on a second sir.`l`l
`l`l`k
 `%<`s01 turns to you>
`l`l`k
 `$`s01: `%`N, do you have `$`p20 `%gold I could borrow to pay my debts
        to the mighty king Sysop?
`l`l`k
                @if money < `p20 then do
                        @begin
                        @show
 `$`N: `%I am soo sorry, I can not afford your dues either, you'll have
        to come by here again sometime soon.`l`l
`l`l`k
 `$`s01: `%Okay, sir, tax collector guy, I'll be back another day to pay
        my dues, please be patient on me. Thank-you.`l`l
`l`l`k
 `%<`s01 turns to the tax collector>
`l`l`k
 `$Banker: `%`s01, as long as you don't let it get too high. BYE.`l
`l`l`k
                        @key
                        @closescript
                        @end
                @show
 `%<Y/n>
                @do readspecial `s05 YN
                @if `s05 is Y then do
                        @begin
                        @show
 `$`N: `%Yah sure, I'll cover for you this time.
       `%Here take my `$`p20 `%gold.`l`l
`l`l`k
 `$`s01: `%Thank you so much s&sir, I am forever in your debts.
`l`l`k
 `%<`s01 turns to the tax collector>
`l`l`k
 `$`s01: `%Sir, I have the gold for my devine sire and realm.
       `% Will you accept?
`l`l`k
 `$Tax Collector: `%Of course, thank-you, the realm will not forget
        `%you generous deeds today.
`l`l`k
 `%<`s01 turns back to YOU>
`l`l`k
 `$`s02: `%Please take me home and I'll give you some stuff. I promise.
                        @datasave npc/npctaxes.idf `p71 0
                        @do money - `p20
                        @dataload vault.idf `p30 `p23
                        @do `p23 + `p20
                        @datasave vault.idf `p30 `p23
                        @bitset `t50 3 0
                        @bitset `t50 4 1
                        @bitset `t50 7 1
                        @key
                        @closescript
                        @end
                @if `s05 is N then do
                        @begin
                        @show
 `$`s01: `%I am sorry sir tax collector, I will have to return with
       `%more money, as I am not carrying enough gold with me.
`l`l`k
 `$Banker: `%Okay sure no problem, come back when you do.
 `l`l`k
                        @bitset `t50 7 1
                        @key
                        @closescript
                        @end
                @key
                @closescript
                @end
        @show
 `$`s01: `%Okay sir, here I've got the `$`p20 `%gold.
 `%<`s01 hands over the `$`p20 `%gold to the tax collector>
        @do `22 - `p20
        @datasave npc/npcgold.idf `p71 `p22
        @dataload vaults.idf `p30 `p21
        @do `p21 + `p20
        @datasave vaults.idf `p30 `p21
        @datasave taxes.idf &playernum `p21
        @if bounty.`p71 exist TRUE then do
                @begin
                @readfile bounty.`p71
`p20
`p21
`p22
                @if `p20 is 201 then do
                        @begin
                        @do delete bounty.`p71
                        @end
                @end
        @key
        @closescript
        @end
@do `p24 is &playernum
@dataload taxes.idf `p24 `p20
@do move 1 1
@show
`c                     `r1  Bank Tax Collector  `r0
 `$Banker: `%What is your name, s&sir?`l`l`l`l`l
 `$`N: `%`N!`l`l`l`l
 `$Banker: `%One moment `N, as I find your files.`l`l
 `%<`l.`l.`l.`l>`l
 `$Banker: `%Okay, you must pay tribute of `$`p20 `%gold
                  to our fine realm.`l`l`k
@if money < `p20 then do
        @begin
        @show
 `$`N: `%Sorry, I will have to return with more money, as I am not
                  carrying enough gold.
                  `l`l`k
        @key
        @closescript
        @end
@show
 `$`N: `%Okay sir, here I've got the `$`p20 `%gold.
`l`l`k
 `%<you hand over `$`p20 `%gold>
 `l`l`k
@bitset `t19 7 0
@do money - `p20
@dataload vaults.idf `p30 `p21
@do `p21 + `p20
@datasave vaults.idf `p30 `p21
@datasave taxes.idf `p24 0
@if bounty.&playernum exist TRUE then do
     @begin
     @readfile bounty.&playernum
`p20
`p21
`p22
     @if `p20 is 201 then do
        @begin
        @do delete bounty.&playernum
        @end
     @end
@key
@closescript
@#nomore
;
;    Property TAXES routine.
; 
; You dont want a player to own too much land with-out pay the taxes,
;    right? :)
;
;
@#DOTAXES
@do `p21 is `v15
@do `p21 * `p22
@do `p21 / 100
@dataload taxyear.idf &playernum `p29
@writefile mail\mail&playernum.dat
  `0Tax Office:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0 `%You're taxes for the property `$`s08 for year `p29 is
`$`p21 `%gold. It has been added to your final taxes owed.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
@dataload taxes.idf &playernum `p24
@do `p24 + `p21
@datasave taxes.idf &playernum `p24
@#FINDPROPS
@if qcastle.dat exist true then do
        @begin
        @readfile qcastle.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile qtres.dat
`p30
                @do `s08 is QFortress`xDeed
                @do `p22 is 50000
                @do `p23 is 25000
                @routine dotaxes
                @end
        @end
@if keep.dat exist true then do
        @begin
;Odins Keep
        @readfile keep.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Odins`xKeep`xDeed
                @do `p22 is 50000
                @do `p23 is 25000
                @routine dotaxes
                @end
        @end
@if tlhouse4.dat exist true then do
        @begin
        @readfile tlhouse4.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile tltres4.dat
`p30
                @do `s08 is Team`xHouse`x4`xDeed
                @routine dotaxes
                @end
        @end
@if tlhouse5.dat exist true then do
        @begin
        @readfile tlhouse5.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile tltres5.dat
`p30
                @do `s08 is Team`xHouse`x5`xDeed
                @do `p22 is 10000
                @do `p23 is 5000
                @routine dotaxes
                @end
        @end
;Underground City
@if pass1.dat exist true then do
        @begin
        @readfile pass1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile pastre1.dat
`p30
                @do `s08 is Underground`xCity`x-`xHome`x#1
                @do `p22 is 20000
                @do `p23 is 10500
                @routine dotaxes
                @end
        @end
@if pass2.dat exist true then do
        @begin
        @readfile pass2.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile pastre2.dat
`p30
                @do `s08 is Underground`xCity`x-`xHome`x#2
                @do `p22 is 20000
                @do `p23 is 10500
                @routine dotaxes
                @end
        @end
@if pass3.dat exist true then do
        @begin
        @readfile pass3.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile pastre3.dat
`p30
                @do `s08 is Underground`xCity`x-`xHome`x#3
                @do `p22 is 20000
                @do `p23 is 10500
                @routine dotaxes
                @end
        @end
;jasminita's deed
@if castle77.dat exist true then do
        @begin
        @readfile castle77.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Jasminita's`xDeed`x-`xDragon`xHousing
                @do `p22 is 15000
                @do `p23 is 7500
                @routine dotaxes
                @end
        @end
;Esperanto's deed
@if castle79.dat exist true then do
        @begin
        @readfile castle79.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Esperanto's`xDeed`x-`xDragon`xHousing
                @do `p22 is 25000
                @do `p23 is 15500
                @routine dotaxes
                @end
        @end
@if tlhouse1.dat exist true then do
        @begin
        @readfile tlhouse1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile tltres1.dat
`p30
                @do `s08 is Team`xHouse`x1`xDeed
                @do `p22 is 10000
                @do `p23 is 5000
                @routine dotaxes
                @end
        @end
@if tlhouse3.dat exist true then do
        @begin
        @readfile tlhouse3.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile tltres3.dat
`p30
                @do `s08 is Team`xHouse`x3`xDeed
                @do `p22 is 10000
                @do `p23 is 5000
                @routine dotaxes
                @end
        @end
;Gumtown Castle
@if gumcast.dat exist true then do
        @begin
        @readfile gumcast.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile gumtres.dat
`p30
                @do `s08 is Gumtown`xCastle`xDeed
                @do `p22 is 200000
                @do `p23 is 100000
                @routine dotaxes
                @end
        @end
@if castle4.dat exist true then do
        @begin
        @readfile castle4.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile tres4.dat
`p30
                @readfile castle4a.dat
`p26
`p24
                @readfile ninnw6.dat
`s04
`s04
                @readfile ninn1b.dat
`p25
`p27
                @do `p27 + `p24
                @do `p22 is 25000
                @do `p23 is 10000
                @do `s08 is Sosen`xInn`xDeed
                @routine dotaxes
                @end
        @end
;IceLord
@if castle1.dat exist true then do
        @begin
        @readfile castle1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is IceLord`xKeep`xDeed
                @readfile tres1.dat
`p30
                @do `p22 is 50000
                @do `p23 is 25000
                @routine dotaxes
                @end
        @end
;other castles
@if castle2.dat exist true then do
        @begin
        @readfile castle2.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Castle`xColdrake
                @readfile tres2.dat
`p30
                @do `p22 is 20000
                @do `p23 is 10000
                @routine dotaxes
                @end
        @end
@if castle3.dat exist true then do
        @begin
        @readfile castle3.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Wizard's`xTower`xDeed
                @readfile tres3.dat
`p30
                @do `p22 is 40000
                @do `p23 is 20000
                @routine dotaxes
                @end
        @end
;cottage inn
@if cott.dat exist true then do
        @begin
        @readfile cott.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Cottage`xInn`xDeed
                @readfile cotta.dat
`p26
`p27
                @do `p22 is 65000
                @do `p23 is 40000
                @routine dotaxes
                @end
        @end
@if tlhouse2.dat exist true then do
        @begin
        @readfile tlhouse2.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile tltres2.dat
`p30
                @do `s08 is Team`xHouse`x2`xDeed
                @do `p22 is 10000
                @do `p23 is 5000
                @routine dotaxes
                @end
        @end
        
@if NINN1.dat exist true then do
;Ma's Boarding house
        @begin
        @readfile ninn1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile ninn1a.dat
`p26
`p24
                @readfile ninn1b.dat
`p25
`p27
                @readfile ninnw1.DAT
`s04
`s04
                @readfile ninnt1.DAT
`p30
                @do `p27 + `p24
                @do `s06 is Inside`xGreenTree. East`xend.
                @routine dotaxes
                @end
        @end
@if NINN2.dat exist true then do
;Sea Hag Hotel
        @begin
        @readfile ninn2.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile ninn2a.dat
`p26
`p24
                @readfile ninn2b.dat
`p25
`p27
                @readfile ninnw2.DAT
`s04
`s04
                @readfile ninnt2.DAT
`p30
                @do `p22 is 65000
                @do `p23 is 30000
                @do `p27 + `p24
                @do `s08 is Sea`xHag`xHotel`xDeed
                @routine dotaxes
                @end
        @end
;The Woodlog Inn
@if NINN3.dat exist true then do
        @begin
        @readfile ninn3.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile ninn3a.dat
`p26
`p24
                @readfile ninn3b.dat
`p25
`p27
                @readfile ninnw3.DAT
`s04
`s04
                @readfile ninnt3.DAT
`p30
                @do `p22 is 65000
                @do `p23 is 30000
                @do `p27 + `p24
                @do `s08 is The`xWoodlog`xInn`xDeed
                @routine dotaxes
                @end
        @end
;FlagCity Inn
@if NINN4.dat exist true then do
        @begin
        @readfile ninn4.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile ninn4a.dat
`p26
`p24
                @readfile ninn4b.dat
`p25
`p27
                @readfile ninnw4.DAT
`s04
`s04
                @readfile ninnt4.DAT
`p30
                @do `p22 is 65000
                @do `p23 is 30000
                @do `p27 + `p24
                @do `s08 is Flag`xCity`xInn`xDeed
                @routine dotaxes
                @end
        @end
@if room1.dat exist true then do
        @begin
        @readfile room1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x101
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room2.dat exist true then do
        @begin
        @readfile room2.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x102
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room3.dat exist true then do
        @begin
        @readfile room3.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x103
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room4.dat exist true then do
        @begin
        @readfile room4.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `p22 is 15000
                @do `s08 is Loki`xInn`x-`xRoom`x104
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room5.dat exist true then do
        @begin
        @readfile room5.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x105
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room6.dat exist true then do
        @begin
        @readfile room6.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x106
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room7.dat exist true then do
        @begin
        @readfile room7.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x107
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room8.dat exist true then do
        @begin
        @readfile room8.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x108
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room9.dat exist true then do
        @begin
        @readfile room9.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x109
                @do `p22 is 15000
                @routine dotaxes
                @end
        @end
@if room10.dat exist true then do
        @begin
        @readfile room10.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x110
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room11.dat exist true then do
        @begin
        @readfile room11.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x111
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room12.dat exist true then do
        @begin
        @readfile room12.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x112
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room13.dat exist true then do
        @begin
        @readfile room13.dat
`p20               
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x113 
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room14.dat exist true then do
        @begin
        @readfile room14.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x114
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room15.dat exist true then do
        @begin
        @readfile room15.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x115
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room16.dat exist true then do
        @begin
        @readfile room16.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x116
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if room17.dat exist true then do
        @begin
        @readfile room17.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x117
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@if castle71.dat exist true then do
        @begin
        @readfile castle71.dat
`p20
`p29
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Little`xShack`x-`xDragon`xHousing
                @do `p22 is 1
                @routine dotaxes
                @end
        @end
@if castle72.dat exist true then do
        @begin
        @readfile castle72.dat
`p20
`p29
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Little`xShack`x-`xDragon`xHousing
                @do `p22 is 1
                @routine dotaxes
                @end
        @end
@if castle73.dat exist true then do
        @begin
        @readfile castle73.dat
`p20
`p29
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Little`xShack`x-`xDragon`xHousing
                @do `p22 is 1
                @routine dotaxes
                @end
        @end
@if castle74.dat exist true then do
        @begin
        @readfile castle74.dat
`p20
`p29
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Little`xShack`x-`xDragon`xHousing
                @do `p22 is 1
                @routine dotaxes
                @end
        @end
@if castle75.dat exist true then do
        @begin
        @readfile castle75.dat
`p20
`p29
        @if `p20 is &playernum then do
                @begin
                @do `s08 is House`x-`xDragon`xHousing
                @do `p22 is 1
                @routine dotaxes
                @end
        @end
@if castle76.dat exist true then do
        @begin
        @readfile castle76.dat
`p20
`p29
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Beautiful`xHouse`x-`xDragon`xHousing
                @do `p22 is 5
                @routine dotaxes
                @end
        @end
@if castle78.dat exist true then do
        @begin
        @readfile castle78.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Royal's`xDeed`x-`xDragon`xHousing
                @do `s06 is Just`xeast`xof`xGreenTree.
                @do `p22 is 20000
                @do `p23 is 10000
                @routine dotaxes
                @end
        @end
@if house1.dat exist true then do
        @begin
        @readfile house1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is GreenTree`xManor
                @readfile bucket.dat
`p30
                @do `p22 is 5000
                @do `p23 is 2500
                @routine dotaxes
                @end
        @end
@if ffhouse1.dat exist true then do
        @begin
        @readfile ffhouse1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is House`x#1`x-`xFortress`xFear
                @do `p22 is 20000
                @do `p23 is 15000
                @routine dotaxes
                @end
        @end
@if ffhouse2.dat exist true then do
        @begin
        @readfile ffhouse2.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is House`x#2`x-`xFortress`xFear
                @do `p22 is 20000
                @do `p23 is 15000
                @routine dotaxes
                @end
        @end
@if ffhouse3.dat exist true then do
        @begin
        @readfile ffhouse3.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is House`x#3`x-`xFortress`xFear
                @do `p22 is 20000
                @do `p23 is 15000
                @routine dotaxes
                @end
        @end
@if ffhouse4.dat exist true then do
        @begin
        @readfile ffhouse4.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is House`x#4`x-`xFortress`xFear
                @do `p22 is 20000
                @do `p23 is 15000
                @routine dotaxes
                @end
        @end
@if ffhouse5.dat exist true then do
        @begin
        @readfile ffhouse5.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is House`x#5`x-`xFortress`xFear
                @do `p22 is 20000
                @do `p23 is 15000
                @routine dotaxes
                @end
        @end
@if jcastle.dat exist true then do
        @begin
        @readfile jcastle.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Torin`xCastle
                @do `p22 is 50000
                @do `p23 is 25000
                @routine dotaxes
                @end
        @end
@if 1stclass.dat exist true then do
        @begin
        @readfile 1stclass.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Extacy's`x1st`xClass`xHouse
                @do `p22 is 7000
                @do `p23 is 3000
                @routine dotaxes
                @end
        @end
@if myst1.dat exist true then do
        @begin
        @readfile myst1.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @readfile myst1a.dat
`p26
`p27
                @do `s08 is Myst`xInn
                @do `p22 is 50000
                @do `p23 is 10000
                @routine dotaxes
                @end
        @end
@if felhouse.dat exist true then do
        @begin
        @readfile felhouse.dat
`p20
`p26
`p27
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Felicity`xGuest`xHouse
                @do `p22 is 7000
                @do `p23 is 5000
                @routine dotaxes
                @end
        @end
@if blackdgn.dat exist true then do
        @begin
        @readfile blackdgn.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Black`xDragon`xCastle
                @do `p22 is 100000
                @do `p23 is 50000
                @readfile dragtres.dat
`p30
                @routine dotaxes
                @end
        @end
@if ship$.dat exist true then do
        @begin
        @readfile ship$.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do `s08 is 
                @do `p22 is 100000
                @do `p23 is 50000
                @readfile shiptres.dat
`p30
                @do `s08 is The`xSea`xSerpent
                @routine dotaxes
                @end
        @end
@if camelot.dat exist true then do
        @begin
        @readfile camelot.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do `s08 is 
                @do `p22 is 60000
                @do `p23 is 30000
                @readfile cam.dat
`p30
                @do `s08 is Castle`xCamelot
                @routine dotaxes
                @end
        @end
@if hong3.dat exist true then do
        @begin
        @readfile hong3.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do `s08 is 
                @do `p22 is 20000
                @do `p23 is 10000
                @readfile hong3a.dat
`p25
`p27
                @readfile tres5.dat
`p30
                @do `s08 is Hong`xKong`xStudio
                @routine dotaxes
                @end
        @end
@if room18.dat exist true then do
        @begin
        @readfile room18.dat
`p20
`s03
        @if `p20 is &playernum then do
                @begin
                @do `s08 is Loki`xInn`x-`xRoom`x118
                @do `p22 is 20000
                @routine dotaxes
                @end
        @end
@run doneprops in taxes.ref
; Location added by CNW, removed all those extra REF files.
@#LOCATION
@If &map is 1274 then `p29 is 1
@If &map is 1121 then `p29 is 1
@If &map is 320 then `p29 is 2
@If &map is 80 then `p29 is 2
@If &map is 1255 then `p29 is 3
@If &map is 1175 then `p29 is 3
@If &map is 1028 then `p29 is 4
@If &map is 1342 then `p29 is 4
@If &map is 55 then `p29 is 5
@If &map is 1340 then `p29 is 5
@#VOITTO
@routine LOCATION
@do `p20 is 0
@do `p21 is 0
@do delete tltpet`p29.dat
@readfile tlhouse`p29.dat
`p20
`s01
@readfile tltname`p29.dat
`s06
@if `p20 not &playernum then do
  @begin
   @writefile mail\mail`p20.dat
  `0TeamLord Reports:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 has slained your pet Dragon
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
@do addlog
  `0`n`2 has slained `s06's pet Dragon
     @routine seperate in gametxt.ref
@routine dismounth in vehicle.ref
@if `p29 is 1 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1121
        @end
@if `p29 is 2 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 80
        @end
@if `p29 is 3 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1175
        @end
@if `p29 is 4 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1342
        @end
@if `p29 is 5 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1340
        @end
@loadmap &map
@drawmap
@update
@closescript
@end
@#JUOKSU
@drawmap
@update
@do saybar
`$"Aaaarrgghh A Dragooonn!!Heeellp meee!!"`2you scream in pain
@closescript
@end
@#LOCATION
@If &map is 1274 then `p29 is 1
@If &map is 1121 then `p29 is 1
@If &map is 320 then `p29 is 2
@If &map is 80 then `p29 is 2
@If &map is 1255 then `p29 is 3
@If &map is 1175 then `p29 is 3
@If &map is 1028 then `p29 is 4
@If &map is 1342 then `p29 is 4
@If &map is 55 then `p29 is 5
@If &map is 1340 then `p29 is 5
@#REGISTER
@routine LOCATION
@do moveback
@busy
@if `p29 is 1 then `p20 is 11
@if `p29 is 2 then `p20 is 12
@if `p29 is 3 then `p20 is 13
@if `p29 is 4 then `p20 is 14
@if `p29 is 5 then `p20 is 15 
@routine getplace2 in myhome.ref
@do saybar
`$Would you like to make `s01 `$your home? [Y/n]
@do readspecial `s05 YN
@if `s05 is N then do
        @begin
        @do saybar
`$No problem, maybe another time you will decide to make this your home.
        @closescript
        @end
@if `s05 is Y then do
        @begin
        @do `p69 is `p20
        @do saybar
`$GREAT, `s01 `$is now your new home. Have fun.
        @dataload tlban`p29.idf &playernum `p20
        @if `p20 > 0 then goto BANNED
        @datasave tlmember.idf &playernum `p29
        @update
        @closescript
        @end
@update
@closescript
@#CHATWALL
@label latexwall
@routine LOCATION
@do moveback
@busy
@show
`r0`c  `r1  WRITING ON THE BOARD  `r0
@if tlchat`p29.txt exist false then do
 @begin
  @if `v06 is 1 then do
  @begin
   @writefile tlchat`p29.txt
   `1L`9a`%t`9e`1x `2: `0Get Lost!
  @end
  @if `v06 is 0 then do
  @begin
 @writefile tlchat`p29.txt
  `1L`9a`%t`9e`1x `2: `0www.angelfire.com/co/coolhouse
  `1L`9a`%t`9e`1x `2: `0Coolhouse BBS open 8.00-22.00. Number:(09)827-3726
  @end
 @end
@if tlchat`p29.txt exist true then do
 @begin
 @displayfile tlchat`p29.txt
 @end
@show
@
@DO `s04 is `%
@DO `s04 add `n
@DO STRIP `s04 
@DO `s04 add `x`2:`x`0
@DO `p20 is length `s04
@DO `p21 is 76
@DO `p21 - `p20
@DO WRITE
  `2Enter a message or `0ENTER`2 to abort.`\  `s04
@DO READSTRING `p21 NIL `s03 
@do stripbad `s03
@SHOW
@DO `p24 is length `s03
@IF `p24 less 3 then do
 @begin
 @drawmap
 @update
 @closescript
 @end
 @writefile tlchat`p29.txt
  `%`n`2 : `0`s03
 @do trim tlchat`p29.txt 17
 @drawmap
 @update
@end
@end
@#ownhouse
@routine LOCATION
@show
`\`\`4You already have a teamhouse
`k
@drawmap
@update
@closescript
@end
@#nomoney
@routine LOCATION
@do move 20 20
@do write
`2HaHa I want to train but I have no money!
@key bottom
@drawmap
@update
@closescript
@#NOTURNS
@routine LOCATION
@do move 20 20
@do write
`2HaHa I want to train but I have no time left!
@key bottom
@drawmap
@update
@closescript
@#Dragon
@do moveback
@label tdoor
@routine LOCATION
@If tltpet`p29.dat exists false then do
        @begin
        @writefile tltpet`p29.dat
1
1
1
`%
        @end
@readfile tltpet`p29.dat
`p20
`p21
`p22
`s01
@readfile tlhouse`p29.dat
`p24
@do `p23 = money
@if `v05 > 0 then do
        @begin
        @do `p28 is `v05
        @do `p28 / 96
        @end
@do move 1 1
@clear screen
@do `s03 is `p20
@do `s04 is `p21
@do `s05 is `p22
@do pad `s03 8
@do pad `s04 8
@do pad `s05 8
@routine viewdragon in dragons.ref
@readfile tltpet`p29.dat
`p20
`p21
`p22
`s01
@do move 50 1
@do write
`r1  `$-  `2Train your pet Dragon  `$-  `r0
@do move 55 2
@do write
`r4`% Strenght : `s03 `r0
@do move 55 3
@do write
`r4`% Defense  : `s04 `r0
@do move 55 4
@do write
`r4`% Hitpoints: `s05 `r0
@do move 55 5
@do write
`2Your money : `$$`p23`2
@do `p27 is 7
@if `p20 > 1000 then `p27 is 17
@do move 56 `p27
@do `v01 is 1
@choice
Help
>&money 499 <`p28 `p11 `4Train 1 Strenght `2(`$$500`2)
>&money 699 <`p28 `p11 `4Train 1 Defense  `2(`$$700`2)
>&money 399 <`p28 `p11 `4Train 1 Hitpoint `2(`$$400`2)
=`p24 &playernum `s01Change dragon colour
=`p24 &playernum `%Send dragon out
`3Get Lost
@if responce is 6 then do
        @begin
        @do move 55 7
        @do write
`0Your pet can only be sent
        @do move 55 8
        @do write
`0to TEAMs that are at `@WAR
        @do move 55 9
        @do write
`%                          `%
        @do move 55 10
        @do `p20 is 0
        @do `p21 is 0
        @do `p22 is 0
        @do `p23 is 0
        @do `p24 is 0
        @do `p25 is 0
        @do `s01 is `8-
        @do `s02 is `8-
        @do `s03 is `8-
        @do `s04 is `8-
        @do `s05 is `8-
        @if tltname1.dat exists true then do
                @begin
                @readfile tltname1.dat
`s01
                @do `p24 is `p29
                @do `p24 + 10
                @dataload tlrelate.idf `p24 `p20
                @end
        @if tltname2.dat exists true then do
                @begin
                @readfile tltname2.dat
`s02
                @do `p24 is `p29
                @do `p24 + 20
                @dataload tlrelate.idf `p24 `p21
                @end
        @if tltname3.dat exists true then do
                @begin
                @readfile tltname3.dat
`s03
                @do `p24 is `p29
                @do `p24 + 30
                @dataload tlrelate.idf `p24 `p22
                @end
        @if tltname4.dat exists true then do
                @begin
                @readfile tltname4.dat
`s04
                @do `p24 is `p29
                @do `p24 + 40
                @dataload tlrelate.idf `p24 `p23
                @end
        @if tltname5.dat exists true then do
                @begin
                @readfile tltname5.dat
`s05
                @do `p24 is `p29
                @do `p24 + 50
                @dataload tlrelate.idf `p24 `p25
                @end
        @if `s01 is `8- then `p41 is 1
        @if `s02 is `8- then `p42 is 1
        @if `s03 is `8- then `p43 is 1
        @if `s04 is `8- then `p44 is 1
        @if `s05 is `8- then `p45 is 1
        @do `v01 is 1
        @choice
!`p29 1 =`p41 0 =`p20 3 `$`s01
!`p29 2 =`p42 0 =`p21 3 `$`s02
!`p29 3 =`p43 0 =`p22 3 `$`s03
!`p29 4 =`p44 0 =`p23 3 `$`s04
!`p29 5 =`p45 0 =`p25 3 `$`s05
Forget it
        @do write
`\`\`\`\`%Feature currently unavailable.
        @key bottom
        @do goto dragon
        @end
@if response is 5 then do
        @begin
        @readfile tltpet`p29.dat
`p20
`p21
`p22
`s01
        @do move 38 15
        @do write
`2Which colour do you wish your pet to be?
        @do move 38 16
        @do write
`s01ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
        @do move 38 17
        @do write
`s01³  `1(1)   `4(4)   `7(7)   `0(0)   `#(#)
        @do move 38 18
        @do write
`s01³  `2(2)   `5(5)   `8(8)   `!(!)   `$($)
        @do move 38 19
        @do write
`s01³  `3(3)   `6(6)   `9(9)   `@(@)   `%(%)
        @do move 38 20
        @do write
Press the corrisponding colour key :
        @do readspecial `s01 0123456789!@#$%
        @do `s02 is `
        @do `s02 add `s01
        @do delete tltpet`p29.dat
        @writefile tltpet`p29.dat
`p20
`p21
`p22
`s02
        @do goto tdoor
        @end
@if response is 1 then do
@begin
@do move 1 1
@clear screen
@show
`r0               `r1  `$-  `2Training your pet Dragon  `$-  `r0
                      `r4`% Strenght : `s03 `r0
                      `r4`% Defense  : `s04 `r0
                      `r4`% Hitpoints: `s05 `r0
                `2Help????What help??You need help??
             Just train your dragon and don't get killed.
       `2- `%It takes 15 minutes to train for 1 point.
       `2- `%Your dragon will protect your members in the
             house and guard your door.
`r0               `r1  `$-  `2Talk to the TeamGuard to see  `$-  `r0
       `2- `%A complete list of official members of the team.
       `2- `%Relations with other teams.
       `2- `%If not a member, they can request it.
@key bottom
@show
                       `8[soon in TeamLord]
`2- Dragon can be sent out to attack other team house dragons.
`2- Dragon can be sent out to attack other players.
`2- Team Owner can control who is members and BAN them if they wish.
`2- If a player is BAN, dragon will chase them down if they enter the house.
                                                            `8[only in CNW!]
@key bottom
@do goto tdoor
@end
@if response is 2 then do
        @begin
        @if money < 500 then do
                @begin
                @do goto nomoney
                @end
;TURNS, it takes time to train a dragon.
        @if `v05 > 0 then do
                @begin
                @do `p28 is `v05
                @do `p28 / 96
                @if `p11 < `p28 then do
                        @begin
                        @do goto noturns
                        @end
                @do `p11 - `p28
                @end
        @do money - 500
        @readfile tltpet`p29.dat
`p20
`p21
`p22
`s01
        @do `p20 + 1
        @do delete tltpet`p29.dat
        @writefile tltpet`p29.dat
`p20
`p21
`p22
`s01
        @do goto tdoor
        @end
@if response is 3 then do
        @begin
        @if money < 700 then do
                @begin
                @do goto nomoney
                @end
;TURNS, it takes time to train a dragon.
        @if `v05 > 0 then do
                @begin
                @do `p28 is `v05
                @do `p28 / 96
                @if `p11 < `p28 then do
                        @begin
                        @do goto noturns
                        @end
                @do `p11 - `p28
                @end
        @do money - 700
        @do `p21 + 1
        @do delete tltpet`p29.dat
        @writefile tltpet`p29.dat
`p20
`p21
`p22
`s01
        @do goto tdoor
        @end
@if response is 4 then do
        @begin
        @if money < 400 then do
                @begin
                @do goto nomoney
                @end
;TURNS, it takes time to train a dragon.
        @if `v05 > 0 then do
                @begin
                @do `p28 is `v05
                @do `p28 / 96
                @if `p11 < `p28 then do
                        @begin
                        @do goto noturns
                        @end
                @do `p11 - `p28
                @end
@do money - 400
@do `p22 + 1
@do delete tltpet`p29.dat
@writefile tltpet`p29.dat
`p20
`p21
`p22
`s01
@do goto tdoor
@end
@drawmap
@update
@closescript
@#MYBANK
;team treasury
@routine LOCATION
@do moveback
@do `p20 is 0
@if tltres`p29.dat exist true then do
  @begin
  @readfile tltres`p29.dat
`p20
  @
  @end
@clearblock 20 21
@do move 3 21
@do write
`r0`2  Treasury is at `$$`p20`2 - (`0T`2)ake, (`0L`2)eave or (`0N`2)evermind? [`0N`2] :`%`x
@do readspecial `s01 NTL
@if `s01 is N then do
 @begin
 @do saybar
You close the safe, carefully.
 @closescript
 @end
@if `s01 is T then do
  @begin
  @do move 5 23
  @do write
`0`r0Amount? `0: `%
 @do readnum 10 0
  @do `p21 is `v40
  @if `p21 < 1 then `p21 is 0
  @if `p21 > `p20 then do
    @begin
    @clearblock 21 24
    @do saybar
Not enough in here for that.
    @closescript
    @end
 @if `p21 is 0 then do
   @begin
    @clearblock 21 24
    @do saybar
You take nothing.
    @closescript
   @end
//withdrawl.. we read from the file again so cheating won't be possible with
//correct timing
  @readfile tltres`p29.dat
`p20
  @
  @if `p20 < `p21 then do
    @begin
    @clearblock 21 24
    @do saybar
Oh no!  Someone took the money while you were thinking about it!
    @closescript
    @end
    @do `p20 - `p21
    @do money + `p21
  @do delete tltres`p29.dat
  @writefile tltres`p29.dat
`p20
  @
    @clearblock 21 24
    @do saybar
`2You take `$`p21`2 from the treasury.
//if not owner, lets notify him
@readfile tlhouse`p29.dat
`p20
`s01
@
;load owner and current password
@if `p20 not &playernum then do
  @begin
   @writefile mail\mail`p20.dat
  `0TeamLord Reports:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 has taken `$$`p21 `2from the treasury.
  @end
  @closescript
  @end
@if `s01 is L then do
  @begin
  @do move 5 23
  @do write
`0`r0Amount? `0: `%
 @do readnum 10 &money
  @do `p21 is `v40
  @if `p21 < 1 then `p21 is 0
  @if `p21 > money then do
    @begin
    @clearblock 21 24
    @do saybar
You are not carrying that much!
    @closescript
    @end
 @if `p21 is 0 then do
   @begin
    @clearblock 21 24
    @do saybar
You decide to leave nothing.  Ha!
    @closescript
   @end
  @do money - `p21
//deposit.. we read from the file again so cheating won't be possible with
//correct timing
  @readfile tltres`p29.dat
`p20
  @
  @do `p20 + `p21
  @do delete tltres`p29.dat
  @writefile tltres`p29.dat
`p20
  @
    @clearblock 21 24
//if not owner, lets notify him
@readfile tlhouse`p29.dat
`p20
`s01
@
;load owner and current password
@if `p20 not &playernum then do
  @begin
   @writefile mail\mail`p20.dat
  `0TeamLord Reports:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 has deposited `$$`p21 `2to the treasury.
  @end
    @do saybar
`2You leave `$`p21`2 in the treasury.
  @closescript
  @end
@#HEALME
@routine LOCATION
;free heal
@offmap
@do moveback
@show
`r0`c  `r1  The Healers  `r0
  `2The good doctor looks you over for wounds carefully.
  `%YOU ARE COMPLETEY HEALED.
`k
@do `p02 is `p03
@drawmap
@update
@#doorguard
@do moveback
@busy
@dataload tlban`p29.idf &playernum `p20
@if `p20 > 0 then goto FIGHTGUARD
@label startg
@routine LOCATION
@if tlhouse`p29.dat exist false then do
  @begin
  @do saybar
`0"What are thou doing here??" `2the guard barks.
  @closescript
  @end
@readfile tlhouse`p29.dat
`p20
`s05
@readfile tltname`p29.dat
`s04
@if `p20 not &playernum then do
        @begin
        @do move 1 1
        @clear screen
        @show
`r0`c  `r1 `@Team `s04 `r0
  `2"Hi, what can I do for you today?" `1says the Team Guard.
        @do `v01 is 1
        @do `p24 is 0
        @dataload tlmember.idf &playernum `p24
        @dataload tlmember.idf &playernum `p24
        @choice
Show me the Team Relations
List me the Team Members
Who's running this Operation?
=`p24 0 Make me a MEMBER!
=`p24 `p29 Write TeamMail
Leave
        @if responce is 6 then do
                @begin
                @drawmap
                @update
                @closescript
                @end
        @if responce is 5 then goto MAILTEAM
        @if responce is 2 then do
                @begin
                @routine MEMBERS
                @end
        @if responce is 4 then do
                @begin
                @datasave tlmember.idf &playernum `p29
                @end
        @if responce is 3 then do
                @begin
                @DO `s02 IS GETNAME `p20
                @show
`\`\`\  `2"Our Team leader is `s02."
                @key bottom
                @end
        @if responce is 1 then do
                @begin
                @do `s09 is doorguard
                @do `s10 is TLHOUSE.REF
                @do `p29 is 0
                @routine STARTREL
                @end
        @routine LOCATION
        @do goto startg
        @end
@do `v01 is 1 
@show
`r0`c  `r1 `@Team LEADER `s04 `@Options `r0
  `2The huge guard snaps to attention when he sees you are going to
  address him.
@do write
`x`x
@choice
Set Team password (`0`s05`%)
Ownership options
Change the Name of the team
Team Members
Team Relations
Write TeamMail
Leave
@if responce is 6 then goto MAILTEAM
@if responce is 4 then do
        @begin
        @routine MEMBERS
        @end
@if responce is 5 then do
        @begin
@label STARTREL
        @do move 1 1
        @clear screen
        @show
`r4`$ÚÄÄ `%TEAM `$ÄÄÄÄÄÄÄÄÄ`%vs`$ÄÄÄÄÄÄÄÄÄ> `%TEAM `$ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ> `%STATUS `$ÄÄÄ¿
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0 `r1`%Team     `r0
`r4`$³`r0                                                                   `r4³`r0 `r1`%Relations`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$³`r0                                                                   `r4³`r0
`r4`$ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ`r0
        @do `p20 is 0
        @do `p25 is -2
        @do `p26 is 2
        @do `p21 is 0
        @do `s01 is `8-
        @do `s02 is `8-
        @do `s03 is `8-
        @do `s04 is `8-
        @do `s05 is `8-
        @if tltname1.dat exists true then do
                @begin
                @readfile tltname1.dat
`s01
                @end
        @if tltname2.dat exists true then do
                @begin
                @readfile tltname2.dat
`s02
                @end
        @if tltname3.dat exists true then do
                @begin
                @readfile tltname3.dat
`s03
                @end
        @if tltname4.dat exists true then do
                @begin
                @readfile tltname4.dat
`s04
                @end
        @if tltname5.dat exists true then do
                @begin
                @readfile tltname5.dat
`s05
                @end
        @do move 2 2
        @do write
`%`s01
        @do move 2 6
        @do write
`%`s02
        @do move 2 10
        @do write
`%`s03
        @do move 2 14
        @do write
`%`s04
        @do move 2 18
        @do write
`%`s05
        @do `p26 is 2
        @do `p25 is 1
       @label names
        @if `p25 is 1 then do
                @begin
                @if `s01 is `8- then do
                        @begin
                        @do `p26 + 4
                        @do goto SKIPNAME
                        @end
                @end
        @if `p25 is 2 then do
                @begin
                @if `s02 is `8- then do
                        @begin
                        @do `p26 + 4
                        @do goto SKIPNAME
                        @end
                @end
        @if `p25 is 3 then do
                @begin
                @if `s03 is `8- then do
                        @begin
                        @do `p26 + 4
                        @do goto SKIPNAME
                        @end
                @end
        @if `p25 is 4 then do
                @begin
                @if `s04 is `8- then do
                        @begin
                        @do `p26 + 4
                        @do goto SKIPNAME
                        @end
                @end
        @if `p25 is 5 then do
                @begin
                @if `s05 is `8- then do
                        @begin
                        @do `p26 + 4
                        @do goto SKIPNAME
                        @end
                @end
        @if `p25 NOT 1 then do
                @begin
                @do move 30 `p26
                @do write
`%`s01
                @do `p24 is `p25
                @do `p24 + 10
                @dataload tlrelate.idf `p24 `p21
                @routine RELATIONS
                @do move 60 `p26
                @do write
`%`s06
                @do `p24 + 1 
                @do `p26 + 1 
                @end
        @if `p25 NOT 2 then do
                @begin
                @do move 30 `p26
                @do write
`%`s02
                @do `p24 is `p25
                @do `p24 + 20
                @dataload tlrelate.idf `p24 `p21
                @routine RELATIONS
                @do move 60 `p26
                @do write
`%`s06
                @do `p24 + 1 
                @do `p26 + 1 
                @end
        @if `p25 NOT 3 then do
                @begin
                @do move 30 `p26
                @do write
`%`s03
                @do `p24 is `p25
                @do `p24 + 30
                @dataload tlrelate.idf `p24 `p21
                @routine RELATIONS
                @do move 60 `p26
                @do write
`%`s06
                @do `p24 + 1 
                @do `p26 + 1 
                @end
        @if `p25 NOT 4 then do
                @begin
                @do move 30 `p26
                @do write
`%`s04
                @do `p24 is `p25
                @do `p24 + 40
                @dataload tlrelate.idf `p24 `p21
                @routine RELATIONS
                @do move 60 `p26
                @do write
`%`s06
                @do `p24 + 1 
                @do `p26 + 1 
                @end
        @if `p25 NOT 5 then do
                @begin
                @do move 30 `p26
                @do write
`%`s05
                @do `p24 is `p25
                @do `p24 + 50
                @dataload tlrelate.idf `p24 `p21
                @routine RELATIONS
                @do move 60 `p26
                @do write
`%`s06
                @do `p24 + 1 
                @do `p26 + 1 
                @end
       @label SKIPNAME
        @do `p25 + 1
        @if `p25 < 6 then goto names
        @if `p29 is 0 then do
                @begin
                @key bottom
                @run `s09 in `s10
                @closescript
                @end
        @do move 70 7
        @do write
`r0 `r1`$Would    `r0
        @do move 70 8
        @do write
`r0 `r1`$you like `r0
        @do move 70 9
        @do write
`r0 `r1`$to change`r0
        @do move 70 10
        @do write
`r0 `r1`$relations`r0
        @do move 70 11
        @do write
`r0 `r1`$         `r0
        @do move 70 12
        @do write
`r0 `r1`7  [N/Y]  `r0
        @do move 72 13
        @do readspecial `s07 NY
        @if `s07 is Y then goto RELATECH
        @do goto startg
        @end
@if response is 3 then do
  @begin
 @do write
`\`x`x
  @do readstring 75 NIL `s06 
  @do `p20 is length `s06
  @if `p20 < 2 then do
   @begin
@do goto startg
@end
@show
`\  `0"Alright!"
@do stripbad `s06
@do delete tltname`p29.dat
@writefile tltname`p29.dat
`s06
@do goto startg
 @end
  
@if responce is 2 then do
 @begin
 @show
`r0`c  `r1 Ownership Options `r0
  `2You retrieve your deed and carefully look it over.
   
   @do `v01 is 1
   @do write
`x`x
   @choice
Transfer deed to someone else
Sell property back to the bank for `$5000`%.
Do nothing of the sort
 @if response is 1 then do
   @begin
   @show
`\`\  `2Transfer to whom?
   @chooseplayer `p20
   @if `p20 is 0 then do
    @begin
    @show
  `2You decide to keep your domain - for now.`\`\`k
    @do goto startg
    @end
   @do `s02 is getname `p20
   @show
`2  Are you sure you wish to give your castle to `0`s02`2?
@do write
`x`x
@choice
Yes
Not on your life.
 @if responce is 2 then do
   @begin
    @show
`\`\  `2You decide to keep your domain - for now.`\`\`k
    @do goto startg
   @end
  @do delete tlhouse`p29.dat
  @writefile tlhouse`p29.dat
`p20
`s01
   @writefile mail\mail`p20.dat
  `0TeamLord note:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 has transferred ownership of TeamHouse #`p29 to you. 
  Password to enter will remain `0"`s01"`2 unless
  `2you come by and change it.
    @do addlog
  `0`n`2 has given `%TeamHouse #`p29`2 to `0`s02`2!
     @routine seperate in gametxt.ref
    @show
`\`\  `2Deed transfered.  Oh well - it was fun while it lasted.`\`\`k
   @do goto done
   @end
  @if response is 2 then do
    @begin
    @show
`\`\`2  Are you sure you wish to sell your castle back to the bank?`\
@do `v01 is 1
@do write
`x`x
@choice
Yes
Not on your life.
 @if responce is 2 then do
   @begin
    @show
`\`\  `2You decide to keep your domain - for now.`\`\`k
    @do goto startg
   @end
  @do `p30 is 2
  @do `v40 is 5000
  @routine widthdraw in vaults.ref
  @do delete tlhouse`p29.dat
  @do money + 5000
  @show
`\`\  `%HOUSE SOLD!`2`\`\`k
    @do addlog
  `0`n`2 has sold `%TeamHouse #`p29`2 back to the bank!
    @routine seperate in gametxt.ref
    @do goto done
    @end
  @do goto startg
 @end
@if responce is 1 then do
  @begin
  @do write
`\`\  `0"And the new password, s&sir?" `2`\  `2Password:`x
  @do readstring 40 `s01 `s01 
  @do `p20 is length `s01
  @if `p20 < 2 then do
   @begin
   @show
`\`\  `2You decide the current password is ok.`\`\`k
   @do goto startg
   @end
  @do delete tlhouse`p29.dat
  @writefile tlhouse`p29.dat
&playernum
`s01
@show
`\`\  `0"Yes s&sir, I will not forget it!" `2the guard promises.`\`\`k
   @do goto startg
  @end
@drawmap
@update
@#sign
@routine LOCATION
@bitset `t92 1 1
@do moveback
 @if tlhouse`p29.dat exist false then do
 @begin
 @do saybar
TeamHouse for sale.
 @end 
@if tlhouse`p29.dat exist true then do
 @begin
@readfile tltname`p29.dat
`s06
@
@readfile tlhouse`p29.dat
`p20
`s01
@
@do `s01 is getname `p20
 @do saybar
`2TeamHouse of `s06.
 @end 
@#enter
@routine LOCATION
@do moveback
@dataload tlban`p29.idf &playernum `p20
@if `p20 > 0 then goto BANNED
@offmap
@if tlhouse`p29.dat exist false then do
  @begin
  @show
`r0`c  `r1 `%For Sale `r0
  `2TeamHouse 1.
  `2 If you want start a team you must buy one of these TeamHouses
  `2The asking price is `$$10,000`2.
@do `v01 is 1
@do write
`x`x
@choice
>&money 9999 Start a Team.
<&money 10000 Sigh wistfully and leave since you don't have enough.
>&money 9999 Leave.
@
@if responce is 1 then do
  @begin
  @if tlhouse`p29.dat exist true then do
    @begin
    @show
`\`\  `2Oh crap!  Someone bought it while you were thinking about it.  You
  will regret your snail like thinking for the rest of your days.`\`\`k
    @do goto done
    @end
@if `p29 is 1 then `p29 is 2
@if `p29 is 2 then `p29 is 1
@if `p29 is 3 then `p29 is 1
@if `p29 is 4 then `p29 is 1
@if `p29 is 5 then `p29 is 1
@if tlhouse`p29.dat exist true then do
        @begin
        @readfile tlhouse`p29.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do goto ownhouse
                @end
        @end
@if `p29 is 1 then `p29 is 2
@if `p29 is 2 then `p29 is 3
@if tlhouse`p29.dat exist true then do
        @begin
        @readfile tlhouse`p29.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do goto ownhouse
                @end
        @end
@if `p29 is 2 then `p29 is 3
@if `p29 is 3 then `p29 is 4
@if tlhouse`p29.dat exist true then do
        @begin
        @readfile tlhouse`p29.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do goto ownhouse
                @end
        @end
@if `p29 is 3 then `p29 is 4
@if `p29 is 4 then `p29 is 5
@if tlhouse`p29.dat exist true then do
        @begin
        @readfile tlhouse`p29.dat
`p20
`s01
        @if `p20 is &playernum then do
                @begin
                @do goto ownhouse
                @end
        @end
@routine LOCATION
@writefile tlhouse`p29.dat
&playernum
NONE
    @do `p30 is 2
    @do `v40 is 10000
    @routine deposit in vaults.ref
    @do money - 10000
    @routine LOCATION
    @do addlog
  `0`n `2buys `%TeamHouse #`p29`2!
     @routine seperate in gametxt.ref
  @show
`r0`c  `r1 `%Why hello there, landowner! `r0
`\`2  Nice job!  You now own this house!
  `2Enjoy your new home.`\`\`k
  @end
@label done
@drawmap
@update
@closescript
  @end
@readfile tlhouse`p29.dat
`p20
`s01
@do `p21 is deleted `p20
@if `p21 is 1 then do
  @begin
   ;owner got deleted!!!  Lets put it up for sale again.
   @do delete tlhouse`p29.dat
   @do delete tlban`p29.dat
    @do addlog
  `%TeamHouse #`p29`2 is put on the market today.
     @routine seperate in gametxt.ref
   ;run script again
   @do goto enter
  @end
@if `p20 not &playernum then do
  @begin
  @do `s02 is getname `p20
  @do upcase `s01
  @readfile tltname`p29.dat
`s06
  @show
`r0`c  `r1 `s06 `r0
`2  A head pops over the gate.  `0"Halt, you!  What business have you with
  my lord and master, `%`s02`0?" `2the door guard asks.
@do write
`x`x
@do `v01 is 1
@choice
Give Password
Attack the Door Dragon
Run
@if response is 2 then do
@begin
@label FIGHTDRAG
@readfile tltpet`p29.dat
`p20
`p21
`p22
`s01
@routine VIEWDRAGON in DRAGONS.REF
@readfile tltpet`p29.dat
`p20
`p21
`p22
`s01
@key bottom
@fight
;name
pet Dragon
;string said when you see him
`0"Muaarrhhh!!"`2yells the dragon
;power move kill string
HaHa!! and now kill all team members!!
;sex - 1 is male, 2 is female, 3 is it
3
;weapon and strength for the weapon, up to 5
grills you|`p20
NONE|NONE
NONE|NONE
NONE|NONE
NONE|NONE
;defense
`p21
;gold reward
0
;experience
1
;hit points
`p22
;if win: ref file|name or NONE
TLDRAG.REF|VOITTO
;if lose: ref file|name or NONE
GAMETXT.REF|DIE
;if runs: ref file|name or NONE
TLDRAG.REF|JUOKSU
@end
 
 @if response is 1 then do
   @begin
   @do write
`\`\  `2Say what? :`x
  @do readstring 40 NIL `s03 
  @do upcase `s03
  @do upcase `s01
  @if `s03 is `s01 then do
    @begin
  @readfile tltname`p29.dat
`s06
    @show
`\`\  `0"Welcome to `%`s06`0,"`2 the guard smiles as he opens the gate.`\`\`k
    @do goto letmein
    @end
  @readfile tltname`p29.dat
`s06
  @writefile mail\mail`p20.dat
  `0`s06 Reports:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`0  `n`2 attempted to sweet talk the guard by saying
  `0"`s03"`2.  `2He was `bKICKED`2 away.
   @show
`\`\  `2The guard doesn't look too interested.`\`\`k
   @do goto done
   @end
 @do goto done
@end
;let him in
@label letmein
@routine dismounth in vehicle.ref
@if `p29 is 1 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1121
        @end
@if `p29 is 2 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 80
        @end
@if `p29 is 3 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1175
        @end
@if `p29 is 4 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1342
        @end
@if `p29 is 5 then do
        @begin
        @do x is 39
        @do y is 19
        @do map is 1340
        @end
@loadmap &map
@drawmap
@update
@#RELATECH
@routine LOCATION
@do move 1 1
@clear screen
@SHOW
                  `r1 `$- `%CHANGING RELATIONS `$- `r0
     `2Here you can select your current STATUS with other teams.
                       `7Ú`8/`7ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ`8\`7¿
                       `7³                         ³
                       `7³                         ³
                       `7³                         ³
                       `7³                         ³
                       `7³                         ³
                       `7À`8\`7ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ`8/`7Ù
@do move 25 6
@do `v01 is 1
@do `p41 is 0
@do `p42 is 0
@do `p43 is 0
@do `p44 is 0
@do `p45 is 0
@if `s01 is `8- then `p41 is 1
@if `s02 is `8- then `p42 is 1
@if `s03 is `8- then `p43 is 1
@if `s04 is `8- then `p44 is 1
@if `s05 is `8- then `p45 is 1
@choice
!`p29 1 =`p41 0 `$`s01
!`p29 2 =`p42 0 `$`s02
!`p29 3 =`p43 0 `$`s03
!`p29 4 =`p44 0 `$`s04
!`p29 5 =`p45 0 `$`s05
`%Do Nothing
@if responce is 6 then goto startg
@if responce is 1 then do
        @begin
        @do `p24 is `p29
        @do `p24 + 10
        @do `s07 is `s01
        @end
@if responce is 2 then do
        @begin
        @do `p24 is `p29
        @do `p24 + 20
        @do `s07 is `s02
        @end
@if responce is 3 then do
        @begin
        @do `p24 is `p29
        @do `p24 + 30
        @do `s07 is `s03
        @end
@if responce is 4 then do
        @begin
        @do `p24 is `p29
        @do `p24 + 40
        @do `s07 is `s04
        @end
@if responce is 5 then do
        @begin
        @do `p24 is `p29
        @do `p24 + 50
        @do `s07 is `s05
        @end
@dataload tlrelate.idf `p24 `p21
@routine RELATIONS
@do move 1 13
@show
`2 Your current relations with `$`s07 `2is `s06`2.
`2                  How do you wish to change it to.
                           `7Ú`8/`7ÄÄÄÄÄÄÄ`8\`7¿
                           `7³         ³
                           `7³         ³
                           `7³         ³
                           `7³         ³
                           `7³         ³
                           `7À`8\`7ÄÄÄÄÄÄÄ`8/`7Ù
@do move 29 16
@do `v01 is 1
@choice
`8  NONE   `%
`5  PEACE  `%
`$ ALLIES  `%
`@   WAR   `%
`%No change
@if responce is 1 then do
        @begin
        @datasave tlrelate.idf `p24 0
        @end
@if responce is 2 then do
        @begin
        @datasave tlrelate.idf `p24 1
        @end
@if responce is 3 then do
        @begin
        @datasave tlrelate.idf `p24 2
        @end
@if responce is 4 then do
        @begin
        @datasave tlrelate.idf `p24 3
        @end
@do goto startg
@#RELATIONS
@if `p21 is 0 then `s06 is `r0`8NONE
@if `p21 is 1 then `s06 is `r0`5PEACE
@if `p21 is 2 then `s06 is `r0`$ALLIES
@if `p21 is 3 then `s06 is `r0`@WAR
@#MEMTABLE
@do `p40 is 0
@do move 1 1
@clear screen
@readfile tltname`p29.dat
`s04
@show
                     `r0  `r1 `@Team `s04 `@Members `r0
ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
@label members2
@do write
³                         ³                         ³                        ³`\
@do `p40 + 1
@if `p40 < 15 then goto members2
@do write
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÁÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ`\
@#MEMBERS
@do `p41 is 0
@do `p42 is 0
@routine MEMTABLE
@do `p25 is 0
@do `p28 is 0
@do `p40 is 2
@do `p41 is 2
@label MEMBERS1
@do `p28 + 1
@DO `p25 IS DELETED `p28
@if `p25 is 1 then do
        @begin
        @datasave tlmember.idf `p28 0
        @end
@dataload tlmember.idf `p28 `p27
@if `p27 is `p29 then do
        @begin
        @if `p42 is 15 then `p40 is 28
        @if `p42 is 31 then `p40 is 54
        @if `p42 is 46 then do
                @begin
                @do `p40 is 2
                @do `p41 is 2
                @key bottom
                @routine memtable
                @end
        @do `p41 + 1
        @do `s03 is getname `p28
        @do move `p40 `p41
        @do `p42 + 1
        @do write
`%`s03
        @end
@if `p28 is &totalaccounts then do
        @begin
        @readfile tlhouse`p29.dat
`p20
        @if `p20 is &playernum then goto MEMOPTION
        @do move 30 19
        @do write
`r1 `@TOTAL MEMBERS: `p42 `r0
        @key bottom
        @do goto startg
        @end
@do goto MEMBERS1
@#MEMOPTION
; Only TeamLeader should access these options.
@do move 50 19
@do write
`r1 `@TOTAL MEMBERS: `p42 `r0
@do move 10 19
@do `v01 is 1
@choice
`%Do Nothing
`4Kick Someone
`@Ban Someone
`7View BAN list
@if responce is 1 then goto startg
@if responce is 4 then goto VIEWBANS
@CLEARBLOCK 19 23
@do move 10 19
@CHOOSEPLAYER `p20
@datasave tlmember.idf `p20 0
@routine LOCATION
@readfile tltname`p29.dat
`s01
@if responce is 2 then do
        @begin
        @writefile mail\mail`p20.dat
  `0Team `s01 `0Message:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
 `%You have been KICKED from TEAM `s01
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
        @end
@if responce is 3 then do
        @begin
        @datasave tlban`p29.idf `p20 1
        @writefile mail\mail`p20.dat
  `0Team `s01 `0Message:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
 `%You have been BAN from TEAM `s01
 `%Do not attempt to return or you will be hunted down.
 `%If you wish to plea for re-entry, you must contact the
 `%Team Leader.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
        @end
@do goto startg
@#BANNED
@do move 1 1
@clear screen
@run FIGHTDRAG
@#FIGHTGUARD
; for now just say this
@do saybar
`$TeamGuard: `%what are you doing in here?
@drawmap
@update
@#VIEWBANS
@routine LOCATION
@do `p41 is 0
@do `p42 is 0
@routine MEMTABLE
@do move 1 1
@readfile tltname`p29.dat
`s04
@do write
                     `r0  `r1 `@Team `s04 `@BANS `r0                            `%
@do `p25 is 0
@do `p28 is 0
@do `p40 is 2
@do `p41 is 2
@label VIEWBANS2
@do `p28 + 1
@DO `p25 IS DELETED `p28
@if `p25 is 1 then do
        @begin
        @datasave tlban`p29.idf `p28 0
        @end
@dataload tlban`p29.idf `p28 `p27
@if `p27 > 0 then do
        @begin
        @if `p42 is 15 then `p40 is 28
        @if `p42 is 31 then `p40 is 54
        @if `p42 is 46 then do
                @begin
                @do `p40 is 2
                @do `p41 is 2
                @key bottom
                @routine memtable
                @end
        @do `p41 + 1
        @do `s03 is getname `p28
        @do move `p40 `p41
        @do `p42 + 1
        @do write
`%`s03
        @end
@if `p28 is &totalaccounts then do
        @begin
        @do move 30 19
        @do write
`r1 `@TOTAL BANS: `p42 `r0
        @do move 2 19
        @do `v01 is 1
        @choice
`%Do Nothing
`3Un-BAN someone
`#Un-BAN everyone
        @if responce is 1 then goto startg
        @if responce is 3 then do
                @begin
                @do delete tlban`p29.idf
                @do goto startg
                @end
        @if responce is 2 then do
                @begin
                @CLEARBLOCK 19 23
                @do move 10 19
                @CHOOSEPLAYER `p20
                @datasave tlban`p29.idf `p20 0
                @routine LOCATION
                @writefile mail\mail`p20.dat
  `0Team `s04 `0Message:
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
 `%You have been REMOVED from the BAN list.
`2-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
`k
                @end
        @do goto startg
        @end
@do goto VIEWBANS2
@#MAILTEAM
@do `s01 is `x
@do `s02 is `x
@do `s03 is `x
@do `s04 is `x
@do `s05 is `x
@do `s06 is `x
@do `s07 is `x
@do `s08 is `x
@do `s09 is `x
@do `s10 is `x
@do write
`\`\`%Write your message, max of 9 lines. "-" to end`\
@do write
`81:`x
@DO READSTRING 70 - `s02
@if `s02 is - then goto startg
@do write
`\`82:`x
@DO READSTRING 70 - `s03
@if `s03 is - then goto writeit
@do write
`\`83:`x
@DO READSTRING 70 - `s04
@if `s04 is - then goto writeit
@do write
`\`84:`x
@DO READSTRING 70 - `s05
@if `s05 is - then goto writeit
@do write
`\`85:`x
@DO READSTRING 70 - `s06
@if `s06 is - then goto writeit
@do write
`\`86:`x
@DO READSTRING 70 - `s07
@if `s07 is - then goto writeit
@do write
`\`87:`x
@DO READSTRING 70 - `s08
@if `s08 is - then goto writeit
@do write
`\`88:`x
@DO READSTRING 70 - `s09
@if `s09 is - then goto writeit
@do write
`\`89:`x
@DO READSTRING 70 - `s10
@label WRITEIT
@do `p25 is 0
@do `p28 is 0
@do `p40 is 2
@do `p41 is 2
@label MAIL2
@do `p28 + 1
@DO `p25 IS DELETED `p28
@if `p25 is 1 then do
        @begin
        @datasave tlmember.idf `p28 0
        @end
@dataload tlmember.idf `p28 `p27
@if `p27 is `p29 then do
        @begin
        @do `s01 is @MESSAGE`x`N
        @writefile mail\mail`p28.dat
`s01
        @readfile tltname`p29.dat
`s01
        @writefile mail\mail`p28.dat
  `0TeamLord `s01 `0Reports:
`s02        
        @if `s03 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s03
        @if `s04 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s04
        @if `s05 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s05
        @if `s06 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s06
        @if `s07 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s07
        @if `s08 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s08 
        @if `s09 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s09
        @if `s10 is - then goto endwrite
        @writefile mail\mail`p28.dat
`s10
@label endwrite
        @do `s01 is @DONE
        @writefile mail\mail`p28.dat
`s01
        @do `s01 is @REPLY`x&playernum
        @writefile mail\mail`p28.dat
`s01
        @end
             
@if `p28 is &totalaccounts then do
        @begin
        @do goto startg
        @end
@do goto mail2
@#done
@#turgbarak
@show
  `0"That rascal!  How dare the council let Barak take my position!"
  `$"Yeah, well, they did.  Any ideas?  I've pretty much done all the
  detective work I can..."
  `2Turgon looks discouraged.  `0"I know Barak is at fault - if only you can
  prove it!"
`k
@bitset `t01 1 1
@bitset `t01 2 1
@bitset `t01 3 1
@bitset `t01 4 1
@#turgmeet
@do `v01 is 1
@pauseoff
@show
`r0`c[4C[0mÜÛÜ  ÛÜ[1mß    Üß [0mß[1mÛÛÛ[0mÜÛ[1mÛÛ[0mÜÛÛÜÜ [33mÜ[1;37mÜ
   [0mÜÜÜÛß  [1mÜ    [0mÛß[5C[33mÜÜÜÜÜ[37mßßÛÛÛß[33mß [1;37mÛ
   [0mÛßÜÛ Û[1mÜÛ[8C[0;33mÜßß[5Cßß [37mß[33mÞß [37mß
   ÛÜÜ [1mÛß[21C[0;33mßÛÝ
    [37mÛÛ[1mß[9C[0;33mßÜ[9C[1;37mþ[0;36mß [33mßÛÛ[9C[1;37mTurgon 
[A[49Cis a bearded old man [0m- [1myou
   [0mÛ ÛÜ    [33mÛÛßß  ßÛÜ ÜÜ   [36mÜ[1mß [0;33mÜÛ ÛÛ[8C[1;37msee mu
[A[48Cch wisdom in his eyes [0m- [1mbut
   [0mÜßÛ[1mÛÛ   [0;33mÛ ÛßßßßÜÛÛÛßÛÛÜÛÛÛÛ ÛÛÛÛÜ[6C[1;37malso there is 
[A[56Csadness.
  [0mÛÛ   ßÜ    [33mßÛÛÛßÛÛÛßßÛÜÛÛßÛÛÛÛÛÛÛÛÝ
 [37mÛÜÛÜÜßÛ [1mÛ[5C[0;33mÛ ÛÛß ÛÛÛÛß  ÜÛÛÛÛÛÛÛÛ
[37mßÜÛÜÛ   [1mÛÜ[7C[0;33mßÜÛÛÛÜÜß ßÜÛß ßßÛÛÛ[46mÜ[1;36;43mÜ[40m
[0mÛ[1mÜ  ß[0mÛÜ ÛÛ[8C[33mßÜÛÛÛßÛÜ    [1;37mÜ[0mÜ Û[1;36mß[0;33mß
 [37mÛÜ   [1mÛ[0mÛÛ  [1mÜ[7C[0;33mÜ Ûß [1;37mÜ Ü[0mÛÛ[1mÛ[0mÛ[1mÝ
[A[32CÛ
  Ü[0mÛ  Üß  ÛÜ[1mßÜ    [0;33mÜÜß[37mÜÛÛÜ[1mß [0;33mÜÜÜÛßÛ
 [37mÜÛ[1mß   ß [0mÛ[1mÛÜ[0mÜß[1mÜ   [0;33mÛ [37mÛÛ ß[8C[33mÜ
[37mÛ[1mÛß   [0mÜ[1mÛß[0mÜÜ[1mÜß[0mÜÜ[1mÛ [0;33mÛÛÝ[37mÛÜ Û  [33m
[A[26CßßÛÛÛÛß
[1;30mú [37mß ß [0mÛÛ[1mÜß[0mÛß[1mÛÜß   [0;33mÛÝ[37mß [1mÛ[0mÛÛÛÛÜ
[A[28CÜ[1mÜÜÜÛ[0mÜ
ßÜ[1mÛ [0mß [1mÛ[0mßÜÛÜÛ[1mÜß[0mÜ    [33mÛÜ[37mßÜ[1mß[0mÛÛÛÛÛ[1mÛ
[A[30C[0mÛÛ[1mÛß
[0m
`k`c  `r1 MEETING THE ANCIENT ONE. `r0
  `0"My name is Turgon.  I was once a great warrior, lad."
  `2You can't help but giggle - he looks so old and frail!
  `0"Stop that giggling, I say!" `2the elderly one shouts.
@pauseoff
@do write
`x`x
@choice
If you were such a great warrior, why do you live in this dump?
Obnoxiously giggle even louder.
@if response is 1 then do
 @begin
 @show
`\`\  `0"I was banished from Greentree, where I used to train.
  `$"What the hell is Greentree?" `2you politely ask.
  `0"A city - a great city northwest of here." `2he sighs.
`k  `0"Besides, it's my father's house, not a dump.  There may be something of value
  here..   You look like a smart s&boy, if you can find it, you can have it."
 `k
 @bitset `t01 0 1
 @end
@if response is 2 then do
 @begin
 @show
`\`\  `0"You annoying little brat!  Begone from me!" `2Turgon shouts.
  `$"Not until you tell me why you live out here in the sticks!"
  `0"I was banished from my home town, Greentree, are you happy?! Get out!"
 `k
 @end
@#TURGON
;@do `t01 is 0 (I used this to test this .ref file)    <--seth wrote that
; made some changes here to put the turgeon/barak quests using `t01  <--cnw
@do moveback
@if `t01 is 256 then do
  @begin
  @do saybar
`0Goat Boy:`2  Get out of here!  I live here now!
  @closescript
   @end
@busy
@if `t01 more 0 then do
 @begin
 @show
`r0`c  `2Turgon looks at you expectantly.
 @end
@if bitcheck `t01 2 1 then do
 @begin
 @show
  `0"Did you find a way to clear my name?"
 @end
@if `t01 = 0 then do
 @begin
 @show
`r0`c  `2An old man with a white beard stands before you.
 @end
@do `v01 is 1
@do write
`x`x
@choice
-`t01 0 -`t01 1 -`t01 2 What is your name, old man with a white beard?
-`t01 3 +`t01 0 Tell me about Greentree, I wanna go there, sounds cool.
+`t01 1 -`t01 2 Come on you old codger!  Why were you kicked out of Greentree?
+`t01 1 +`t01 2 >`i08 0 -`t01 3 Offer Turgon your berry pie.
-`t01 4 +`t01 3 Tell me about Greentree, I wanna go there, sounds cool.
-`t01 6 +`t01 4 No, not really - you better get used to living here.
+`t01 6 I have news - Barak stole your old position!
+`t01 6 +`t01 5 -`t01 0 =`i74 1 I found something!  Barak's Diary!
Leave.
@do write
`\`\
@if responce is 8 then do
 @begin
 @pauseoff
@do addlog
  `r1  `r0 `0`n`% has cleared Turgon's name! `r1  `r0
@writefile lognow.txt
                                 `2-`0=`2-`%=`2-`0=`2-
@do `p18 + 30
@do `t01 is 255
@do `i74 = 0
@do x is 23
@do y is 16
@do map is 68
@loadmap &map
 @show
`k`c  `r1  Talking To Turgon `r0
  `2Turgon reads the diary quietly.  He looks sad.
  `0"I knew Barak to be juvenile - but I never dreamed he felt this way.  We
  must go to the city council and show them."
`k  `2You agree to go with Turgon.  A short while later you pass through
  the Greentree gates.  Turgon dabs his eyes quickly.
`k  `2People eye him as you pass - the guards do not stop him - many
  probably trained under him.  A crowd begins to form behind you.
`k  The walk ends in front of the city council.  Turgon goes in and comes
  out a few minutes later with the town elders.
`k`c  `r1`%  Clearing His Name  `r0
  `0"Turgon is innocent!  Turgon is innocent!" `2a young child screams
  excitedly.  Other voices join his cry - by the time the group reaches
  the training center there are hundreds.
`k  Turgon stands erect - for the first time since you met him you now
  understand what being a `0level 12`2 master is all about.  He demands that
  Barak see him.
`k  `2You see Barak's face look out a window.  When his eyes fall upon the
  small book you are clutching he screams.  `0"`n`0!  Why have you
  done this to me?!  You have ruined me!"
  `$"You ruined yourself.  Don't forget this." `2you reply stonily.
`k  `%YOU RECIEVE 30 QUEST POINTS.
  `2You give the diary back to the sobbing Barak.
`k
  @drawmap
  @update
 @end
@if responce is 1 then do
 @begin
 @routine turgmeet
 @drawmap
 @update
 @closescript
 @end
@if responce is 7 then do begin
 @begin
 @routine turgbarak
 @drawmap
 @update
 @closescript
 @end
@if responce is 2 then do begin
 @begin
@show
  `0"It is a beautiful land.  Ahh, memories.  Sweet Abdul, obese Arthur and
  childish Barak.  I knew these people you see." `2Turgon smiles.
  `$"They sound like freaks.  Why did they kick you out?" `2you demand.
  `0"I would rather not speak of this subject anymore," `2Turgon's voice cracks
  with emotion.
`k
 @bitset `t01 0 1
 @bitset `t01 1 1
 @bitset `t01 2 1
 @do goto turgon
 @end
@if responce is 3 then do begin
 @begin
@show
  `0"No, child.  I will not speak of it!" `2Turgon shouts.
  `2He seems pretty determined. If only you had some kind
  of peace offering...
`k
 @do goto turgon
 @end
@if responce is 4 then do begin
 @begin
@show
  `0"A pie?  For me?!  Such a good s&boy!" `2Turgon exclaims.
  `$"Yeah... Yeah I am." `2you agree wholeheartedly.
`k  `%You get a quest point!
`k
 @bitset `t01 3 1
 @do `p18 + 1
 @do `i08 - 1
 @do goto turgon
 @end
@if responce is 6 then do begin
 @begin
@show
  `0"Don't worry, s&boy, I'll find a way somehow..." `2Turgon promises.
`k
 @do goto turgon
 @end
@if responce is 5 then do begin
 @begin
@show
  `0"Alright, I'll tell you what happened."
  `2You sit down in front of the old man and cross your legs.  Story time!
`k`c  `r1  TURGON'S STORY HOUR `r0
`0  "I was once a level 12 master.  People would come from distant lands just
  to train with me," `2the elderly one whispers with a far away look in his eyes.
  `$"Yeah, I'm happy for you and everything, but what did you do that got you
  banished?  Are you that guy in the story I heard where he was exiled for
  having relations with a goat?" `2you ask curiously.
`k  Turgon is indignant.  `0"That is a crazy old legend to scare people.
  There was never such a person."
  `2You snicker - is he telling the truth?
`k  `0"The truth is this - it was soon after the great Red Dragon had been
  slain when.."
  `$"Red dragon?" `2you rudely interrupt in astonishment.
  `0"Nevermind.. suffice to say we were very happy and celebrating with a great
  feast when something awful happened," `2Turgon continues.
`k  `0"An anonymous report had led the city council to my door.  They forced the
  door and searched my home.  They found a satchel of stolen Gems."
`$  "Why'd you take 'em, old man?!" `2you ask puzzled.
  `0"I didn't take them!" `2he screams.
  `2His haggard eyes convince you - you vow to clear his name!
`k
 @bitset `t01 4 1
 @do goto turgon
 @end
@drawmap
@update
@#CHEST
@do moveback
@if `t02 is 0 then do
 @begin
 @do saybar
  You find a `+10!
 @do `i10 + 1
 @do `t02 = 1
 @closescript
 @end
@if `t02 is 1 then do
 @begin
 @do saybar
  There is nothing on the table.
 @end
@#NOTHING
@#exitlab
@do y - 2
@end
 
@#touga
@do moveback
@do saybar
<- University of Greater Arrisville
@end
 
@#arches
@do saybar
You walk through the arches.
@end
 
@#map
@do moveback
@clear screen
@pauseoff
@show
[?7h[255D[2C[0;30;43m                                          [40m
[A[44C[43m                                  [40m
  [43m  [42m ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ[40m[A
[57C[42mÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ» [43m  [40m
  [43m  [42m º                                     [46mÉÍÍÍÍÍÍÍ»[40m[A
[52C[42m                      º [43m  [40m
  [43m  [42m º       [46mÉÍÍÍÍÍÍÍ»[42m                     [40m[A
[43C[46mº       º[42m                      º [43m  [40m
  [43m  [42m º       [46mº       º[42m                     [40m[A
[43C[46mº DORMS º[42m   [46mÉÍÍÍÍÍÍÍÍÍÍ»[42m       º [43m  [40m
  [43m  [42m º       [46mº CHAPELº[42m                     [40m[A
[43C[46mº       º[42m   [46mº  ALCHEMY º[42m       º [43m  [40m
  [43m  [42m º       [46mº       º[42m                     [40m[A
[43C[46mº       º[42m   [46mº   DEPT.  º[42m       º [43m  [40m
  [43m  [42m º       [46mº       º[42m                     [40m[A
[43C[46mÈÍÍÍ[1CÍÍÍ¼[42m   [46mÈÍÍÍÍÍ[1CÍÍÍÍ¼[42m       º [40m[A
[76C[43m  [40m
  [43m  [42m º       [46mÈÍÍÍ[1CÍÍÍ¼[42m                      [40m[A
[44C[42m   [43m [42m             [43m [42m            º [43m[40m[A
[76C[43m  [40m
  [43m  [42m º           [43m [42m                         [40m[A
[43C[43m                           [42m    º [43m  [40m
  [43m  [42m º  [43m                                    [42m   [40m[A
[47C[42m                      [43m [42m    º [43m  [40m
  [43m  [42m º  [43m [42m                             [43m [40m[A
[39C[42m       [46mÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»[42m      [43m [42m [31m[40m[A
[71C[42mÑ  [30mº[1mï[43m  [40m
  [43m  [42m [0;30;42mº  [43m [42m              [46mÉÍÍÍÍÍÍÍÍ[40m[A
[32C[46mÍ»[42m    [43m [42m       [46mº               º[42m [40m[A
[64C[42m     [43m    (ð   [40m
  [43m  [42m º  [43m [42m              [46mº PHYSICS º[42m   [40m[A
[37C[42m [43m [42m       [46mº CLASSROOMS    [1C[43m       [40m[A
[70C[42m [1;37m [D  [0;30;42mº[1mï[43m  [40m
  [43m  [42m [0;30;42mº[46mÉÍÍÍ»[42m            [46mº  DEPT. [40m[A
[32C[46m [1C[43m     [42m       [46mº               º[42m   [40m[A
[66C[42m   [1;37mYou  [0;30;42mº [43m  [40m
  [43m  [42m º[46mº[1;34;44m<*>[0;30;46mº[42m            [40m[A
[23C[46mº         º[42m            [46mÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼[42m  [40m[A
[65C[42m    [1;37mare  [0;30;42mº [43m  [40m
  [43m  [42m º[46mÈÍÍÍ¼[42m            [46mÈÍÍÍÍÍÍÍÍÍ¼[42m   [40m[A
[37C[42m                                [1;37mhere [0;30;42mº [40m[A
[76C[43m  [40m
  [43m  [42m º                                                   [40m[A
[57C[42m                 º [43m  [40m
  [43m  [42m ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ[40m[A
[57C[42mÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼ [43m  [40m
  [43m  [42m             [1;37mUNIVERSITY OF GREATER ARRISVILLE:[40m[A
[50C[42m  CAMPUS MAP              [43m  [40m
  [43m                                                            [40m[A
[62C[43m                [40m
@key
@pauseon
@drawmap
@update
@closescript
 
@#fountain
@do saybar
`%What a pretty fountain!  I wonder why it's full of soap bubbles?
@end
 
@#chapel
@DO MOVEBACK
@datanewday ugachap.idf
@dataload ugachap.idf &playernum `p20
 
@IF `p20 IS 1 THEN DO
 @BEGIN
  @DO GOTO LOCKED
 @END
@CLEAR SCREEN
@SHOW
`2        You enter the chapel building.  An older man approaches.  He smiles
and extends his hand.  You're not sure why, but you feel relaxed in his  
presence.  You take his hand and shake it.
@KEY BOTTOM
@CLEAR SCREEN
@SHOW
 
[0;1m   [0;33mÜÜÜÜÜÜ
  ÛÛÛÛÛÛÛÛ
 [37m°°°°°°°[33mÛ[36;43mÞ[40m
[37m°°°°[33mÛÛ[37m°°[33mÛÛÛÛÛ
[37m°°°°[33mÛÛÛÛ[1;30;43mÜ[0;33mÛÛ
 [37m°°[33mÛÛÛÛÛ[1;30;43mßßß[17C[32;40m"Welcome to the UGA Campus Chapel.  I am the
    [0;33mÛÛÛÛ[15C[1;32mcampus chaplain.  How can I help you?"
   [0;35mÛÛÛÛÛÛ
  ÛÛ[1;30;45mÞßßÝ[0;35mÛÛ
  ÛÛ[1;30;45mÞ[0;35mÛÛ[1;30;45mßßßßßßß[40mÛ[0;33mÛÛß
  [35mÛÛ[1;30;45mßßßßßß[40mßßßßß
  [0;35mÛÛÛÛÛÛÛÛ
  ÛÛÛÛÛÛÛÛ
 
 
 
@do `v01 is 1
@CHOICE
`%"I've come seeking knowledge."
`%"You mean this isn't gym class?  Sorry, I gotta jet."
`%"I've come to beat you up, you religious fanatic."
@IF RESPONCE IS 3 THEN DO
 @BEGIN
  @CLEAR SCREEN
  @SHOW
[?7h[255D[13C[0;1;33mÛÛ[0;30mÛ
[14C[1;33mÛÛ[0;30mÛ
[15C[1;33mÛÛ[0;30mÛ
[16C[1;33mÛÛ[0;30mÛ
[17C[1;33mÛÛ
[17CÛ Û[21C[37mAs you draw back your fist to punch
[16C[33mÛ Û Û[16C[37mthe old man, you hear a thunder clap and
[15C[33mÛ  ÛÛ ÛÛ[14C[37msee a bright flash.  Then suddenly, all
[14C[33mÛ  Û  Û  Û[13C[37mis dark.
[13C[33mÛ  Û    Û  ÛÛ
[12CÛ  Û[6CÛ  [0;30mÛ[1;33mÛÛ
[11CÛÛ[0;30mÛ[1;33mÛ[6CÛ    Û Û
[10CÛ[0;30mÛ [1;33mÛ[6CÛ[6CÛ Û
[9CÛ  Û Û    Û Û    Û   Û
[7CÛÛ  Û[6CÛ   Û[8CÛ
[6CÛ   Û[6CÛ[5CÛ[8CÛ
[5CÛ   Û Û[5CÛÛ   Û Û[6CÛ Û
[8CÛ   Û   Û  Û[5CÛ    Û   Û
[13CÛ[12CÛ[8CÛ
  @KEY BOTTOM
  @CLEAR SCREEN
  @SHOW
 
 
 
  `0   When you awake, you realize that you don't feel very well.  You also
  notice that the sun appears to have travelled a good distance to the west.
  And if all that wasn't bad enough, you smell like burnt toast!
 
 
`6                          HITPOINTS ARE AT 1
                         ALIGNMENT IS MINUS 4
                       YOU HAVE LOST 500 TURNS
   @DO `p02 IS 1
   @DO `p11 - 500
   @DO `p07 - 4
  @DO GOTO DONE
 @END
 
@IF RESPONCE IS 2 THEN DO
 @BEGIN
   @SHOW
 
 
`0"Feel free to come back any time."
   @DO GOTO DONE
 @END
@CLEAR SCREEN
@SHOW
 
 
 
 
       `0 "There is much knowledge to be gained from studying God's Law.  It
will help you to become a better person."`2
@DO `p07 + 1
@DO `p20 RANDOM 10 1
@IF `p20 IS 1 THEN DO
 @BEGIN
  @SHOW
 
        I am the Lord your God.  You shall have
        no other God's before me.             
`0                                        Exodus 20:2-3
  @DO GOTO DONE
 @END
@IF `p20 IS 2 THEN DO
 @BEGIN
  @SHOW
 
        You shall not make for yourself an idol.  You 
        shall not bow down to them or worship them.
`0                                        Exodus 20:4-5
  @DO GOTO DONE
 @END
@IF `p20 IS 3 THEN DO
 @BEGIN
  @SHOW
 
        You shall not misuse the name of the Lord your God.
       
`0                                        Exodus 20:7  
  @DO GOTO DONE
 @END
@IF `p20 IS 4 THEN DO
 @BEGIN
  @SHOW
 
        Remember the Sabbath day by keeping it holy.
                                                          
`0                                        Exodus 20:8 
  @DO GOTO DONE
 @END
@IF `p20 IS 5 THEN DO
 @BEGIN
  @SHOW
 
        Honor your father and your mother.       
                                                      
`0                                        Exodus 20:12 
  @DO GOTO DONE
 @END
@IF `p20 IS 6 THEN DO
 @BEGIN
  @SHOW
 
        You shall not commit murder.          
                                           
`0                                        Exodus 20:13 
  @DO GOTO DONE
 @END
@IF `p20 IS 8 THEN DO
 @BEGIN
  @SHOW
 
        You shall not commit adultery.                    
                                     
`0                                        Exodus 20:14  
  @DO GOTO DONE
 @END
@IF `p20 IS 7 THEN DO
 @BEGIN
  @SHOW
 
        You shall not steal.                               
                                                              
`0                                        Exodus 20:15  
  @DO GOTO DONE
 @END
@IF `p20 IS 7 THEN DO
 @BEGIN
  @SHOW
 
        You shall not give false testimony against your
        neighbor.                              
`0                                        Exodus 20:16  
  @DO GOTO DONE
 @END
@IF `p20 IS 10 THEN DO
 @BEGIN
  @SHOW
 
        You shall not covet anything that is your neighbor's.
                                                              
`0                                        Exodus 20:17
  @DO GOTO DONE
 @END
@#DONE
@datasave ugachap.idf &playernum 1
@KEY BOTTOM
@DRAWMAP
@UPDATE
@CLOSESCRIPT
@#LOCKED
@DO SAYBAR
`%  The chapel door is locked.  Try again tomorrow.
@CLOSESCRIPT
 
@#teleport
@do moveback
@datasave lab.idf &playernum 1
@clear screen
@show
`2You feel a rush of wind and a burst of color explodes before your eyes.
@key
@show
 
`2Suddenly everything goes black.  Blacker than your worst nightmare.  You close
your eyes to fight off the blackness.
@key
@show
 
`2Then the wind stops.  Slowly you open your eyes.
@key
@do `p20 random 8 1
@if `p20 is 1 then goto church
@if `p20 is 2 then goto orphan
@if `p20 is 3 then goto daves
@if `p20 is 4 then goto library
@if `p20 is 5 then goto overlook
@if `p20 is 6 then goto kiteria
@if `p20 is 7 then goto witness
@if `p20 is 8 then goto hydra
 
@#overlook
@if overlook.rec exists true then do
@begin
@do map is 237
@loadmap 237
@do x is 40
@do y is 16
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
The Overlook Hotel, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#church
@if church.ref exists true then do
@begin
@do map is 1280
@loadmap 1280
@do x is 18
@do y is 16
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
The Stonebrook Church, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#witness
@if witness.rec exists true then do
@begin
@do map is 1572
@loadmap 1572
@do x is 31
@do y is 11
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
The Witness Protection Program, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#orphan
@if orphan.ref exists true then do
@begin
@do map is 1436
@loadmap 1436
@do x is 57
@do y is 9
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
The Greentree Orphanage, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#kiteria
@if kiteria.ref exists true then do
@begin
@do map is 1113
@loadmap 1113
@do x is 32
@do y is 19
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
Kiteria's Kastle, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#hydra
@if island.rec exists true then do
@begin
@do map is 934
@loadmap 934
@do x is 47
@do y is 14
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
The Island of the Hydra, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#daves
@if mine.rec exists true then do
@begin
@do map is 1195
@loadmap 1195
@do x is 34
@do y is 11
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
Dahlonega Dave's Do-It-Yourself Mining, another fine IGM from Mamoosoft
Programming!
@key
@drawmap
@update
@closescript
 
@#library
@if wally.rec exists true then do
@begin
@do map is 1196
@loadmap 1196
@do x is 56
@do y is 12
@do `p11 + 500
@show
 
`2You are no longer in the physics lab, and judging by the sun, it is much
earlier in the day!
@key
@show
 
`2That crazy thing actually worked!
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You are right where you started.
@key
@show
 
`2The pad did not seem to work this time.  Perhaps if your SysOp installed
Wise Wally's Public Library, another fine IGM from Mamoosoft Programming!
@key
@drawmap
@update
@closescript
 
@#enterphys
@clear screen
@show
`2As you enter the physics building, you notice rows of desks and chairs.
@key
@show
 
`2There are some computations on the blackboard.
@key
@pauseoff
@show
 
[0;1m[12C[0;33mÞ[30;43mÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ[40m[A
[53C[43mÜÜÜÜÜÜÜÜÜÜÜÜ[33;40mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛ  [1;37mE = «mc[0;30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;37mm [A
[53C= «E[0;30mÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;37mE ò mc [0;30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[A
[60CÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛ[1;37mE = ¬mc[0;30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[A
[60CÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;37mc = mEý[0;30mÛÛÛÛÛÛÛÛÛ[A
[60CÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;37mE ó mc[0;30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[A
[60CÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛ[1;37mE = m ö c   [0;30mÛÛÛÛÛÛÛÛ[1;37mm = Ecý[0;30mÛÛ[A
[46CÛÛÛÛÛÛ[1;37mc = ¬m[0;30mÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;37mc = mý«E[0;30mÛÛÛÛÛÛÛÛÛÛÛÛÛ[1;37mE = mc[A
[53Cý[0;30mÛÛÛÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ[33mÝ
[12CÞ[30;43mßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß[40m[A
[65C[33;40mÝ
 
@key
@pauseon
@clear screen
@show
`2There is a door on the far side of the room.  The sign on the door says:
 
`%                 Dr. Hanselfelter Ubermeister
            Professor of Physics and Bloodletting
@key
@do map is 1578
@loadmap 1578
@do x is 58
@do y is 10
@drawmap
@update
@closescript
 
@#lablock
@do moveback
@do saybar
`%The door to the lab is locked.
@closescript
 
@#secretary
@do moveback
@datanewday msjones.idf
@dataload msjones.idf &playernum `p20
@if `p20 = 1 then do
@begin
@do saybar
`%Miss Jones is busy filing something.
@closescript
@end
@clear screen
@show
`#"Welcome to Professor Ubermeister's office.  I'm his secretary, Miss Jones.
How can I help you?"
 
@do `v01 is 1
@choice
`%I'd like to see the professor.
`%I'm sorry.  I think I'm in the wrong place.
@if response is 2 then do
@begin
@show
 
 
 
`#"That's OK.  Happens all the time."
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
 
 
 
`#"Are you here to help with the experiment?"
 
@do `v01 is 1
@choice
`%What experiment?
`%Sure!  I'd like to help.
@if response is 1 then do
@begin
@show
 
 
`#"Never mind.  The professor is very busy.  You'll need to come back later."
@key
@show
 
`2She motions towards the door and gets back to her work.
@key
@drawmap
@update
@closescript
@end
@clear screen
@datasave msjones.idf &playernum 1
@show
`2Miss Jones gets up from behind her desk and escorts you to a small door at the
back of the office.
@key
@show
 
`2She unlocks the door and motions you inside.
@key
@do x is 23
@do y is 11
@drawmap
@update
@closescript
 
@#prof
@do moveback
@datanewday prof.idf
@dataload prof.idf &playernum `p20
@if `p20 = 1 then do
@begin
@do saybar
`%The Professor is busy working.
@closescript
@end
@clear screen
@show
`2You see a disheveled looking man in a white coat.  In front of him is what
looks like a small stage, with steps in the front.
@key
@show
 
`2He appears to be working on it with some strange tools.
@key
@show
 
`2You clear your throat to get his attention, and he looks up from his work.
@key
@clear screen
@show
`@"Welcome to my laboratory.  I am Professor Ubermeister.  Are you to be a
guinea pi... I mean... volunteer?"
 
@do `v01 is 1
@choice
`%No
`%Yes
@if response is 1 then do
@begin
@clear screen
@show
`@"I'm sorry, I am very busy.  If you are not here to help, please show
yourself out."
@key
@drawmap
@update
@closescript
@end
@datasave prof.idf &playernum 1
@clear screen
@show
`@"Very good!  I think my invention is ready for testing.
@key
@show
 
`@"I bet your are wondering what it is, eh?  Well, I will tell you.  It is
a time traveling device!"
@key
@show
 
`@"So far it is only working simply.  It will send you back in time about 500
turns."
@key
@show
 
`@"There is one small problem that I have not worked out yet.  I think that when
it sends you back in time, it may also transport you to someplace else in the
realm."
@key
@show
 
`@"You see, time and space are related.  The very fabric of the universe is
woven from the two.  There are some very interesting theories on...."
@key
@show
 
`@"I see by that look on your face that I am rambling.  So sorry.  Anyway, to
make the device work, simply climb those stairs.  When you reach the top, the
device will activate itself."
@key
@show
 
`@The professor looks at you expectantly.
@key
@drawmap
@update
@closescript
 
@#noenter
@datanewday lab.idf
@dataload lab.idf &playernum `p20
@if `p20 is 1 then do
@begin
@do moveback
@do saybar
`%Professor Ubermeister's office is locked.
@closescript
@end
 
@#classroom
@datanewday class.idf
@dataload class.idf &playernum `p20
@if `p20 = 1 then goto noclass
@loadmap 1577
@do map is 1577
@do x is 74
@do y is 11
@drawmap
@update
@do saybar
`%The door opens automatically.  This building is ADA compliant!
@closescript
 
@#noclass
@do moveback
@do saybar
`%Classes are over for the day so the building is locked.
@closescript
 
@#Eunice
@datanewday eunice.idf
@dataload eunice.idf &playernum `p20
@if `p20 = 1 then do
@begin
@do saybar
`%Eunice is busy filing something.
@closescript
@end
@datasave eunice.idf &playernum 1
@clear screen
@datasave class.idf &playernum 1
@show
`#"Hi.  I'm Eunice the secretary.  I need you to take this message to
Professor Dittmann.  She's an attractive young blonde woman; you can't
miss her.  Unfortunately, I forgot which classroom she's in, and classes
are almost done for the day.  Please try and catch her before she leaves!"
@key
@do `p20 random 8 1
@writefile foundher.idf
`p20
@writefile attempts.idf
0
@drawmap
@update
@closescript
 
@#first
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 1 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#second
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 2 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#third
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 3 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#fourth
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 4 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#fifth
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 5 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#sixth
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 6 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#seventh
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 7 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
@#eighth
@do moveback
@readfile attempts.idf
`p20
@if `p20 > 3 then goto sheleft
@readfile foundher.idf
`p20
@if `p20 = 8 then do
@begin
@do goto foundher
@closescript
@end
@do saybar
`%Sorry, wrong class.
@readfile attempts.idf
`p20
@do `p20 + 1
@do delete attempts.idf
@writefile attempts.idf
`p20
@closescript
 
 
@#sheleft
@clear screen
@show
`2The door is locked.  Classes seem to be done for the day.  She must have left
already.
@key
@show
 
`2Eunice, the secretary,  thanks you anyway and hurries you out of the building
so she can lock up for the day.
@key
@loadmap 522
@do map is 522
@do x is 63
@do y is 14
@drawmap
@update
@closescript
 
@#foundher
@clear screen
@show
`2Well done!  You found Professor Dittmann and completed the quest!
@key
@show
 
`2Professor Dittmann is even more attractive than Eunice described her.  Too
bad she's married to a dashing young computer programmer!
@key
@show
 
`2She is very glad to get the message.  She thanks you and hurries off.
@key
@show
 
`2You have finished this quest and gain `@1 quest point`2!
@do `p18 + 1
@key
@show
 
`2Eunice, the secretary,  thanks you and hurries you out of the building so she
can lock up for the day.
@key
@loadmap 522
@do map is 522
@do x is 63
@do y is 14
@drawmap
@update
@closescript
 
@#alchemy
@do moveback
@do `p20 is `v05
@do `p20 / 12
@if `p11 < `p20 then do
        @begin
        @do saybar
LOCKED, Nobody is answering.
        @closescript
        @end
@offmap
@clear screen
@show
`2As you enter the building you are struck by strange and disturbing smells.
@key
@show
 
`2There is a light fog in the room of a color which you have never before seen.
@key
@show
 
`2As your eyes adjust, you notice that the room is filled with all kinds of
laboratory equipment.
@key
@show
 
`2In the center of the room is table.  Behind the table is a man.  He looks
very busy.
 
@key
@do `v01 is 1
@choice
`%Leave before I disturb him.
`%Try to get his attention
@if response is 1 then do
@begin
@drawmap
@update
@closescript
@end
@clear screen
@show
`2You clear your throat to get his attention.
@key
@show
 
`2He looks up and smiles.
@key
@show
 
`9"Hello friend," he says.  "You're just in time.  I've been working on a way
to change gems into gold, and I think I've finally found the right formula."
@key
@show
 
`9"I don't suppose you have any gems on you?  I'll let you keep the gold if
it works."
 
@do `v01 is 1
@choice
`%No thanks.  I'm not interested.
`%Let me look in my pack and see.
@if response is 1 then do
@begin
@show
 
 
`9"Very well.  Come back if you change your mind."
@key
@drawmap
@update
@closescript
@end
@clear screen
@if `p19 = 0 then do
@begin
@show
`2You dig deep down in your pack but cannot find any gems.
@key
@show
 
`9"That's too bad.  Come back later if you find some."
@key
@drawmap
@update
@closescript
@end
@show
`2You dig deep down in your pack and find `L.`L.`L. `%`p19 `2gems!
@key
@do goto gemnum
@#gemnum
@show
`2How many are you going to give him?
@do readnum 10 0
@clear screen
@if `v40 > `p19 then do
@begin
@show
 
`2You don't have `%`v40 `2gems.  You only have `%`p19`2.
@key
@do goto gemnum
@end
@if `v40 < 0 then do
@begin
@show
 
`2You cannot give a negative number.
@key
@do goto gemnum
@end
@if `v40 = 0 then do
@begin
@show
`9"Too bad you changed your mind.  Come back later if you change it again."
@key
@drawmap
@update
@closescript
@end
@clear screen
@show
`2The alchemist greatfully accepts the `v40 gems.
@do `p19 - `v40
@key
@show
 
`2He drops them into a large flask filled with a green liquid.
@key
@show
 
`2The liquid begins to bubble with a red froth.
@key
@show
 
`2Suddenly there is a brilliant flash of light.
@key
@do `p20 random 5 1
@if `p20 = 1 then goto boom
@clear screen
@show
`2The liquid rises through a tube, swirls around, and spills out into a barrel.
@key
@show
 
`2As you look into the barrel, you cannot believe your eyes!
@key
@do `p20 random 1500 500
@do `v40 * `p20
@show
 
`2At the bottom of the barrel you see `%`v40 `2gold pieces!
@key
@do money + `v40
@clear screen
@show
`2The alchemist jumps for joy, then draws the money from the barrel and
hands it to you.
@key
@show
 
`9"Thanks for your help.  Come back anytime!"
@key
@drawmap
@update
@closescript
 
@#boom
@clear screen
@show
`2When you open your eyes you see that the alchemist and his equipment look
a bit like burnt toast.
@key
@show
 
`2Your gems are nowhere to be found.
@key
@show
 
`9"Gosh, sorry about that.  Let me do a little more work, and you can come
back later if you want."
@key
@drawmap
@update
@closescript
 
@#nomore
;
; Xena's House Version 1.21a (beta version)
;
;  Modified by LoRD2: Complete New World team with
;  permission from author of Xena IGM.
;  Xena IGM author:  quineska@hotmail.com
;
;
;  http://greenmachinebbs.com/lord2
;
@nocheck
@#START
@do moveback
@datanewday xena.idf
@dataload xena.idf &playernum `p20
@if `p20 is 0 then do
        @begin
        ;@routine regcheck
        @clear screen
        @do `p25 is `p09
        @do `p25 * 10
        @show
[40m
[39m[17C[0mÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜÜ
[5CÜÜÜÜÜÜÜÜÜÜÜÜÛ[1;30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÜ[0mÛ
    Û±±±±±±±±±±±±±ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÛ
[5CßßßßßßßßßßßßÛ[1;30mÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛß[0mÛ
[17Cßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßßß
 
[35m"I am, the renowned, Xena - Warrior Princess. I know you want to be one of
the greatest warriors in this realm of magic, foes, friends, good and evil by
killing the [5;31mRed Dragon.[0m [35mI shall offer you this magical potion
for just `p25 gold. It gives you more Dodge, Muscle, Experience and More
Hitpoints."
 
"Do you accept or decline my offer?"[0m
        
[37mIt looks like a `6murky `0green slime.[0m       
        
        @do `v01 is 1
        @choice
        Say, "Hmmm, I could take a bit of it."
        Respond, "Nah maybye tommorrow"
        @if responce is 2 then do
        @begin
        @show
        `\
        [37m"Sorry Xena, not today. I'll come back tommorrow."[0m`\
        @key
        @datasave xena.idf &playernum 1
        @drawmap
        @update
        @closescript
        @end
 
        @if responce is 1 then do
        @begin
        @if money < `p25 then do
                @begin
                @show
`\`\`4"Nice try! Did you really think that I, Xena, Warrior Princess would under
estimate the the amount of money you carrying? For that, my friend, you shall
not come here ever again!"
 
`%Xena kicks you out the door.`\
 
                @key
                @datasave xena.idf &playernum 1
                @drawmap
                @update
                @closescript
                @end
 
 
        @show
        `\`\
[36mYou drink down the liquid and you suddenly feel [5;31mmuch better[0m`\
 
        @key
        @do money - `p25
        @do `p01 + 20
        @do `p03 + 3
        @do `p02 + 3
       ; @do `p04 + (3 * `p09 / 60)  <replaced with below>
        @do `p20 is `p09
        @do `p20 * 3
        @do `p20 / 60
        @do `p04 + `p20
        ; @do `p05 + (1 * `p09 / 60)  <replaced with below>
        @do `p20 is `p09
        @do `p20 / 60
        @do `p05 + `p20
 
        @datasave xena.idf &playernum 1
        @drawmap
        @update
        @closescript
        @end
 
@closescript
@end
@if `p20 is 4 then do
        @begin
        @do saybar
`%Xena is too busy now to listen to your taunts.
        @closescript
        @end
@offmap
@clear screen
@show
`@So, you came back for more, eh? Well first, a match. I might have retired,
but I'm still good for any age!`\
@key
@do moveback
@drawmap
@update
@do saybar
`%Xena grabs you by the ear and drags you outside!
@do `p29 is `p04
@do `p29 + `p09
@do `p28 is `p05
@do `p28 * 3
@do `p27 is `p29
@do `p27 * 2
@do `p26 is `p03
@do `p26 * 3
@do `p26 / 2
@do `p21 random `p05 1
@do `p28 + `p21
@fight
;name
Xena
;string said when you see him
`5"Whenever your ready!" `2you hear from behind.
;power move kill string
`2She sits up ground, staring in amazement.
;sex - 1 is male, 2 is female, 3 is it
2
;weapon and strength for the weapon, up to 5
punches you|`p04
slashes you|`p27
throws her shacrum|`p26
gives you the pinch|`p29
bites you|`p04
;defense
`p28
;gold reward
`p01
;experience
`p07
;hit points
`p26
;if win: ref file|name or NONE
XENA|ENDFIGHT
;if lose: ref file|name or NONE
XENA.REF|DIE
;if runs: ref file|name or NONE
XENA|RUNFIGHT
 
@#DIE
@do saybar
You have failed little one.`l`l`k
@do quebar
She spends the next half hour going over your sores.
@do `p20 is `p03
@do `p20 / 2
@do `p02 IS `p20
@datasave xena.idf &playernum 4
@drawmap
@update
@#endfight
@do saybar
Congratulations, you have bested me.
@do quebar
She spends the next half hour going over your sores.
@do `p02 IS `p03
@datasave xena.idf &playernum 4
@drawmap
@update
 
@#runfight
@do x is 75
@do y is 15
@drawmap
@update
@do saybar
You manage to run so she can't see you!
@do quebar
Come back here you coward! I'll get you!
@datasave xena.idf &playernum 3
@drawmap
@update
 
@#XENAFOUND
@datanewday xena.idf
@dataload xena.idf &playernum `p26
@if `p26 is 3 then do
        @begin
        @do saybar
                                                                              
        @do saybar
"So that's where you are! See you in hell!"`l`l`l`l
;        @key
        @do saybar
                                                                            
        @do saybar
Xena catches you before you run away. She throws her shacrum at you.`l`l`l`l`l`l
;        @key
        @do saybar
                                                                             
        @do saybar
All now you can see is blood.....`l`l`l`l
;        @key
        @run die in gametxt.ref
         @closescript
         @end
 
@#regcheck
@if xenainfo.dat exists false then do
@begin
@clear screen
@show
 
`4This program is unregistered. `$Your sysop can register it for `^FREE `$at
`3http://quineska.bizland.com.`% Also you can pick up more IGMS from
Quineska Software as well as the latest news concerning our software plus
other things.
 
Thankyou
Christopher Armstrong
`l`l`l`l`l`l
@key
@closescript
@end
 
@readfile xenainfo.dat
`s10
`p21
`p22
@do `p21 * 8
@do `p21 + 8374
@do `p21 / 6
@do `p21 - 790
@do `p21 * 89
@do `p21 / 95
@do `p21 * 6
@do `p21 + 267
@if `p21 not `p22 then do
@begin
@clear screen
@show
 
`4This program is unregistered. `$Your sysop can register it for `^FREE `$at
`3http://quineska.bizland.com.`% Also you can pick up more IGMS from
Quineska Software as well as the latest news concerning our software plus
other things.
 
Thankyou
Christopher Armstrong
`l`l`l`l`l`l
@key
@end
 
@#sign
@do moveback
;@if xenainfo.dat exists false then do
;@begin
;@routine unsaybar
;@end
;@readfile xenainfo.dat
;`s10
;`p21
;`p22
;@do `p21 * 8
;@do `p21 + 8374
;@do `p21 / 6
;@do `p21 - 790
;@do `p21 * 89
;@do `p21 / 95
;@do `p21 * 6
;@do `p21 + 267
;@if `p21 not `p22 then do
;@begin
;@label unregsaybar
;@do saybar
;Xena's House by Quineska Software, UNREGISTERED. Please tell your SYSOP to`l`l`l`l`l`l`l`l
;@do saybar
;register at http://quineska.bizland.com or quineska@hotmail.com.
; @closescript
; @routineabort
;
;@end
;@do saybar
;Xena's House by Quineska Software. Registered to `s10.
 
;@#unreg
;@clear screen
;@show
 
 
;`4This program is unregistered. `$Your sysop can register it for `^FREE `$at
;`3http://quineska.bizland.com.`% Also you can pick up more IGMS from
;Quineska Software as well as the latest news concerning our software plus
;other things.
 
;Thankyou
;Christopher Armstrong
;`l`l`l`l`l`l
;@key
 
@#accident
@if &lasty is 18 then do
  @begin
  @dataload xena2.idf &playernum `p20
   @if `p20 is 1 then goto end
  @do x is 65
  @do y is 17
  @do saybar
Xena: How the hell did you get in there? Here is $500 as a gift!
  @datasave xena2.idf &playernum 1
  @do money + 500
  @update
  @closescript
@end
@do moveback
 
@#end
@update
@closescript
 
